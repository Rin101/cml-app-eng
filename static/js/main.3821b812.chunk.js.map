{"version":3,"sources":["Editor.js","toCml.js","sounds/決定、ボタン押下38.mp3","sounds/決定、ボタン押下44.mp3","serialPort.js","eng/programBlock_eng.js","useLocalStorage.js","settingsPanel/settingInfo.js","settingsPanel/settingsDefaultInfo.js","settingsPanel/settingsPanel.js","eng/tanni-funcs_eng.js","eng/menu_eng.js","eng/App_eng.js","image/popup-instruction.png","index.js"],"names":["Editor","props","_jsx","className","children","ControlledEditor","onBeforeChange","editor","data","value","onChange","options","lineWrapping","lint","lineNumbers","theme","toCML","programData","loopData","isNyuryokuShingou","tkData","settings","_step","output","every_data_teigi","every_program_teigi","_iterator","_createForOfIteratorHelper","s","n","done","dousa_group","indexOf","toString","_step3","dousa_jikkou_of_group","_iterator3","_step4","dousa_row","dousa_jikkou_row_arr","shuturyoku_row","gentenfukki","_iterator4","dousa","length","dousa_jiku","cml_numbers","tanniValue","getPulseValue","push","concat","console","log","alert","err","e","f","_step5","loop_start","loop_end","_iterator5","loop","join","settingsCML","jikuNum","bunkainouValueList","bunkainouCML","parseInt","i","kNumList","constantKNumList","_i","_allKNumList","kNum","includes","_step2","_iterator2","itemInConstants","valueArr","divideVar","arguments","undefined","parseFloat","tanni","Math","round","str2ab","str","buf","ArrayBuffer","bufView","Uint16Array","strLen","charCodeAt","delay","time","Promise","resolve","setTimeout","pressRun","_x","_pressRun","apply","_asyncToGenerator","_regeneratorRuntime","mark","_callee","cml","cmlChunkList","port","cmlChunk","editedCmlChunk","writer","wrap","_context","prev","next","split","navigator","serial","requestPort","sent","open","baudRate","replace","writable","getWriter","write","releaseLock","t0","finish","close","stop","ProgramBlockEng","addRowRef","useRef","pgEmptyBox","_useState","useState","_useState2","_slicedToArray","dousaNumArr","setDousaNumArr","_useState3","_useState4","timerNumArr","setTimerNumArr","trashInput","setProgramData","indexArr","target","parentNode","id","shift","tmp","_toConsumableArray","trashJiku","currentTarget","index","jiku","splice","setJiku","tkTmp","setTkData","setLoopData","addRow","emptyRow","addJiku","kikou","susumiryou","gensoku","bunkai","moveRow","direction","dousaGroup","rowIndex","_ref","_ref2","moveJiku","current_jiku","_step6","_iterator6","tmp_dousa","tmp_tk_item","_step7","_iterator7","_step8","_iterator8","showTypeData","isLoop","parentId","dousaType","dousaNum","setLoopInputObj","setInputBoxType","typeDataObj","setTypeDataObj","emptyBoxDragEnd","style","cursor","resizeLoop","mainItemIndex","forEach","isDirectionAvailable","_step9","_iterator9","rowLength","dousaBoxRef","_jsxs","pg_l_arr","main_grid","jiku_i","jiku_num","onClick","gridColumn","_step10","dousa_group_i","_iterator10","_loop","_step11","dontPutEmp","dousa_row_i","_iterator11","_loop2","loopCount","loopHeight","loopStyleHeight","z","dragArrows","loopId","height","map","dragArrow","trashLoop","onDragOver","currentDraggedCommand","preventDefault","emptyBoxLoopDragOver","onDragEnter","emptyBoxLoopDragEnter","onDragLeave","emptyBoxLoopDragLeave","onDrop","isMute","Audio","soundfile2","play","emptyBoxLoopDragDrop","ref","_step12","dousa_i","_iterator12","_loop3","noValueArr","dousaId","jikuOfDousa","dousaName","draggable","onDragStart","onDragEnd","onMouseEnter","setCurrentDraggedCommand","marginRight","emptyBoxDragOver","emptyBoxDragEnter","emptyBoxDragLeave","audio","tmpTimerNumArr","draggedIndexArr","tmpDousaNumArr","emptyBoxDragDrop","tmpLoop","trashRow","addGroupDragOver","querySelector","display","addGroupDragEnter","addGroupDragLeave","emptyGroup","addGroupDragDrop","gridTemplateColumns","dataToHTML","Button","color","variant","setCmlOutput","TypeDataInDousaEng","popupRef","closeTypeData","subTanni","dataFormat","ichigimeData","bangouRange","inputForm","incrementalIchigimeData","oshitukeData","incrementalOshitukeData","DousaInputBox","NumDropDown","range","_Fragment","inputLine","DataInput","tanniArr","isAllNumber","current","querySelectorAll","input","isNaN","inputs","tanniSelectors","_step13","_iterator13","_step14","_iterator14","setTypeData","_useState5","_useState6","setValue","_useState7","_useState8","tanniState","setTanniState","required","placeholder","defaultValue","LoopInputBoxEng","loopGroupIndex","loopRowIndex","currentLoopIndexInList","loopItem","_useState9","_useState10","_useState11","_useState12","currentNum","setCurrentNum","numItemRef","currentNumRef","selectItem","_step15","sameDataArr","_iterator15","_step16","_iterator16","isItemsShown","showItems","res","getNumItems","PREFIX","SettingInfo","text","textBoxRef","classList","add","remove","contains","onMouseLeave","SettingsDefaultInfo","info","isShown","setIsShown","defaultValues","constantValues","constantNumNames","marginTop","infoList","item","displayInfo","opacity","_constantValues","displayConstants","SettingsPanel","closePanel","setSettings","settingsPanelData","settingsObj","setSettingsObj","useEffect","SettingsPanelItem","setInputValue","setTextInputValue","Dropdown","setItem","inputValue","inputIndex","defaultItem","itemArr","selectedItem","setSelectedItem","dropdownItems","selectedItemRef","clickItem","innerText","WizardJikuEng","params","tannikannsannData","history","setInput","checkBoxRef","num","checked","changeInput","isChecked","type","name","htmlFor","jikuCheckBoxContainer","isCheckedArr","checkBox","setHistory","setWizardInput","goNext","WizardKikouEng","jikuMainNum","radioRef","WizardSusumiryouEng","mode","susumiryouText","susumiryouVar","PI","Number","EPSILON","kikouValue","goBack","WizardGensokuEng","input1","setInput1","input2","setInput2","selectorRef","readOnly","handleToggle","WizardBunkaiEng","bunkaiText","bunkaiVar","DropdownEng","digits","negative","multiplicator","pow","toFixed","roundTo","setTannikannsannData","goOK","_useState13","_useState14","TopMenuEng","topMenuRef","muteIconRef","handleFileSave","obj","JSON","stringify","date","Date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","filename","file","Blob","window","msSaveOrOpenBlob","a","document","createElement","url","URL","createObjectURL","href","download","body","appendChild","click","removeChild","revokeObjectURL","downloadFile","hide","muteIcon","expSave","expImp","expTanni","accept","reader","FileReader","onload","parse","result","readAsText","files","handleFileImport","layerRef","setIsMute","Tannikannsann","closeTanni","WizardController","wizardInput","AppEng","cmlOutput","setIsNyuryokuShingou","_useLocalStorage","key","initialValue","prefixedKey","jsonValue","localStorage","getItem","useLocalStorage","_useLocalStorage2","initialTannikannsannData","_useState15","_useState16","_useState17","Array","_useState18","_useState19","_useState20","loopInputObj","_useState21","_useState22","inputBoxType","typeDataRef","loopInputRef","expCopy","expCopyDone","commandSelectorRef","instructionPopupRef","commandDragStart","soundfile1","commandHover","handleFileExport","DataInputBox","isInitial","PopUpOfInstruction","_jikkou","application","setApplication","setTanniValue","clipboard","writeText","jikkou","AppWrapper","ReactDOM","render","React","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.3821b812.chunk.js","sourcesContent":["import React from 'react'\nimport 'codemirror/lib/codemirror.css'\nimport 'codemirror/theme/material.css'\nimport { Controlled as ControlledEditor } from 'react-codemirror2'\n\nexport const Editor = (props) => {\n\n    const handleChange = (editor, data, value) => {\n        props.onChange(value)\n    }\n\n    return(\n        <div className=\"cml-editor-container\">\n            <ControlledEditor \n                onBeforeChange={handleChange}\n                value={props.value}\n                className=\"cml-editor\"\n                options={{\n                    lineWrapping: true,\n                    lint: true,\n                    lineNumbers: true,\n                    theme: 'material'\n                }} \n            />\n        </div>\n    )\n}","export const toCML = (programData, loopData, isNyuryokuShingou, tkData, settings) => {\n\n    let containsShuturyoku1 = false\n    let containsShuturyoku2 = false\n    let containsShuturyoku3 = false\n    let containsShuturyokuOff = false\n\n    let output = \"\"\n    let every_data_teigi = \"\"\n    let every_program_teigi = \"\"\n    for (let dousa_group of programData) {\n        let dousa_group_index = programData.indexOf(dousa_group) + 1\n        every_program_teigi += \"B\" + dousa_group_index.toString() + \".1\\r\\n\"\n        let dousa_jikkou_of_group = \"\"\n        for (let dousa_row of dousa_group) {\n            let dousa_jikkou_row_arr = []\n            let shuturyoku_row = \"\"\n            let gentenfukki = \"\"\n            for (let dousa of dousa_row) {\n                if (dousa.length !== 0) {\n                    const dousa_jiku = dousa_row.indexOf(dousa) + 1\n                    let cml_numbers = dousa[1].toString() + \".\" + dousa_jiku.toString()\n                    const tanniValue = tkData[dousa_jiku-1].tanniValue\n                    switch (dousa[0]) {\n                        case \"位置決め\":\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue,100).toString()+\"\\r\\nA\"+cml_numbers+\"=\"+getPulseValue(dousa[2][1], tanniValue,1000).toString()+\"\\r\\nP\"+cml_numbers+\"=\"+getPulseValue(dousa[2][2], tanniValue).toString()+`\\r\\n`\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},P${cml_numbers}`)\n                            break\n                        case \"位置決め+\":\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue,100).toString()+\"\\r\\nA\"+cml_numbers+\"=\"+getPulseValue(dousa[2][1], tanniValue,1000).toString()+\"\\r\\nP\"+cml_numbers+\"=\"+getPulseValue(dousa[2][2], tanniValue).toString()+`\\r\\n`\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},P${cml_numbers}+`)\n                            break\n                        case \"押付け\":\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue,100).toString()+\"\\r\\nA\"+cml_numbers+\"=\"+getPulseValue(dousa[2][1], tanniValue,1000).toString()+\"\\r\\nP\"+cml_numbers+\"=\"+getPulseValue(dousa[2][2], tanniValue).toString()+\"\\r\\n\"\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},Q${cml_numbers}`)\n                            break\n                        case \"押付け+\":\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue,100).toString()+\"\\r\\nA\"+cml_numbers+\"=\"+getPulseValue(dousa[2][1], tanniValue,1000).toString()+\"\\r\\nP\"+cml_numbers+\"=\"+getPulseValue(dousa[2][2], tanniValue).toString()+\"\\r\\n\"\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},Q${cml_numbers}+`)\n                            break\n                        case \"タイマ\":\n                            every_data_teigi += \"T\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue).toString()+\"\\r\\n\"\n                            dousa_jikkou_row_arr.push(`T${cml_numbers}`)\n                            break\n                        case \"入力点からの実行\":\n                            isNyuryokuShingou = true\n                            break\n                        case \"出力点1へ出力\":\n                            shuturyoku_row += \"O1.1\\r\\n\"\n                            containsShuturyoku1 = true\n                            // if (!containsShuturyoku1) {\n                            //     shuturyoku_row += \"O1.1\\r\\n\"\n                            //     containsShuturyoku1 = true\n                            // } else {\n                            //     alert('エラー: 表を直してください\\n出力点1への出力は1回しか使えません。')\n                            // }\n                            break  \n                        case \"出力点2へ出力\":\n                            shuturyoku_row += \"O2.1\\r\\n\"\n                            containsShuturyoku2 = true\n                            // if (!containsShuturyoku2) {\n                            //     shuturyoku_row += \"O2.1\\r\\n\"\n                            //     containsShuturyoku2 = true\n                            // } else {\n                            //     alert('エラー: 表を直してください\\n出力点2への出力は1回しか使えません。')\n                            // }\n                            break\n                        case \"出力点3へ出力\":\n                            shuturyoku_row += \"O3.1\\r\\n\"\n                            containsShuturyoku3 = true\n                            // if (!containsShuturyoku3) {\n                            //     shuturyoku_row += \"O3.1\\r\\n\"\n                            //     containsShuturyoku3 = true\n                            // } else {\n                            //     alert('エラー: 表を直してください\\n出力点3への出力は1回しか使えません。')\n                            // }\n                            break\n                        case \"出力点を全てOFF\":\n                            every_program_teigi += \"F1.1,F2.1,F3.1\\r\\n\"\n                            containsShuturyokuOff = true\n                            // if (!containsShuturyokuOff) {\n                            //     every_program_teigi += \"F1.1,F2.1,F3.1\\r\\n\"\n                            //     containsShuturyokuOff = true\n                            // } else {\n                            //     alert('エラー: 表を直してください\\n出力点を全てOFFは1回しか使えません。')\n                            // }\n                            break   \n                        case \"原点復帰\":\n                            gentenfukki += \"|.\" + dousa_jiku.toString() + \"\\r\\n\"\n                            console.log(\"hi\")\n                            break    \n                        default:\n                            alert('ERROR-表を直してください')\n                            break\n                    }\n                }\n            }\n            let loop_start = \"\"\n            let loop_end = \"\"\n            for (let loop of loopData) {\n                if (loop[0][0] === programData.indexOf(dousa_group).toString() && loop[0][1] === dousa_group.indexOf(dousa_row).toString()) {\n                    loop_start = `X${loop[2]}.1\\r\\n`\n                }\n                if (loop[1][0] === programData.indexOf(dousa_group).toString() && loop[1][1] === dousa_group.indexOf(dousa_row).toString()) {\n                    loop_end = `X.1-\\r\\n`\n                }\n            }\n            if (dousa_jikkou_row_arr.length >= 1) {\n                dousa_jikkou_of_group += loop_start + dousa_jikkou_row_arr.join(\",\") + \"\\r\\n\" + shuturyoku_row + gentenfukki + loop_end\n            } else {\n                dousa_jikkou_of_group += loop_start + shuturyoku_row + gentenfukki + loop_end\n            }\n        }\n        every_program_teigi += dousa_jikkou_of_group\n    }\n\n    let settingsCML = \"\\r\\n\"\n    const jikuNum = programData[0][0].length\n\n    // 分解能のK値設定\n    const bunkainouValueList = [300, 600, 1000, 1200, 2000, 3000, 5000, 6000, 10000, 12000]\n    let bunkainouCML = 0\n    if ((typeof tkData[0][\"bunkai\"]) === \"string\") {\n        bunkainouCML = bunkainouValueList.indexOf(parseInt(tkData[0][\"bunkai\"])).toString()\n    } else {\n        bunkainouCML = bunkainouValueList.indexOf(tkData[0][\"bunkai\"]).toString()\n    }\n    for (let i=1; i<=jikuNum; i++) {\n        settingsCML += (\"K1.\"+i.toString()+\"=\"+bunkainouCML+\"\\r\\n\")\n    }\n\n\n    const allKNumList = [\n        2, 3, 4, 5, 7, 11, 12, 13, 14, 22, 23, 24, 25, 26, 27, 28, 30, 43, 44, 45, 46, 47, 53, 55, 56, 57, 65, 71, 74, 81, 82\n    ]\n\n    // 設定のK値設定\n    const kNumList = [5, 11, 12, 13, 14, 22, 23, 24, 25, 26, 28]\n    // 毎回設定されるK値\n    const constantKNumList = [[2, \"0\"], [3, \"1\"], [4, \"0\"], [7, \"0\"], [27, \"0\"], [30, \"0\"], [43, \"0000\"], [44, \"0\"], [45, \"0\"], [46, \"0\"], [47, \"0\"], [53, \"111\"], [55, \"0\"], [56, \"0\"], [57, \"0\"], [65, \"0\"], [71, \"0\"], [74, \"0\"], [81, \"1\"], [82, \"1\"]]\n    \n\n    for (let kNum of allKNumList) {\n        if (kNumList.includes(kNum)) {\n            for (let i=1; i<=jikuNum; i++) {\n                const value = settings[\"kNum\"+kNum.toString()]\n                if (typeof value !== 'string') {\n                    settingsCML += (\"K\"+kNum.toString()+\".\"+i.toString()+\"=\"+value.toString()+\"\\r\\n\")\n                } else {\n                    settingsCML += (\"K\"+kNum.toString()+\".\"+i.toString()+\"=\"+value+\"\\r\\n\")\n                }\n            }\n        } else {\n            for (let itemInConstants of constantKNumList) {\n                if (itemInConstants[0] === kNum) {\n                    for (let i=1; i<=jikuNum; i++) {\n                        settingsCML += (\"K\"+itemInConstants[0].toString()+\".\"+i.toString()+\"=\"+itemInConstants[1]+\"\\r\\n\")\n                    }\n                    break\n                }\n            }\n        }\n    }\n\n    \n    output += every_data_teigi\n    output += every_program_teigi\n    // if (isNyuryokuShingou) {\n    //     let nyuryokuTxt = `\\r\\nK81=1\\r\\nK82=1\\r\\nL1.1\\r\\nI1.1,JL2.1,T0.1\\r\\nI2.1,JL3.1,T0.1\\r\\nI3.1,JL4.1,T0.1\\r\\nI4.1,].1:].1,T0.1\\r\\nL2.1\\r\\n[1.1\\r\\nI1.1,W0.1,JL1.1\\r\\nL3.1\\r\\n[2.1\\r\\nI2.1,W0.1,JL1.1\\r\\nL4.1\\r\\n[3.1\\r\\nI3.1,W0.1,JL1.1\\r\\nEND.1`\n    //     return output + \"END.1\" + settingsCML + nyuryokuTxt\n    // } else {\n    //     return output + \"END.1\" + settingsCML\n    // }\n    let nyuryokuTxt = `L1.1\\r\\nI1.1,JL2.1,T0.1\\r\\nI2.1,JL3.1,T0.1\\r\\nI3.1,JL4.1,T0.1\\r\\nI4.1,].1:].1,T0.1\\r\\nL2.1\\r\\n[1.1\\r\\nI1.1,W0.1,JL1.1\\r\\nL3.1\\r\\n[2.1\\r\\nI2.1,W0.1,JL1.1\\r\\nL4.1\\r\\n[3.1\\r\\nI3.1,W0.1,JL1.1\\r\\nEND.1\\r\\n`\n    // let nyuryokuTxt = `\\r\\nK81=1\\r\\nK82=1\\r\\nL1.1\\r\\nI1.1,JL2.1,T0.1\\r\\nI2.1,JL3.1,T0.1\\r\\nI3.1,JL4.1,T0.1\\r\\nI4.1,].1:].1,T0.1\\r\\nL2.1\\r\\n[1.1\\r\\nI1.1,W0.1,JL1.1\\r\\nL3.1\\r\\n[2.1\\r\\nI2.1,W0.1,JL1.1\\r\\nL4.1\\r\\n[3.1\\r\\nI3.1,W0.1,JL1.1\\r\\nEND.1`\n    return output + \"END.1\\r\\n\" + nyuryokuTxt + \"\\\\\" + \"\\r\\n$.\\r\\n\" + settingsCML + \"\\r\\n\"\n}\n\nconst getPulseValue = (valueArr, tanniValue, divideVar=1) => {\n    let value = parseFloat(valueArr[0])\n    const tanni = valueArr[1]\n    if (tanni.includes(\"pps\") || tanni.includes(\"%\") || tanni.includes('msec') || tanni.includes('Pulse')) {\n        return Math.round(value)\n    } else {\n        return Math.round(value * tanniValue / divideVar)\n    }\n}\n","export default __webpack_public_path__ + \"static/media/決定、ボタン押下38.47b42841.mp3\";","export default __webpack_public_path__ + \"static/media/決定、ボタン押下44.6471b8fa.mp3\";","function str2ab(str) {\n    var buf = new ArrayBuffer(str.length * 2); // 2 bytes for each char\n    var bufView = new Uint16Array(buf);\n    for (var i = 0, strLen = str.length; i < strLen; i++) {\n        bufView[i] = str.charCodeAt(i);\n    }\n    return buf;\n}\n\nfunction delay(time) {\n  return new Promise(resolve => setTimeout(resolve, time));\n}\n\nexport async function pressRun (cml) {\n    // const port = await navigator.serial.requestPort();\n    // await port.open({ baudRate: 38400 });\n    // let writer = await port.writable.getWriter();\n    // await writer.write(str2ab('S.1=100\\r\\n'));\n    // await writer.releaseLock();\n    // writer = await port.writable.getWriter();\n    // await writer.write(str2ab('A.1=100\\r\\n'));\n    // await writer.releaseLock();\n    // writer = await port.writable.getWriter();\n    // await writer.write(str2ab('P.1=100000\\r\\n'));\n    // await writer.releaseLock();\n    // writer = await port.writable.getWriter();\n    // await writer.write(str2ab('^.1\\r\\n'));\n    // await writer.releaseLock();\n    // // ==============\n    // // await writer.write(str2ab('P.1=0\\r\\n'));\n    // // await writer.write(str2ab('^.1\\r\\n'));\n    // // await writer.releaseLock();\n    // await port.close();\n\n    let cmlChunkList = cml.split('\\n')\n    \n    const port = await navigator.serial.requestPort();\n    await port.open({ baudRate: 38400 });\n    for (let cmlChunk of cmlChunkList) {\n        let editedCmlChunk = cmlChunk.replace(/[\\n\\r]+/g, '');\n        editedCmlChunk = editedCmlChunk.replace(/\\s+/g, '');\n        if (editedCmlChunk.length > 0) {\n            const writer = await port.writable.getWriter();\n            await writer.write(str2ab(editedCmlChunk + '\\r\\n'));\n            await writer.releaseLock();\n        }\n    }\n    // const writer = await port.writable.getWriter();\n    // await writer.write(str2ab('[1.1\\r\\n'));\n    // await writer.releaseLock();\n    await delay(500);\n    await port.close();\n}\n\nexport async function send () {\n\n    const port = await navigator.serial.requestPort();\n    await port.open({ baudRate: 38400 });\n    const writer = await port.writable.getWriter();\n    await writer.write(str2ab('[1.1' + '\\r\\n'));\n    // console.log('[1.1\\r\\n');\n    await writer.releaseLock();\n    await port.close();\n}\n\nexport async function stop() {\n    const port = await navigator.serial.requestPort();\n    await port.open({ baudRate: 38400 });\n    const writer = port.writable.getWriter();\n    // await writer.write(str2ab('].1' + '\\r\\n'));\n    // await writer.write(str2ab(']L' + '\\r\\n'));\n    await writer.write(str2ab('L1.1' + '\\r\\n'));\n    await writer.write(str2ab('END.1' + '\\r\\n'));\n    await writer.write(str2ab('$.1' + '\\r\\n'));\n    writer.releaseLock();\n    await port.close();\n}\n","import React, { useRef, useState } from 'react'\nimport { Button } from '@mui/material';\nimport { toCML } from '../toCml';\nimport soundfile1 from '../sounds/決定、ボタン押下38.mp3'\nimport soundfile2 from '../sounds/決定、ボタン押下44.mp3'\nimport { pressRun, stop } from '../serialPort';\n\nexport const ProgramBlockEng = (props) => {\n    const addRowRef = useRef()\n    const pgEmptyBox = useRef()\n\n    const [dousaNumArr, setDousaNumArr] = useState([1,0,0,0,0,0,0,0,0,0,0,0,0,0,0])\n    const [timerNumArr, setTimerNumArr] = useState([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])\n\n    const trashInput = (e, programData, setProgramData) => {\n        const indexArr = e.target.parentNode.id.split('-')\n        indexArr.shift()\n        let tmp = [...programData]\n        tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])] = []\n        setProgramData(tmp) \n    }\n\n    const trashLoop = (e, loopData, setLoopData) => {\n        const indexArr = e.target.parentNode.id.split('-')\n        indexArr.shift()\n        let tmp = [...loopData]\n        let index = -1\n        tmp.forEach(loop => {\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\n                index = tmp.indexOf(loop)\n            }\n        })\n        if (index !== -1) {\n            tmp.splice(index, 1);\n        }\n        setLoopData(tmp) \n    }\n\n    const trashRow = (e, programData, setProgramData, loopData, setLoopData) => {\n        const indexArr = e.currentTarget.parentNode.id.split('-')\n        indexArr.shift()\n        let tmp = [...programData]\n        if (tmp[parseFloat(indexArr[0])].length > 1) {\n            tmp[parseFloat(indexArr[0])].splice(parseFloat(indexArr[1]), 1);        \n        } else {\n            let emptyRow = []\n            let i = 1\n            while (i <= props.jiku) {\n                emptyRow.push([])\n                i += 1\n            }\n            tmp[parseFloat(indexArr[0])] = [emptyRow]\n        }\n        // ------------------------------------\n        // --\n        let tmpLoop = [...loopData]\n        tmpLoop.forEach(loop => {\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\n                if (loop[1][1] === loop[0][1]) {\n                    tmpLoop.splice(tmpLoop.indexOf(loop), 1);\n                }\n            } else if (loop[1][0] === indexArr[0] && loop[1][1] === indexArr[1]) {\n                loop[1] = [indexArr[0], (parseFloat(indexArr[1])-1).toString()]\n            }\n        })\n\n        tmpLoop.forEach(loop => {\n            if ((programData[parseFloat(loop[0][0])].length - 1) < (loop[1][1] - parseFloat(loop[0][1]))) {\n                loop[1][1] = (parseFloat(loop[1][1])-1).toString()\n            }\n        })\n\n        setProgramData(tmp)\n        setLoopData(tmpLoop) \n    }\n\n    const trashGroup = (e, programData, setProgramData, loopData, setLoopData) => {\n        const indexArr = e.target.parentNode.id.split('-')\n        indexArr.shift()\n        let tmp = [...programData]\n        if (tmp.length > 1) {\n            tmp.splice(parseFloat(indexArr[0]), 1);\n        } else {\n            tmp = [[[]]]\n            let i = 1\n            while (i <= props.jiku) {\n                tmp[0][0].push([])\n                i += 1\n            }\n        }\n        // --\n        let tmpLoop = [...loopData]\n        tmpLoop.forEach(loop => {\n            if (loop[0][0] === indexArr[0]) {\n                indexArr.push(tmpLoop.indexOf(loop))\n            }\n        })\n        let i = tmpLoop.length\n        while (i--) {\n            if (tmpLoop[i][0][0] === indexArr[0]) {\n                tmpLoop.splice(i, 1)\n            }\n        }\n        setProgramData(tmp)\n        setLoopData(tmpLoop) \n    }\n\n    const trashJiku = (e) => {\n        const indexArr = e.currentTarget.parentNode.parentNode.id.split('-')\n        indexArr.shift()\n        const index = parseFloat(indexArr[0]) - 1\n        let tmp = [...props.programData]\n        if (props.jiku > 1) {\n            for (let dousa_group of tmp) {\n                for (let dousa_row of dousa_group) {\n                    dousa_row.splice(index, 1)\n                }\n            }\n            props.setJiku(props.jiku - 1)\n            let tkTmp = [...props.tkData]\n            if (index > -1) {\n                tkTmp.splice(index, 1)\n            }\n            props.setTkData(tkTmp)\n        } else {\n            tmp = [[[[]]]]\n            props.setLoopData([])\n        }\n        props.setProgramData(tmp)\n    }\n\n    const addRow = (e) => {\n        const indexArr = e.currentTarget.id.split('-')\n        indexArr.shift()\n        let emptyRow = []\n        let i = 0\n        while (i <= props.jiku-1) {\n            emptyRow.push([])\n            i += 1\n        }\n        let tmp = [...props.programData]\n        tmp[parseFloat(indexArr[0])].splice(parseFloat(indexArr[1]), 0, emptyRow)\n        props.setProgramData(tmp) \n    }\n\n    const addJiku = (e) => {\n        if (props.jiku <= 14) {\n            const indexArr = e.currentTarget.id.split('-')\n            indexArr.shift()\n            let tmp = [...props.programData]\n            for (let dousa_group of tmp) {\n                for (let dousa_row of dousa_group) {\n                    dousa_row.splice(parseFloat(indexArr[0])-1, 0, [])\n                }\n            }\n            props.setProgramData(tmp) \n            let tkTmp = [...props.tkData]\n            tkTmp.push({kikou: \"initial\", susumiryou: [1,1], gensoku: [1,1], bunkai: \"1000\", tanniValue:1})\n            props.setTkData(tkTmp) \n            props.setJiku(props.jiku + 1)\n        } else {\n            alert(\"Maximum axis number is 15\")\n        }\n    }\n\n    const moveRow = (e, direction) => {\n        const indexArr = e.currentTarget.parentNode.parentNode.id.split('-')\n        indexArr.shift()\n        let tmp = [...props.programData]\n        const dousaGroup = tmp[parseFloat(indexArr[0])]\n        const rowIndex = parseFloat(indexArr[1])\n        switch (direction) {\n            case \"up\":\n                if (rowIndex >= 1) {\n                    [dousaGroup[rowIndex-1], dousaGroup[rowIndex]] = [dousaGroup[rowIndex], dousaGroup[rowIndex-1]]\n                }\n                break\n            case \"down\":\n                if (rowIndex < dousaGroup.length-1) {\n                    [dousaGroup[rowIndex+1], dousaGroup[rowIndex]] = [dousaGroup[rowIndex], dousaGroup[rowIndex+1]]\n                }\n                break\n            default:\n                break\n        }\n        props.setProgramData(tmp)\n    }\n\n    const moveJiku = (e, direction) => {\n        const indexArr = e.currentTarget.parentNode.id.split('-')\n        indexArr.shift()\n        let current_jiku = parseFloat(indexArr[0])\n        let tmp = [...props.programData]\n        let tkTmp = [...props.tkData]\n        switch (direction) {\n            case \"left\":\n                if (current_jiku !== 1) {\n                    for (let dousa_group of tmp) {\n                        for (let dousa_row of dousa_group) {\n                            let tmp_dousa = [...dousa_row[current_jiku-1]]\n                            dousa_row[current_jiku-1] = [...dousa_row[current_jiku-2]]\n                            dousa_row[current_jiku-2] = tmp_dousa\n                        }\n                    }\n                    let tmp_tk_item = tkTmp[current_jiku-1]\n                    tkTmp[current_jiku-1] = tkTmp[current_jiku-2]\n                    tkTmp[current_jiku-2] = tmp_tk_item\n                } \n                break\n            case \"right\":\n                if (current_jiku !== props.jiku) {\n                    for (let dousa_group of tmp) {\n                        for (let dousa_row of dousa_group) {\n                            let tmp_dousa = [...dousa_row[current_jiku-1]]\n                            dousa_row[current_jiku-1] = [...dousa_row[current_jiku]]\n                            dousa_row[current_jiku] = tmp_dousa\n                        }\n                    }\n                    let tmp_tk_item = tkTmp[current_jiku-1]\n                    tkTmp[current_jiku-1] = tkTmp[current_jiku]\n                    tkTmp[current_jiku] = tmp_tk_item\n                }\n                break\n            default:\n                break\n        }\n        props.setTkData(tkTmp) \n        props.setProgramData(tmp)\n    }\n\n    const showTypeData = (isLoop, parentId, jiku, dousaType, dousaNum) => {\n        if (isLoop) {\n            props.setLoopInputObj([parentId, false])\n            props.setInputBoxType(\"loop\")\n        } else if (!dousaType.includes('出力点') && !dousaType.includes('原点復帰')) {\n            const typeDataObj = [jiku, parentId, dousaType, dousaNum, false]\n            props.setTypeDataObj(typeDataObj)\n            props.setInputBoxType(\"typedata\")\n        }\n    }\n\n    // Drag Functions\n    const emptyBoxDragStart = (e) => {\n        // e.currentTarget.className += \"dousa-box\"\n        // setTimeout(() => (e.currentTarget.className = 'dragged-box'), 0);\n        // e.currentTarget.style.cursor = \"grabbing\"\n    }\n    \n    const emptyBoxDragEnd = (e) => {\n        e.currentTarget.className = \"dousa-box\"\n        e.currentTarget.style.cursor = \"grab\"\n    }\n\n    function emptyBoxDragOver(e) {\n        if (props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\") {\n            e.preventDefault();\n        }\n    }\n\n    function emptyBoxDragEnter(e) {\n        if (props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\") {\n            e.preventDefault();\n            e.target.className += ' pg-empty-hovered';\n        }\n    }\n\n    function emptyBoxDragLeave(e) {\n        e.target.className = 'pg-empty-box';\n    }\n\n    function emptyBoxDragDrop(e) {\n        const indexArr = e.target.id.split('-')\n            indexArr.shift()\n            let tmp = [...props.programData]\n            let audio = new Audio(soundfile2);\n            if (props.currentDraggedCommand !== \"タイマ\" && props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\" && !props.currentDraggedCommand.includes(\"-\")) {\n                tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])] = [props.currentDraggedCommand, dousaNumArr[parseFloat(indexArr[2])]+1, [[\"Enter value\", \"pps\"], [\"Enter value\", \"pps\"], [\"Enter value\", \"pps\"]]]\n                let tmpDousaNumArr = [...dousaNumArr]\n                tmpDousaNumArr[parseFloat(indexArr[2])] += 1\n                setDousaNumArr(tmpDousaNumArr)\n                props.setProgramData(tmp)\n                if (!props.isMute) {\n                    audio.play();\n                }\n            } else if (props.currentDraggedCommand == \"タイマ\") {\n                if (timerNumArr[parseFloat(indexArr[2])] > 14) {\n                    alert(\"タイマは15個までしか設定できません。\")\n                } else {\n                    tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])] = [props.currentDraggedCommand, timerNumArr[parseFloat(indexArr[2])]+1, [[\"Enter value\", \"pps\"], [\"Enter value\", \"pps\"], [\"Enter value\", \"pps\"]]]\n                    let tmpTimerNumArr = [...timerNumArr]\n                    tmpTimerNumArr[parseFloat(indexArr[2])] += 1\n                    setTimerNumArr(tmpTimerNumArr)\n                    props.setProgramData(tmp)\n                    if (!props.isMute) {\n                        audio.play();\n                    }\n                }\n            } else if (props.currentDraggedCommand.includes(\"-\")) {\n                let draggedIndexArr = props.currentDraggedCommand.split(\"-\")\n                draggedIndexArr.shift()\n                tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])] = tmp[parseFloat(draggedIndexArr[0])][parseFloat(draggedIndexArr[1])][parseFloat(draggedIndexArr[2])]\n                tmp[parseFloat(draggedIndexArr[0])][parseFloat(draggedIndexArr[1])][parseFloat(draggedIndexArr[2])] = []\n                props.setProgramData(tmp)\n                if (!props.isMute) {\n                    audio.play();\n                }\n            }\n    }\n    // -------\n    function emptyBoxLoopDragOver(e) {\n        if (props.currentDraggedCommand === \"繰り返し\") {\n            e.preventDefault();\n        }\n    }\n\n    function emptyBoxLoopDragEnter(e) {\n        if (props.currentDraggedCommand === \"繰り返し\") {\n            e.preventDefault();\n            e.target.className += ' pg-l-empty-loop-hovered';\n        }\n    }\n\n    function emptyBoxLoopDragLeave(e) {\n        e.target.className = 'pg-l-empty-loop';\n    }\n\n    function emptyBoxLoopDragDrop(e) {\n        const indexArr = e.target.id.split('-')\n        indexArr.shift()\n        let tmp = [...props.loopData]\n        if (props.currentDraggedCommand === \"繰り返し\") {\n            tmp.push([[indexArr[0], indexArr[1]], [indexArr[0], indexArr[1]], 2])\n            props.setLoopData(tmp)\n            if (!props.isMute) {\n                let audio = new Audio(soundfile2);\n                audio.play();\n            }\n        } \n    }\n\n    const resizeLoop = (e, direction) => {\n        const indexArr = e.currentTarget.parentNode.parentNode.id.split('-')\n        indexArr.shift()\n        let tmp = [...props.loopData]\n        let mainItemIndex\n        tmp.forEach(loop => {\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\n                mainItemIndex = tmp.indexOf(loop)\n            }\n        })\n        let isDirectionAvailable = true\n        switch(direction) {\n            case \"top-up\":\n                tmp.forEach(loop => {\n                    if ((tmp.indexOf(loop) !== mainItemIndex) && (\n                        loop[1][0] === tmp[mainItemIndex][0][0] && \n                        parseFloat(loop[1][1]) === parseFloat(tmp[mainItemIndex][0][1])-1)\n                    ) {\n                        isDirectionAvailable = false\n                    }\n                })\n                if (isDirectionAvailable && parseFloat(tmp[mainItemIndex][0][1]) >= 1) {\n                    tmp[mainItemIndex][0][1] = (parseFloat(tmp[mainItemIndex][0][1]) - 1).toString()\n                }\n                break\n            case \"top-down\":\n                if (tmp[mainItemIndex][0][1] !== tmp[mainItemIndex][1][1]) {\n                    tmp[mainItemIndex][0][1] = (parseFloat(tmp[mainItemIndex][0][1]) + 1).toString()\n                }\n                break\n            case \"bottom-up\":\n                if (tmp[mainItemIndex][0][1] !== tmp[mainItemIndex][1][1]) {\n                    tmp[mainItemIndex][1][1] = (parseFloat(tmp[mainItemIndex][1][1]) - 1).toString()\n                }\n                break\n            case \"bottom-down\":\n                for (let loop of tmp) {\n                    if ((tmp.indexOf(loop) !== mainItemIndex) && (\n                        parseFloat(loop[0][0]) === parseFloat(tmp[mainItemIndex][1][0]) && \n                        parseFloat(loop[0][1]) === parseFloat(tmp[mainItemIndex][1][1])+1)\n                    ) {\n                        isDirectionAvailable = false\n                    }\n                }\n                let rowLength = props.programData[tmp[mainItemIndex][1][0]].length\n                if (isDirectionAvailable && parseFloat(tmp[mainItemIndex][1][1]) < (rowLength - 1)) {\n                    tmp[mainItemIndex][1][1] = (parseFloat(tmp[mainItemIndex][1][1]) + 1).toString()\n                }\n                break\n            default:\n                break \n        }\n        props.setLoopData(tmp)\n    }\n    // -------\n    function addGroupDragOver(e) {\n        if (props.currentDraggedCommand === \"動作グループを追加\") {\n            e.preventDefault();\n        }\n    }\n\n    function addGroupDragEnter(e) {\n        e.currentTarget.style.height = \"30px\"\n        e.currentTarget.querySelector(\".add-row-plus-cont\").style.display = \"flex\"\n    }\n    \n    function addGroupDragLeave(e) {\n        e.currentTarget.style.height = \"0.2rem\"\n    }\n    \n    function addGroupDragDrop(e) {\n        let tmp = [...props.programData]\n        if (tmp.length <= 29) {\n\n            const indexArr = e.currentTarget.id.split('-')\n            indexArr.shift()\n            if (props.currentDraggedCommand === \"動作グループを追加\") {\n                let emptyGroup = [[]]\n                for (let z = 0; z < props.jiku; z++) emptyGroup[0].push([]);\n                tmp.splice((indexArr[0]+1), 0, emptyGroup); \n                props.setProgramData(tmp)\n            } \n            e.currentTarget.style.height = \"0.2rem\"\n        } else {\n            alert(\"Maximum motion group number is 30\")\n        }\n    }\n\n    const dousaBoxRef = useRef()\n\n    const dataToHTML = (programData) => {\n        let pg_l_arr = [<div className=\"pg-l-empty pglemp0\" key={\"first-pg-l-empty-box\"}></div>]\n        let main_grid = []\n        let jiku_i = 1\n        while (jiku_i <= props.jiku) {\n            const jiku_num = jiku_i\n            if (jiku_num === 1) {\n                main_grid.push(\n                <div className=\"jiku-number unselectable\" id={\"jiku-\"+jiku_num.toString()} key={\"jiku\"+jiku_num}>\n                    <div className=\"add-jiku-left\" id={\"addJiku-\"+jiku_num} onClick={(e) => addJiku(e)}>\n                        <div className=\"add-jiku-plus-cont\">\n                            <i className=\"fas fa-plus\"></i>\n                        </div>\n                    </div>\n                    <div className=\"add-jiku-right\" id={\"addJiku-\"+(jiku_num+1)} onClick={(e) => addJiku(e)}>\n                        <div className=\"add-jiku-plus-cont\">\n                            <i className=\"fas fa-plus\"></i>\n                        </div>\n                    </div>\n                    <i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i>\n                    <p>\n                        Axis #{jiku_num}<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i>\n                    </p>\n                    <i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i>\n                </div>)\n            } else if (jiku_num === 15) {\n                main_grid.push(<div className=\"jiku-number unselectable\" id={\"jiku-\"+jiku_num.toString()} key={\"jiku\"+jiku_num}><i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i><p>Axis #{jiku_num}<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i></p><i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i></div>)\n            } else {\n                main_grid.push(<div className=\"jiku-number unselectable\" id={\"jiku-\"+jiku_num.toString()} key={\"jiku\"+jiku_num}><div className=\"add-jiku-right\" id={\"addJiku-\"+(jiku_num+1)} onClick={(e) => addJiku(e)}><div className=\"add-jiku-plus-cont\"><i className=\"fas fa-plus\"></i></div></div><i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i><p>Axis #{jiku_num}<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i></p><i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i></div>)\n            }\n            jiku_i += 1\n        }\n        main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-0firrrst\"}></div>)\n        main_grid.push(<div className=\"grid-line\" style={{gridColumn:\"1/\"+(props.jiku+1)}} key={\"first-grid-line-key\"}></div>)\n        main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-ggggllllliiinnneeee\"}></div>)\n        let dousa_group_i = 0\n        for (let dousa_group of programData) {\n            pg_l_arr.push(<div className=\"pg-l-empty pglempgroup\" key={\"pglempty\"+dousa_group_i}></div>)\n            main_grid.push(<div className=\"dousa-group-kaishi unselectable\" style={{gridColumn:\"1/\"+(props.jiku+1)}} key={\"dousagroup-\"+dousa_group_i} id={\"dousaGroup-\"+dousa_group_i}><p>Execution #{dousa_group_i+1}</p></div>)\n            main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-\"+dousa_group_i}></div>)\n            let dontPutEmp = []\n            let dousa_row_i = 0\n            for (let dousa_row of dousa_group) {\n                let loopCount\n                props.loopData.forEach(loop => {\n                    if (loop[0][0] === dousa_group_i.toString() && loop[0][1] === dousa_row_i.toString()) {\n                        loopCount = loop[2]\n                        let loopHeight = loop[1][1] - loop[0][1] + 1\n                        let loopStyleHeight = loopHeight * 2.3 + ((loopHeight-1) * (0.2 + 0.4))\n                        for (let z = 0; z < loopHeight; z++) dontPutEmp.push(\"loop\");\n                        let dragArrows = [<div className=\"loop-drag-top\" key={\"loopdragtop\"}><div onClick={(e) => resizeLoop(e, \"top-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div><div onClick={(e) => resizeLoop(e, \"top-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>,<div className=\"loop-drag-bottom\" key={\"loop-drag-bottom\"}><div onClick={(e) => resizeLoop(e, \"bottom-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div><div onClick={(e) => resizeLoop(e, \"bottom-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>]\n                        if (loop[0][1] === loop[1][1]) {\n                            dragArrows = [<div className=\"loop-drag-top\" key={\"loopdragtop\"}><div onClick={(e) => resizeLoop(e, \"top-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div></div>,<div className=\"loop-drag-bottom\" key={\"loop-drag-bottom\"}><div onClick={(e) => resizeLoop(e, \"bottom-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>]\n                        }\n                        const loopId = \"loop-\"+dousa_group_i+\"-\"+dousa_row_i\n                        pg_l_arr.push(\n                        <div className=\"pg-l-loop unselectable\" style={{height:loopStyleHeight+\"rem\"}} id={loopId} key={\"pglloop\"+dousa_row}>\n                            {dragArrows.map(dragArrow => {return dragArrow})}\n                            <p className=\"loop-title\" onClick={() => showTypeData(true, loopId)}>Loop x {loopCount}</p>\n                            <i className=\"fas fa-trash trash-block\" onClick={(e) => trashLoop(e, props.loopData, props.setLoopData)}></i>\n                        </div>)\n                    }\n                })\n                if (dontPutEmp.length === 0) {\n                    pg_l_arr.push(<div className=\"pg-l-empty-loop\" id={\"emptyloop-\"+dousa_group_i+\"-\"+dousa_row_i} onDragOver={(e) => emptyBoxLoopDragOver(e)} onDragEnter={(e) => emptyBoxLoopDragEnter(e)} onDragLeave={(e) => emptyBoxLoopDragLeave(e)} onDrop={(e) => emptyBoxLoopDragDrop(e)} key={\"pglemploop-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\n                } else {\n                    dontPutEmp.shift()\n                }\n                if (dousa_row_i === 0) {\n                    main_grid.push(<div ref={addRowRef} key={\"addrow0\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-0\"} onClick={(e) => addRow(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1)}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\n                }\n                let dousa_i = 0\n                for (let dousa of dousa_row) {\n                    if (dousa.length !== 0) {\n                        let noValueArr = []\n                        dousa[2].forEach(value => {if (value.includes(\"Enter value here\")) noValueArr.push(\"nope\")})\n                        const dousaId = \"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i\n                        const jikuOfDousa = dousa_i\n                        let dousaName = \"\"\n                        switch (dousa[0]) {\n                            case \"位置決め\":\n                                dousaName = \"PTP\"\n                                break\n                            case \"押付け\":\n                                dousaName = \"Push\"\n                                break\n                            case \"タイマ\":\n                                dousaName = \"Timer\"\n                                break\n                            case \"位置決め+\":\n                                dousaName = \"PTP+\"\n                                break\n                            case \"押付け+\":\n                                dousaName = \"Push+\"\n                                break\n                            case \"入力点からの実行\":\n                                dousaName = \"Exec.\"\n                                break\n                            case \"出力点1へ出力\":\n                                dousaName = \"Turn on OUT1\"    \n                                break\n                            case \"出力点2へ出力\":\n                                dousaName = \"Turn on OUT2\"    \n                                break\n                            case \"出力点3へ出力\":\n                                dousaName = \"Turn on OUT3\"    \n                                break\n                            case \"出力点を全てOFF\":\n                                dousaName = \"Turn off all outputs\"    \n                                break\n                            case \"原点復帰\":\n                                dousaName = \"Origin Detection\"\n                                break    \n                            default:\n                                dousaName = \"PTP\"\n                                break\n                        }\n                        if (noValueArr.length > 0 && (!dousa[0].includes(\"出力点\")) && (!dousa[0].includes(\"原点復帰\"))) {\n                            main_grid.push(<div ref={dousaBoxRef} className=\"dousa-box unselectable\" draggable=\"true\" onDragStart={(e) => emptyBoxDragStart(e)} onDragEnd={(e) => emptyBoxDragEnd(e)} onMouseEnter={(e) => props.setCurrentDraggedCommand(e.currentTarget.id)} key={dousa_group_i+\"dousabox\"+dousa_row_i+\"-\"+dousa_i} id={dousaId}><div className='no-value-circle'></div><p className='dousa-title' onClick={() => showTypeData(false, dousaId, jikuOfDousa, dousa[0], dousa[1])} >{dousaName}<span style={{marginRight:'0.2rem'}}></span>#{dousa[1]}</p><i className=\"fas fa-trash\" onClick={(e) => trashInput(e, props.programData, props.setProgramData)}></i></div>)\n                        } else {\n                            main_grid.push(<div ref={dousaBoxRef} className=\"dousa-box unselectable\" draggable=\"true\" onDragStart={(e) => emptyBoxDragStart(e)} onDragEnd={(e) => emptyBoxDragEnd(e)} onMouseEnter={(e) => props.setCurrentDraggedCommand(e.currentTarget.id)} key={dousa_group_i+\"dousabox\"+dousa_row_i+\"-\"+dousa_i} id={dousaId}><p className='dousa-title' onClick={() => showTypeData(false, dousaId, jikuOfDousa, dousa[0], dousa[1])} >{dousaName}<span style={{marginRight:'0.2rem'}}></span>{((dousa[0].includes(\"出力点\")) || (dousa[0].includes(\"原点復帰\")))? \"\" : \"#\"+dousa[1]}</p><i className=\"fas fa-trash\" onClick={(e) => trashInput(e, props.programData, props.setProgramData)}></i></div>)\n                        }\n                    } else {\n                        // main_grid.push(<div className=\"dousa-box\"></div>)\n                        main_grid.push(<div ref={pgEmptyBox} key={dousa_group_i+\"emptybox\"+dousa_row_i+\"-\"+dousa_i} onDragOver={(e) => emptyBoxDragOver(e)} onDragEnter={(e) => emptyBoxDragEnter(e)} onDragLeave={(e) => emptyBoxDragLeave(e)} onDrop={(e) => emptyBoxDragDrop(e)} className=\"pg-empty-box\" id={\"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i}></div>)\n                    } \n                    dousa_i += 1\n                }\n                main_grid.push(\n                    <div className=\"trash-row-right-box\" key={\"trashR-\"+dousa_group_i+\"-\"+dousa_row_i} id={\"trashRow-\"+dousa_group_i+\"-\"+(dousa_row_i)}>\n                        <i onClick={(e) => trashRow(e, props.programData, props.setProgramData, props.loopData, props.setLoopData)} className=\"fas fa-trash\"></i>\n                        <div className='move-row-cont'><i className='fas fa-arrow-alt-circle-up move-row-up' onClick={(e) => moveRow(e, \"up\")}></i><i className='fas fa-arrow-alt-circle-down move-row-down' onClick={(e) => moveRow(e, \"down\")}></i></div>\n                    </div>)\n                if (dousa_row_i !== (dousa_group.length-1)) {\n                    main_grid.push(<div ref={addRowRef} key={\"addrow\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-\"+(dousa_row_i+1)} onClick={(e) => addRow(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1)}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRboxaddR-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\n                } else {\n                    main_grid.push(<div ref={addRowRef} key={\"addrow\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-\"+(dousa_row_i+1)} onClick={(e) => addRow(e)} onDragOver={(e) => addGroupDragOver(e)} onDragEnter={(e) => addGroupDragEnter(e)} onDragLeave={(e) => addGroupDragLeave(e)} onDrop={(e) => addGroupDragDrop(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1),height:\"0.4rem\"}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRboxaddR-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\n                }\n                dousa_row_i += 1\n            }\n            dousa_group_i += 1\n        }\n\n        return (\n            <div className=\"program-grid\">\n                <div className=\"pg-left\">{pg_l_arr}</div>\n                <div className=\"program-main-grid\" style={{gridTemplateColumns:\"repeat(\"+props.jiku+\", 3fr) 1fr\"}}>{main_grid}</div>\n            </div>\n        )\n    }\n\n    // initially have 動作グループ1\n    return(\n        <div className=\"program-block\">\n            {dataToHTML(props.programData)}\n            <div className=\"enter-button\">\n                {/* <Button variant=\"contained\" onClick={() => jikkou(props.popupRef)}>Write to Motor</Button> */}\n                {/* <div style={{height:10,width:30}}></div> */}\n                {/* <Button variant=\"contained\" onClick={() => stop()}>Stop</Button>\n                <div style={{height:10,width:30}}></div> */}\n                <Button color=\"primary\" variant=\"contained\" onClick={() => props.setCmlOutput(toCML(props.programData, props.loopData, props.isNyuryokuShingou, props.tkData, props.settings))}>Convert to CML</Button>\n            </div>\n        </div>\n    )\n}\n\nexport const TypeDataInDousaEng = (props) => {\n    // let dousaType = props.dousaType\n    // let dousaNum = props.dousaNum\n    // let parentId = props.parentId\n    const popupRef = useRef()\n    const tkData = props.tkData\n    // --\n    let indexArr = props.parentId.split('-')\n    indexArr.shift()\n    const jikuNum = parseFloat(indexArr[2])\n    // -\n    let tmp = [...props.programData]\n    // --\n    const closeTypeData = () => {\n        props.setInputBoxType(\"none\")\n    }\n\n    let subTanni = \"initial\"\n    if (tkData[jikuNum].kikou !== \"initial\") {\n        if (tkData[jikuNum].kikou === \"インデックステーブル\") {\n            subTanni = \"°\"\n        } else {\n            subTanni = \"mm\"\n        }\n    }\n\n    const ichigimeData = {\n        bangouRange: 250,\n        inputForm: subTanni===\"initial\" ? [\n            [\"Speed Data\", [\"100pps\"], \"\"],\n            [\"Accel. Data\", [\"kpps\\u00b2\"], \"\"],\n            [\"Position Data\", [\"Pulse\"], \"\"],\n        ] : [\n            [\"Speed Data\", [subTanni+\"/s\", \"100pps\"], \"\"],\n            [\"Accel. Data\", [subTanni+\"/s\\u00b2\", \"kpps\\u00b2\"], \"\"],\n            [\"Position Data\", [subTanni, \"Pulse\"], \"\"],\n        ]\n    }\n    const incrementalIchigimeData = {\n        bangouRange: 250,\n        inputForm: subTanni===\"initial\" ? [\n            [\"Speed Data\", [\"100pps\"], \"\"],\n            [\"Accel. Data\", [\"kpps\\u00b2\"], \"\"],\n            [\"Position Data\", [\"Pulse\"], \"\"],\n        ] : [\n            [\"Speed Data\", [subTanni+\"/s\", \"100pps\"], \"\"],\n            [\"Accel. Data\", [subTanni+\"/s\\u00b2\", \"kpps\\u00b2\"], \"\"],\n            [\"Position Data\", [subTanni, \"Pulse\"], \"\"],\n        ]\n    }\n    const oshitukeData = {\n        bangouRange: 250,\n        inputForm: subTanni===\"initial\" ? [\n            [\"Speed Data\", [\"100pps\"], \"\"],\n            [\"Accel. Data\", [\"kpps\\u00b2\"], \"\"],\n            [\"Position Data\", [\"Pulse\"], \"\"],\n        ] : [\n            [\"Speed Data\", [subTanni+\"/s\", \"100pps\"], \"\"],\n            [\"Accel. Data\", [subTanni+\"/s\\u00b2\", \"kpps\\u00b2\"], \"\"],\n            [\"Position Data\", [subTanni, \"Pulse\"], \"\"],\n        ]\n    }\n    const incrementalOshitukeData = {\n        bangouRange: 250,\n        inputForm: subTanni===\"initial\" ? [\n            [\"Speed Data\", [\"100pps\"], \"\"],\n            [\"Accel. Data\", [\"kpps\\u00b2\"], \"\"],\n            [\"Position Data\", [\"Pulse\"], \"\"],\n        ] : [\n            [\"Speed Data\", [subTanni+\"/s\", \"100pps\"], \"\"],\n            [\"Accel. Data\", [subTanni+\"/s\\u00b2\", \"kpps\\u00b2\"], \"\"],\n            [\"Position Data\", [subTanni, \"Pulse\"], \"\"],\n        ]\n    }\n    const timerData = {\n        bangouRange: 5,\n        inputForm: [\n            [\"Timer Data\", [\"msec\"], \"\"],\n        ]\n    }\n\n    const nyuryokutenData = {\n        bangouRange: 4,\n    }\n\n    let dataFormat\n    switch(props.dousaType) {\n        case \"位置決め\":\n            dataFormat = ichigimeData\n            break\n        case \"押付け\":\n            dataFormat = oshitukeData\n            break\n        case \"タイマ\":\n            dataFormat = timerData\n            break\n        case \"位置決め+\":\n            dataFormat = incrementalIchigimeData\n            break\n        case \"押付け+\":\n            dataFormat = incrementalOshitukeData\n            break\n        case \"入力点からの実行\":\n            dataFormat = nyuryokutenData\n            break\n        default:\n            dataFormat = ichigimeData\n    }\n\n    const DousaInputBox = (props) => {\n        // props: dataFormat, numdropdown params\n        const dataFormat = props.dataFormat\n\n        const setTypeData = () => {\n            let isAllNumber = []\n            popupRef.current.querySelectorAll('.type-data-input').forEach(input => {\n                if (isNaN(parseFloat(input.value))) {\n                    isAllNumber.push(\"NAN\")\n                }\n            })\n            if (isAllNumber.length === 0) {\n                let tmp = [...props.programData]\n                let valueArr = []\n                let inputs = popupRef.current.querySelectorAll(\".type-data-input\")\n                let tanniSelectors = popupRef.current.querySelectorAll(\".select-tanni\")\n                let i = 0\n                while (i < inputs.length) {\n                    valueArr.push([inputs[i].value, tanniSelectors[i].value])\n                    i++\n                }\n                for (let dousa_group of tmp) {\n                    for (let dousa_row of dousa_group) {\n                        let dousa = dousa_row[props.jiku]\n                        if (dousa.length > 0) {\n                            // I don't get this code\n                            // if (props.dousaType !== (\"位置決め\"&&\"押付け\")) {\n                            // if (props.dousaType !== (\"位置決め\"||\"押付け\")) {\n                            //     if (dousa[1] === props.dousaNum && dousa[0] === props.dousaType) {\n                            //         dousa[2] = valueArr\n                            //     }\n                            // } else {\n                            //     if (dousa[1] === props.dousaNum) {\n                            //         dousa[2] = valueArr\n                            //     }\n                            // }\n                            if (dousa[1] === props.dousaNum && dousa[0] === props.dousaType) {\n                                dousa[2] = valueArr\n                            }\n                        }\n                    }\n                }\n                tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][2] = valueArr\n                props.setProgramData(tmp)\n                // --\n                closeTypeData()\n            } else {\n                isAllNumber = []\n                alert('Enter value here') \n            }\n        } \n    \n        return (\n            <div className=\"typeDataInDousa\" ref={popupRef}>\n                <div className=\"close-typedata\"><i onClick={() => closeTypeData()} className=\"fas fa-times-circle type-times-circle\"></i></div>\n                <div className='typedata-input-line' key={\"input-num-line\"}>\n                    <p className='typedata-var'>#</p>\n                    {\n                        props.dousaType === \"入力点からの実行\" ? \n                            <NumDropDown range={dataFormat.bangouRange} jiku={props.jiku} dousaType={props.dousaType} dousaNum={props.dousaNum} popupRef={props.popupRef} programData={props.programData} setProgramData={props.setProgramData} indexArr={props.indexArr}/>\n                            : <div className='current-num-container'><p className='current-num'>{ [...props.programData][parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][1] }</p></div>\n                    }\n                </div>\n                {\n                    props.dousaType === \"入力点からの実行\" ? <></>\n                    : dataFormat.inputForm.map(inputLine => {\n                        return (\n                            <div className=\"typedata-input-line\" key={inputLine[0]}>\n                                <p className=\"typedata-var\">{inputLine[0]}</p>\n                                <DataInput index={dataFormat.inputForm.indexOf(inputLine)} tanniArr={inputLine[1]} />\n                                <p>{inputLine[2]}</p>\n                            </div>\n                        )\n                    }) \n                }\n                <Button className=\"type-data-button\" variant=\"contained\" onClick={() => setTypeData()}>OK</Button>\n            </div>\n        )\n    }\n\n    const DataInput = (props) => {\n        // const data = [100, \"pps\"]\n        const index = props.index\n        const tanniArr = props.tanniArr\n        const [value, setValue] = useState(tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][2][index][0])\n        const [tanniState, setTanniState] = useState(tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][2][index][1])\n        // ---\n\n        return (\n            <>\n                {value.toString().includes('Enter value here') ? \n                    <input className=\"type-data-input\" required placeholder={value} onChange={(e) => setValue(e.target.value)} />\n                    // : <input className=\"type-data-input\" required value={value} onChange={(e) => setValue(e.target.value)} />\n                    : <input className=\"type-data-input\" required defaultValue={value} onChange={(e) => setValue(e.target.value)} />\n                }\n                <div className=\"type-data-tanni\">\n                    <select className='select-tanni' value={tanniState} onChange={(e) => setTanniState(e.target.value)} >\n                        { tanniArr.map(tanni => {\n                            return <option key={tanni} value={tanni}>{tanni}</option>\n                        }) }\n                    </select>\n                </div>\n            </>\n        )\n    }\n\n    return (<DousaInputBox dataFormat={dataFormat} jiku={props.jiku} dousaType={props.dousaType} dousaNum={props.dousaNum} popupRef={popupRef} programData={props.programData} setProgramData={props.setProgramData} indexArr={indexArr}/>)\n}\n\nexport const LoopInputBoxEng = (props) => {\n    // props: parentId, loopData, setLoopData\n    const popupRef = useRef()\n    let indexArr = props.parentId.split('-')\n    indexArr.shift()\n    const loopGroupIndex = indexArr[0]\n    const loopRowIndex = indexArr[1]\n    // --\n    let tmp = [...props.loopData]\n    let currentLoopIndexInList = 0;\n    for (let i=0; i<tmp.length; i++) {\n        let loopItem = tmp[i];\n        if (loopItem[0][0] == loopGroupIndex && loopItem[0][1] == loopRowIndex) {\n            currentLoopIndexInList = i;\n        }\n    } \n    const [value, setValue] = useState(tmp[currentLoopIndexInList][2])\n    // --\n    const closeTypeData = () => {\n        props.setInputBoxType(\"none\")\n    }\n\n    const setTypeData = () => {\n        let isAllNumber = []\n        if (isNaN(popupRef.current.querySelector('.type-data-input').value)) {\n                isAllNumber.push(\"NAN\")\n        }\n        if (isAllNumber.length === 0) {\n            let tmp = [...props.loopData]\n            let value = popupRef.current.querySelector(\".type-data-input\").value\n            tmp[currentLoopIndexInList][2] = value\n            props.setLoopData(tmp)\n            // --\n            closeTypeData()\n        } else {\n            isAllNumber = []\n            alert('Enter value here') \n        }\n    } \n\n    return (\n        <div className=\"typeDataInDousa\" ref={popupRef}>\n            <div className=\"close-typedata\"><i onClick={() => closeTypeData()} className=\"fas fa-times-circle type-times-circle\"></i></div>\n            <div className=\"typedata-input-line\">\n                <p>Loop</p>\n                <input className=\"type-data-input\" required value={value} onChange={(e) => setValue(e.target.value)} />\n                <p>times</p>\n            </div>\n            <Button className=\"type-data-button\" variant=\"contained\" onClick={() => setTypeData()}>OK</Button>\n        </div>\n    )\n}\n\nconst NumDropDown = (props) => {\n    // props: programData, setProgramData, dataType, dataNum, popupRef, jiku, indexArr, range\n    const popupRef = props.popupRef\n    const indexArr = props.indexArr\n    let tmp = [...props.programData]\n    const [currentNum, setCurrentNum] = useState(tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][1])\n    const numItemRef = useRef()\n    const currentNumRef = useRef()\n    \n    const selectItem = (e) => {\n        const value = parseFloat(e.currentTarget.id.split(\"-\")[2])\n        setCurrentNum(value)\n        numItemRef.current.style.display = \"none\"\n        let sameDataArr = []\n        for (let dousa_group of tmp) {\n            for (let dousa_row of dousa_group) {\n                let dousa = dousa_row[props.jiku]\n                if (dousa[1] === value && dousa[0] === props.dousaType) {\n                    sameDataArr.push(dousa[2])\n                }\n            }\n        }\n        if (sameDataArr.length > 0) {\n            tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][2] = sameDataArr[0]\n            let inputs = popupRef.current.querySelectorAll(\".type-data-input\")\n            let tanniSelectors = popupRef.current.querySelectorAll(\".select-tanni\")\n            let i = 0\n            while (i < inputs.length) {\n                inputs[i].value = sameDataArr[0][i][0]\n                tanniSelectors[i].value = sameDataArr[0][i][1]\n                i++\n            }\n        }\n        tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][1] = value\n        props.setProgramData(tmp)\n    }\n    const getNumItems = () => {\n        let res = []\n        let i = 1\n        while (i <= props.range) {\n            res.push(<div className='num-dropdown-item' key={i} id={\"num-dropdown-\"+i} onClick={(e) => selectItem(e)}><p>{i}</p></div>)\n            i += 1\n        }\n        return res\n    }\n    const showItems = () => {\n        let isItemsShown = numItemRef.current.style.display !== \"block\" ? false : true\n        if (!isItemsShown) {\n            numItemRef.current.style.display = \"block\"\n        } else {\n            numItemRef.current.style.display = \"none\"\n        }\n    }\n    return (\n        <div className='num-dropdown'>\n            <div className='currentNum-container' onClick={() => showItems()}><p ref={currentNumRef} className='currentNum'>{currentNum}</p><i className='fas fa-caret-down'></i></div>\n            <div ref={numItemRef} className='num-dropdown-item-container'>{getNumItems()}</div>\n        </div>\n    )\n}","import { useEffect, useState } from \"react\"\n\nconst PREFIX = 'CML-app-'\n\nexport default function useLocalStorage(key, initialValue) {\n    const prefixedKey = PREFIX + key\n\n    const [value, setValue] = useState(() => {\n        const jsonValue = localStorage.getItem(prefixedKey)\n        if (jsonValue != null) return JSON.parse(jsonValue)\n        \n        if (typeof initialValue === 'function') {\n            return initialValue()\n        } else {\n            return initialValue\n        }\n    })\n\n    useEffect(() => {\n        localStorage.setItem(prefixedKey, JSON.stringify(value))\n    }, [prefixedKey, value])\n\n    return [value, setValue] \n}","import { useRef } from \"react\"\n\nexport const SettingInfo = ({ text }) => {\n\n    const textBoxRef = useRef()\n\n    const display = () => {\n        textBoxRef.current.classList.add(\"shown\")\n        textBoxRef.current.classList.remove(\"hidden\")\n        setTimeout(() => {\n            if (!textBoxRef.current.classList.contains(\"hidden\")) {\n                textBoxRef.current.style.display = \"block\"\n            }\n        }, 300)\n    }\n\n    const hide = () => {\n        textBoxRef.current.classList.remove('shown')\n        textBoxRef.current.classList.add('hidden')\n        textBoxRef.current.style.display = \"none\"\n    }\n\n    return (\n        <div className=\"settings-panel-item-info-container\" onMouseEnter={() => display()} onMouseLeave={() => hide()}>\n            <i className=\"fa-solid fa-circle-question settings-panel-item-info\"></i>\n            <div ref={textBoxRef} className='settings-panel-item-info-box'>\n                <p>{ text }</p>\n            </div>\n        </div>\n    )\n}","import { useState } from \"react\"\nimport { useRef } from \"react\"\n\nexport const SettingsDefaultInfo = ({ info }) => {\n\n    const textBoxRef = useRef()\n    const [isShown, setIsShown] = useState(false);\n\n    const display = () => {\n        setIsShown(true)\n        // textBoxRef.current.classList.add(\"shown\")\n        // textBoxRef.current.classList.remove(\"hidden\")\n        // textBoxRef.current.style.display = \"block\"\n    }\n\n    const hide = () => {\n        setIsShown(false)\n        // textBoxRef.current.classList.remove('shown')\n        // textBoxRef.current.classList.add('hidden')\n        // textBoxRef.current.style.display = \"none\"\n    }\n\n    const defaultValues = {\n        'kNum5': 5, 'kNum11': 0, 'kNum12': 30, 'kNum13': 200, 'kNum14': 0, 'kNum22': 0,\n        'kNum23': 10, 'kNum24': 10, 'kNum25': 1, 'kNum26': 0, 'kNum28': 30\n    }\n\n    const displayInfo = () => {\n        let infoList = []\n        for (let item of info[\"kyoutuu\"]) {\n            if (item[\"inputType\"] === \"text\") {\n                infoList.push(<p key={item[\"kNum\"]}>{item[\"kNum\"]}: {item[\"label\"]}: {defaultValues[\"kNum\"+item[\"kNum\"]]}</p>)\n            } else {\n                infoList.push(<p key={item[\"kNum\"]}>{item[\"kNum\"]}: {item[\"label\"]}: {item[\"inputs\"][defaultValues[\"kNum\"+item[\"kNum\"]]]}</p>)\n            }\n        }\n        for (let item of info[\"oshituke\"]) {\n            if (item[\"inputType\"] === \"text\") {\n                infoList.push(<p key={item[\"kNum\"]}>{item[\"kNum\"]}: {item[\"label\"]}: {defaultValues[\"kNum\"+item[\"kNum\"]]}</p>)\n            } else {\n                infoList.push(<p key={item[\"kNum\"]}>{item[\"kNum\"]}: {item[\"label\"]}: {item[\"inputs\"][defaultValues[\"kNum\"+item[\"kNum\"]]]}</p>)\n            }\n        }\n        for (let item of info[\"genten\"]) {\n            if (item[\"inputType\"] === \"text\") {\n                infoList.push(<p key={item[\"kNum\"]}>{item[\"kNum\"]}: {item[\"label\"]}: {defaultValues[\"kNum\"+item[\"kNum\"]]}</p>)\n            } else {\n                infoList.push(<p key={item[\"kNum\"]}>{item[\"kNum\"]}: {item[\"label\"]}: {item[\"inputs\"][defaultValues[\"kNum\"+item[\"kNum\"]]]}</p>)\n            }\n        }\n        return infoList\n    }\n\n    const constantValues = [\n        [2, \"100\"], [3, \"サーボオン\"], [4, \"CW 方向を正座標\"], [7, \"無効\"], [27, \"100\"], [30, \"無効\"], [43, \"0000\"], [44, \"汎用入力\"], \n        [45, \"汎用入力\"], [46, \"汎用入力\"], [47, \"汎用入力\"], [53, \"111\"], [55, \"汎用出力\"], [56, \"汎用出力\"], [57, \"汎用出力\"], [65, \"有効\"], \n        [71, \"38.4\"], [74, \"38.4\"], [81, \"1\"], [82, \"1\"]\n    ]\n    const constantNumNames = {\n        2:\"速度単位\",3:\"電源 ON 時のサーボ状態\",4:\"座標方向\",7:\"ソフトリミット設定\",27:\"原点オフセット距離単位\",\n        30:\"原点検出完了確認\",43:\"入力論理\",44:\"入力 1 機能選択\",45:\"入力 2 機能選択\",46:\"入力 3 機能選択\",\n        47:\"入力 4 機能選択\",53:\"出力論理\",55:\"出力 1 機能選択\",56:\"出力 2 機能選択\",57:\"出力 3 機能選択\",\n        65:\"ステータス LED\",71:\"通信ボーレート\",74:\"スレーブ間通信ボーレート\",\n        81:\"電源 ON 時に実行されるロジックバンク No\", 82:\"ロジックバンクの実行周期\"\n    }\n\n    const displayConstants = () => {\n        let infoList = []\n        for (let item of constantValues) {\n            infoList.push(<p key={item[0]}>{item[0]}: {constantNumNames[item[0]]}: {item[1]}</p>)\n        }\n        return infoList\n    }\n\n    return (\n        <div className=\"settings-panel-default-info-container\">\n            <i id=\"openDefaultValues\" onClick={() => display()} className=\"fa-solid fa-circle-question settings-panel-item-info\"></i>\n            <div ref={textBoxRef} style={{display: isShown?\"block\":\"none\"}} className='settings-panel-default-info-box'>\n                <div id=\"closeKNumDefaultInfo\" className=\"close-default\" onClick={() => hide()}><i className=\"fas fa-times\"></i></div>\n                <div>k値: 名前: デフォルト値</div>\n                <div style={{marginTop: \"10px\"}}></div>\n                <div>{ displayInfo() }</div>\n                <div style={{marginTop: \"30px\"}}></div>\n                <div style={{opacity:\"0.8\"}}>{displayConstants()}</div>\n            </div>\n        </div>\n    )\n}","import { Button } from '@mui/material'\nimport { useState, useRef, useEffect } from 'react'\nimport { SettingInfo } from './settingInfo'\nimport { SettingsDefaultInfo } from './settingsDefaultInfo'\nimport './settingsPanel.css'\n\n\nexport const SettingsPanel = ({ closePanel, settings, setSettings }) => {\n\n    const settingsPanelData = {\n        \"kyoutuu\": [\n            {\"kNum\":5, \"name\":\"inposition\", \"tanni\": \"Pulse\", \"label\":\"In-position Range\", \"inputType\":\"text\", \"infoText\":'Set the range for In-position.'},\n        ],\n        \"oshituke\": [\n            {\"kNum\":11, \"name\":\"oshitukeDousaMode\", \"tanni\": \"\", \"label\":\"Push Motion Operation Mode\", \"inputType\":\"dropdown\", \"inputs\":[\"Continuous(One direction)\",\"Set time(One direction)\",\"Continuous(Both direction)\",\"Set time(Both direction)\",], \"infoText\":<>Set the direction and time for Push Motion<br/>():Direction to limit torque.<br/>One direction:Torque is limited only in operation direction.<br/>Both direction:Torque is limited in both directions</>},\n            {\"kNum\":12, \"name\":\"oshitukeDousaTorque\", \"tanni\": \"%\", \"label\":\"Push Motion Torque\", \"inputType\":\"text\", \"infoText\":<>Set the torque during pressing operation by command Q or Z in % of the rated torque.</>},\n            {\"kNum\":13, \"name\":\"oshitukeDousaTime\", \"tanni\": \"msec\", \"label\":\"Push Motion Holding Time\", \"inputType\":\"text\", \"infoText\":'Set Push Motion Holding Time (Ref: 8.6.2)'},\n        ],\n        \"genten\": [\n            {\"kNum\":22, \"name\":\"gentenShingou\", \"tanni\": \"\", \"label\":\"Origin Signal Source\", \"inputType\":\"dropdown\", \"inputs\":[\"Stopper Detection\",\"Stopper Detection (Auto)\",\"Origin Sensor\",\"Origin Sensor(Auto)\"], \"infoText\":<>Set the origin detection signal source and detection method. The origin sensor can be assigned only to input point 1.<br/>(Auto): Automatic origin detection operation starts when the power is turned on.<br/>Ref: 11.1</>},\n            {\"kNum\":23, \"name\":\"gentenSpeed\", \"tanni\": \"100pps\", \"label\":\"Origin Detection Speed\", \"inputType\":\"text\", \"infoText\":'Set the speed for Origin Detection'},\n            {\"kNum\":24, \"name\":\"gentenAccel\", \"tanni\": \"kpps2\", \"label\":\"Origin Detection Acceleration\", \"inputType\":\"text\", \"infoText\":'Set the acceleration for Origin Detection'},\n            {\"kNum\":25, \"name\":\"gentenDirection\", \"tanni\": \"\", \"label\":\"Origin Detection Direction\", \"inputType\":\"dropdown\", \"inputs\":[\"CW\",\"CCW\"], \"infoText\":'Set the direction for Origin Detection'},\n            {\"kNum\":26, \"name\":\"gentenOffset\", \"tanni\": \"100Pulse\", \"label\":\"Origin Offset Distance\", \"inputType\":\"text\", \"infoText\":<>Set offset amount from detected origin to coordinate origin</>},\n            {\"kNum\":28, \"name\":\"gentenTorque\", \"tanni\": \"%\", \"label\":\"Stopper Detection Torque\", \"inputType\":\"text\", \"infoText\":<>Set the torque to detect a stopper for Origin Detection by percentage to rated torque<br/>Ref: 11.1.1</>},\n        ],\n    }\n\n    const [settingsObj, setSettingsObj] = useState(settings)\n    useEffect(() => {\n        console.log(settingsObj)\n    }, [settingsObj])\n\n    const SettingsPanelItem = ({ data }) => {\n\n        const [inputValue, setInputValue] = useState(settingsObj[\"kNum\" + data[\"kNum\"].toString()])\n\n        const setTextInputValue = (value) => {\n            setInputValue(value)\n            let tmp = settingsObj\n            tmp[\"kNum\" + data[\"kNum\"].toString()] = value\n            setSettingsObj(tmp)\n        }\n\n        const setDropdownValue = (inputValue) => {\n            const inputIndex = data[\"inputs\"].indexOf(inputValue)\n            setInputValue(inputIndex)\n            let tmp = settingsObj\n            tmp[\"kNum\" + data[\"kNum\"].toString()] = inputIndex\n            setSettingsObj(tmp)\n        }\n\n        switch (data[\"inputType\"]) {\n            case \"text\":\n                return (\n                    <div className='settings-panel-item'>\n                        <div className='settings-panel-item-label-container'>\n                            <p className='settings-panel-item-label'>{ data[\"label\"] }</p>\n                            <SettingInfo text={ data[\"infoText\"] } />\n                        </div>\n                        <input className='settings-panel-item-input' placeholder={settings[\"kNum\" + data[\"kNum\"].toString()]} onChange={(e) => setTextInputValue(e.target.value)}/>\n                        <p className='settings-panel-item-tanni'>{data[\"tanni\"]}</p>\n                    </div>\n                )\n            case \"dropdown\":\n                return (\n                    <div className='settings-panel-item'>\n                        <div className='settings-panel-item-label-container'>\n                            <p className='settings-panel-item-label'>{ data[\"label\"] }</p>\n                            <SettingInfo text={ data[\"infoText\"] } />\n                        </div>\n                        <div className='settings-panel-item-input'>\n                            <Dropdown setItem={setDropdownValue} defaultItem={data[\"inputs\"][settings[\"kNum\" + data[\"kNum\"].toString()]]} itemArr={data[\"inputs\"]} />\n                        </div>\n                        <p className='settings-panel-item-tanni'>{data[\"tanni\"]}</p>\n                    </div>\n                )\n            default:\n                return\n        }\n    }\n\n    const saveChanges = () => {\n        closePanel()\n        setSettings(settingsObj)\n    }\n\n    \n    const setToDefault = () => {\n        // closePanel()\n        setSettingsObj({\n            'kNum5': 5, 'kNum11': 0, 'kNum12': 30, 'kNum13': 200, 'kNum14': 0, 'kNum22': 0,\n            'kNum23': 10, 'kNum24': 10, 'kNum25': 1, 'kNum26': 0, 'kNum28': 30\n        })\n        setSettings({\n            'kNum5': 5, 'kNum11': 0, 'kNum12': 30, 'kNum13': 200, 'kNum14': 0, 'kNum22': 0,\n            'kNum23': 10, 'kNum24': 10, 'kNum25': 1, 'kNum26': 0, 'kNum28': 30\n        })\n    }\n\n    return (\n        <div id=\"settings-panel\">\n            <div id=\"close-settings-panel\" onClick={() => closePanel()}><i className=\"fas fa-times\"></i></div>\n            {/* content */}\n            <div className='settings-panel-block'>\n                <p className='settings-panel-block-label'>Common Settings</p>\n                <div className='settings-panel-block-contents'>\n                    { settingsPanelData[\"kyoutuu\"].map((item, i) => <SettingsPanelItem data={item} key={i}/>) }\n                </div>\n            </div>\n            <div className='settings-panel-block'>\n                <p className='settings-panel-block-label'>Push Motion Operation Settings</p>\n                <div className='settings-panel-block-contents'>\n                    { settingsPanelData[\"oshituke\"].map((item, i) => <SettingsPanelItem data={item} key={i} />) }\n                </div>\n            </div>\n            <div className='settings-panel-block'>\n                <p className='settings-panel-block-label'>Origin Detection Settings</p>\n                <div className='settings-panel-block-contents'>\n                    { settingsPanelData[\"genten\"].map((item, i) => <SettingsPanelItem data={item} key={i} />) }\n                </div>\n            </div>\n            <div id='setting-buttons'>\n                <div id='save-changes-button'>\n                    <Button variant=\"contained\" onClick={() => saveChanges()}>\n                        Save changes\n                    </Button>\n                </div>\n                <div style={{marginRight: \"30px\"}}></div>\n                <div id='settings-to-default-button'>\n                    <Button variant=\"text\" onClick={() => setToDefault()}>\n                        set to default\n                    </Button>\n                </div>\n                <div style={{marginRight: \"10px\"}}></div>\n                <SettingsDefaultInfo info={settingsPanelData} />\n            </div>\n        </div>\n    )\n}\n\nconst Dropdown = (props) => {\n    const itemArr = props.itemArr\n    const setItem = props.setItem\n\n    const [selectedItem, setSelectedItem] = useState(props.defaultItem !== undefined ? props.defaultItem : itemArr[0])\n    const dropdownItems = useRef()\n    const selectedItemRef = useRef()\n\n    const dropdowns = () => {\n        return itemArr.map(item => {\n            return (\n                <div className=\"dropdown-item unselectable\" onClick={(e) => clickItem(e)} key={item}>{item}</div>\n            )\n        })\n    }\n\n    const showItems = () => {\n        dropdownItems.current.style.display = \"block\"\n    }\n    \n    const clickItem = (e) => {\n        setSelectedItem(e.target.innerText)\n        setItem(e.target.innerText)\n        dropdownItems.current.style.display = \"none\"\n    }\n\n\n    return (\n        <div className=\"dropdown-selector\">\n            <div ref={selectedItemRef} className=\"selected-item-smaller unselectable\" onClick={() => showItems()}>{selectedItem}<i className=\"fas fa-angle-down\"></i></div>\n            <div ref={dropdownItems} className=\"dropdown-items unselectable\">\n                {dropdowns()}\n            </div>\n        </div>\n    )\n}","import { Button } from \"@mui/material\"\nimport { useEffect, useRef, useState } from \"react\"\n\n// ------------------------------------\nexport const WizardJikuEng = (props) => {\n\n    const params = props.params\n    const tkData = params.tannikannsannData\n    const [input, setInput] = useState(params.history.length >= 1 ? params.history[0][1] : [])\n    const checkBoxRef = useRef()\n\n    useEffect(() => {\n        input.forEach(num => {\n            checkBoxRef.current.querySelector('#jiku-'+num).checked = true\n        })\n    }, [input])\n\n    const jikuCheckBoxContainer = () => {\n        let res = []\n        let i = 1\n        while (i<=params.jiku) {\n            const num = i\n            res.push(\n                <div className=\"jiku-input-container\" key={num+\"jiku-input\"}>\n                    <input type=\"checkbox\" key={num+\"input\"} onChange={(e) => changeInput(e, num)} id={\"jiku-\"+num} name=\"jiku-sentaku\"/>\n                    <label htmlFor={\"jiku-\"+num} key={num+\"label\"}>Axis #{num}</label>\n                </div>\n            )\n            i += 1\n        }\n        return res\n    }\n\n    const changeInput = (e, num) => {\n        const isChecked = e.currentTarget.checked\n        let tmp = [...input]\n        if (isChecked && !input.includes(num)) {\n            tmp.push(num)\n        } else {\n            const index = tmp.indexOf(num);\n            if (index > -1) {\n                tmp.splice(index, 1);\n            }\n        }\n        setInput(tmp)\n    }\n\n    const goNext = () => {\n        let isCheckedArr = []\n        checkBoxRef.current.querySelectorAll('input').forEach(checkBox => {\n            if (checkBox.checked === true) {\n                isCheckedArr.push(\"true\")\n            }\n        })\n        if (isCheckedArr.length >= 1) {\n            let tmp = [...params.history]\n            if (tmp.length >= 1) {\n                tmp[0][1] = input\n            } else {\n                tmp.push([\"jiku\", input])\n            }\n            params.setHistory(tmp)\n            params.setWizardInput([\"kikou\", input])\n        } else {\n            alert(\"Select axis\")\n        }\n    }\n\n    return (\n        <div className=\"tanni-wizard unselectable\">\n            <p className=\"tanni-wizard-title\">Select Axis</p>\n            <div ref={checkBoxRef} className=\"tanni-wizard-selector tanni-jiku\">\n                {jikuCheckBoxContainer()}\n            </div>\n            <div className=\"tanni-wizard-buttons\">\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\n            </div>\n        </div>\n    )\n}\n// ------------------------------------\n\nexport const WizardKikouEng = (props) => {\n    const params = props.params\n    const tkData = params.tannikannsannData\n    const jikuMainNum = params.history[0][1][0]-1\n    const [input, setInput] = useState(params.history.length >= 2 ? params.history[1][1] : (tkData[jikuMainNum].kikou !== \"initial\" ? tkData[jikuMainNum].kikou : \"ボールねじ\"))\n    const radioRef = useRef()\n\n    useEffect(() => {\n        let arr = [\"ボールねじ\", \"ベルト駆動\", \"ラックアンドピニオン\", \"インデックステーブル\"]\n        let i = arr.indexOf(input) + 1\n        radioRef.current.querySelector('#kikou-'+i).checked = true\n    }, [input])\n\n    const goBack = () => {\n        params.setWizardInput([\"jiku\", params.history[0][1]])\n    }\n\n    const goNext = () => {\n        let isCheckedArr = []\n        radioRef.current.querySelectorAll('input').forEach(input => {\n            if (input.checked === true) {\n                isCheckedArr.push(\"true\")\n            }\n        })\n        if (isCheckedArr.length !== 1) {\n            alert('Select an application')\n        } else {\n            let tmp = [...params.history]\n            if (params.history.length === 1) {\n                tmp.push([\"kikou\", input])\n                if (input !== \"インデックステーブル\") {\n                    params.setWizardInput([\"susumiryou\", input])\n                } else {\n                    tmp.push([\"susumiryou\", 360, 360])\n                    params.setWizardInput([\"gensoku\", input])\n                }\n            } else {\n                tmp[1] = [\"kikou\", input]\n                if (input !== \"インデックステーブル\") {\n                    params.setWizardInput([\"susumiryou\", input])\n                } else {\n                    tmp[2] = [\"susumiryou\", 1]\n                    params.setWizardInput([\"gensoku\", input])\n                }\n            }\n            params.setHistory(tmp)\n        }\n    }\n\n    return (\n        <div className=\"tanni-wizard unselectable\">\n            <p className=\"tanni-wizard-title\">Select Application</p>\n            <div ref={radioRef} className=\"tanni-wizard-selector tanni-kikou\">\n                <div>\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-1\" name=\"kikou-sentaku\" value=\"ボールねじ\"/>\n                    <label htmlFor=\"kikou-1\">Ball screw</label>\n                </div>\n                <div>\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-2\" name=\"kikou-sentaku\" value=\"ベルト駆動\" />\n                    <label htmlFor=\"kikou-2\">Belt drive</label>\n                </div>\n                <div>\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-3\" name=\"kikou-sentaku\" value=\"ラックアンドピニオン\" />\n                    <label htmlFor=\"kikou-3\">Rack and pinion</label>\n                </div>\n                <div>\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-4\" name=\"kikou-sentaku\" value=\"インデックステーブル\" />\n                    <label htmlFor=\"kikou-4\">Index table</label>\n                </div>\n            </div>\n            <div className=\"tanni-wizard-buttons\">\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\n            </div>\n        </div>\n    )\n}\n\nexport const WizardSusumiryouEng = (props) => {\n    const params = props.params\n    const tkData = params.tannikannsannData\n    const jikuMainNum = params.history[0][1][0]-1\n    const mode = params.history[1][1]\n    let susumiryouText = \"\"\n    let susumiryouVar = Math.PI\n    const [input, setInput] = useState((params.history.length >= 3) ? parseFloat(params.history[2][2]) : tkData[jikuMainNum].susumiryou[1])\n\n    switch (mode) {\n        case \"ボールねじ\":\n            susumiryouText = \"Ball screw lead\"\n            susumiryouVar = 1\n            break\n        case \"ベルト駆動\":\n            susumiryouText = \"Pulley diameter\"\n            break\n        case \"ラックアンドピニオン\":\n            susumiryouText = \"Pinion diameter\"\n            break\n        default:\n            susumiryouText = \"Ball screw lead\"\n            break\n    }\n\n    const goNext = () => {\n        if (input !== \"\") {\n            let tmp = [...params.history]\n            if (params.history.length === 2) {\n                tmp.push([\"susumiryou\", Math.round((parseFloat(input)*susumiryouVar + Number.EPSILON) * 100) / 100, parseFloat(input)])\n            } else {\n                tmp[2] = [\"susumiryou\", Math.round((parseFloat(input)*susumiryouVar + Number.EPSILON) * 100) / 100, parseFloat(input)]\n            }\n            params.setHistory(tmp)\n            params.setWizardInput([\"gensoku\", input])\n        } else {\n            alert('Enter a value')\n        }\n    }\n\n    const goBack = () => {\n        let tmp = [...params.history]\n        let kikouValue = tmp[1][1]\n        params.setWizardInput([\"kikou\", kikouValue])\n    }\n\n    return (\n        <div className=\"tanni-wizard\">\n            <p className=\"tanni-wizard-title unselectable\">Travel distance per motor revolution</p>\n            <div className=\"tanni-wizard-selector tanni-susumi\">\n                <div className=\"susumi-1\">\n                    <p className='tanni-susumi-p'>{susumiryouText} : </p>\n                    {(params.history.length <= 2 && tkData[jikuMainNum].susumiryou[0]===0) ? \n                    <input type=\"text\" placeholder={0} onChange={(e) => setInput(e.currentTarget.value)}/>\n                    : <input type=\"text\" value={input} onChange={(e) => setInput(e.currentTarget.value)}/>\n                    }\n                    <p className='tanni-susumi-tanni'> mm</p>\n                </div>\n                <div className=\"susumi-2\">\n                    <p className='tanni-susumi-p'>Distance : <span>{Math.round((parseFloat(input)*susumiryouVar + Number.EPSILON) * 100) / 100}</span> mm</p>\n                </div>\n            </div>\n            <div className=\"tanni-wizard-buttons unselectable\">\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\n            </div>\n        </div>\n    )\n}\n\nexport const WizardGensokuEng = (props) => {\n    const params = props.params\n    const tkData = params.tannikannsannData\n    const jikuMainNum = params.history[0][1][0]-1\n    // const [input, setInput] = useState((params.history.length >= 4) ? params.history[3][1] : tkData[jikuMainNum].gensoku)\n    const [input1, setInput1] = useState((params.history.length >= 4) ? params.history[3][1][0] : tkData[jikuMainNum].gensoku[0])\n    const [input2, setInput2] = useState((params.history.length >= 4) ? params.history[3][1][1] : tkData[jikuMainNum].gensoku[1])\n    const checkBoxRef = useRef()\n    const selectorRef = useRef()\n\n    useEffect(() => {\n        if (((params.history.length > 3) && (params.history[3][1][0] !== (1||\"\") || params.history[3][1][1] !== (1||\"\"))) || (tkData[jikuMainNum].gensoku[0]!==(1||\"\") || tkData[jikuMainNum].gensoku[1]!==(1||\"\"))) {\n            selectorRef.current.style.opacity = \"1\"\n            checkBoxRef.current.checked = \"true\"\n            selectorRef.current.querySelectorAll(\"input\").forEach(input => {\n                input.readOnly = false\n            })\n        }\n    })\n\n    const goNext = () => {\n        if ((input1 && input2) !== \"\") {\n            let tmp = [...params.history]\n            if (params.history.length === 3) {\n                tmp.push([\"gensoku\", [input1, input2]])\n            } else {\n                tmp[3] = [\"gensoku\", [input1, input2]]\n            }\n            params.setHistory(tmp)\n            params.setWizardInput([\"bunkai\", [input1, input2]])\n        } else {\n            alert(\"Enter a value\")\n        }\n    }\n\n    const goBack = () => {\n        if (params.history[1][1] !== \"インデックステーブル\") {\n            params.setWizardInput([\"susumiryou\", 0])\n        } else {\n            params.setWizardInput([\"kikou\", 0])\n        }\n    }\n\n    const handleToggle = (e) => {\n        if (e.currentTarget.checked) {\n            selectorRef.current.style.opacity = \"1\"\n            selectorRef.current.querySelectorAll(\"input\").forEach(input => {\n                input.readOnly = false\n            })\n        } else {\n            setInput1(1)\n            setInput2(1)\n            selectorRef.current.style.opacity = \"0.4\"\n        }\n    }\n\n    return (\n        <div className=\"tanni-wizard unselectable\">\n            <div className=\"tanni-wizard-title gensoku-title\"><input ref={checkBoxRef} type=\"checkbox\" onChange={(e) => handleToggle(e)} />Reduction ratio</div>\n            <div ref={selectorRef} className=\"tanni-wizard-selector gensoku-selector\">\n                <table>\n                    <thead>\n                        <tr>\n                            <th>Input</th>\n                            <th></th>\n                            <th>Output</th>\n                        </tr>\n                    </thead>\n                    <tbody>\n                        <tr>\n                            <td><input type=\"text\" readOnly value={input1} onChange={(e) => setInput1(e.currentTarget.value)}/></td>\n                            <td>  :  </td>\n                            <td><input type=\"text\" readOnly value={input2} onChange={(e) => setInput2(e.currentTarget.value)}/></td>\n                        </tr>\n                    </tbody>\n                </table>\n            </div>\n            <div className=\"tanni-wizard-buttons\">\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\n            </div>\n        </div>\n    )\n}\n\nexport const WizardBunkaiEng = (props) => {\n    const params = props.params\n    const tkData = params.tannikannsannData\n    const jikuMainNum = params.history[0][1][0]-1\n    const mode = params.history[1][1]\n    let bunkaiText = \"\"\n    let bunkaiVar = 1\n    const [input, setInput] = useState(params.history.length === 5 ? params.history[4][1] : tkData[jikuMainNum].bunkai)\n\n    switch (mode) {\n        case \"インデックステーブル\":\n            bunkaiText = \"°\"\n            bunkaiVar = 360 / (params.history[3][1][1]/params.history[3][1][0])\n            break\n        default:\n            bunkaiText = \"mm\"\n            bunkaiVar = params.history[2][1] / (params.history[3][1][1]/params.history[3][1][0])\n            break\n    }\n\n    const getTanniValue = () => {\n        return (1/parseFloat(params.history[2][1])) * parseFloat(input) * (parseFloat(params.history[3][1][1])/parseFloat(params.history[3][1][0]))\n    }\n\n    const goOK = () => {\n        let tkTmp = [...tkData]\n        params.history[0][1].forEach(jikuNum => {\n            tkTmp[jikuNum-1] = {kikou:params.history[1][1],susumiryou:[params.history[2][1],params.history[2][2]],gensoku:params.history[3][1],bunkai:input,tanniValue:getTanniValue()}\n        })\n        params.setTannikannsannData(tkTmp)\n        params.setHistory([])\n        props.close()\n    }\n\n    const goBack = () => {\n        params.setWizardInput([\"gensoku\", 0])\n    }\n\n    const changeInput = (item) => {\n        setInput(item)\n        let tmp = [...params.history]\n        if (tmp.length < 5) {\n            tmp.push([\"bunkai\", item])\n        } else {\n            tmp[4] = [\"bunkai\", item]\n        }\n        params.setHistory(tmp)\n    }\n\n    // decimal point function\n    function roundTo(n, digits) {\n        var negative = false;\n        if (digits === undefined) {\n            digits = 0;\n        }\n        if (n < 0) {\n            negative = true;\n            n = n * -1;\n        }\n        var multiplicator = Math.pow(10, digits);\n        n = parseFloat((n * multiplicator).toFixed(11));\n        n = (Math.round(n) / multiplicator).toFixed(digits);\n        if (negative) {\n            n = (n * -1).toFixed(digits);\n        }\n        return n;\n    }\n\n    return (\n        <div className=\"tanni-wizard unselectable\">\n            <p className=\"tanni-wizard-title\">Minimum positioning unit</p>\n            <div className=\"tanni-wizard-selector tanni-bunkai\">\n                <div className=\"bunkai-1\">\n                    <p className=\"tanni-bunkai-text\">Resolution of motor: </p>\n                    <DropdownEng setItem={changeInput} defaultItem={input} itemArr={[300, 600, 1000, 1200, 2000, 3000, 5000, 6000, 10000, 12000]} />\n                    <p className=\"tanni-bunkai-text\">pulse/revolution</p>\n                </div>\n                <div className=\"bunkai-2\">\n                    <p className=\"tanni-bunkai-text\">Minimum positioning unit: <span>{roundTo(bunkaiVar/parseFloat(input) + Number.EPSILON, 5)}</span> {bunkaiText}</p>\n                </div>\n            </div>\n            <div className=\"tanni-wizard-buttons\">\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\n                <Button className=\"tanni-ok\" variant=\"contained\" onClick={() => goOK()}>OK</Button>\n            </div>\n        </div>\n    )\n}\n\nexport const DropdownEng = (props) => {\n    const itemArr = props.itemArr\n    const setItem = props.setItem\n\n    const [selectedItem, setSelectedItem] = useState(props.defaultItem !== undefined ? props.defaultItem : itemArr[0])\n    const dropdownItems = useRef()\n    const selectedItemRef = useRef()\n\n    const dropdowns = () => {\n        return itemArr.map(item => {\n            return (\n                <div className=\"dropdown-item unselectable\" onClick={(e) => clickItem(e)} key={item}>{item}</div>\n            )\n        })\n    }\n\n    const showItems = () => {\n        dropdownItems.current.style.display = \"block\"\n    }\n    \n    const clickItem = (e) => {\n        setSelectedItem(e.target.innerText)\n        setItem(e.target.innerText)\n        dropdownItems.current.style.display = \"none\"\n    }\n\n\n    return (\n        <div className=\"dropdown-selector\">\n            <div ref={selectedItemRef} className=\"selected-item unselectable\" onClick={() => showItems()}>{selectedItem}<i className=\"fas fa-angle-down\"></i></div>\n            <div ref={dropdownItems} className=\"dropdown-items unselectable\">\n                {dropdowns()}\n            </div>\n        </div>\n    )\n}","import React, { useRef, useState } from 'react';\nimport { SettingsPanel } from '../settingsPanel/settingsPanel';\nimport { WizardGensokuEng, WizardKikouEng, WizardSusumiryouEng, WizardBunkaiEng, WizardJikuEng } from './tanni-funcs_eng';\nimport { toCML } from '../toCml';\nimport { Link } from \"react-router-dom\";\n\n// Function to download data to a file\nexport const downloadFile = (data, filename, type) => {\n    var file = new Blob([data], {type: type});\n    if (window.navigator.msSaveOrOpenBlob) // IE10+\n        window.navigator.msSaveOrOpenBlob(file, filename);\n    else { // Others\n        let a = document.createElement(\"a\"),\n        url = URL.createObjectURL(file);\n        a.href = url;\n        a.download = filename;\n        document.body.appendChild(a);\n        a.click();\n        setTimeout(function() {\n            document.body.removeChild(a);\n            window.URL.revokeObjectURL(url);  \n        }, 0); \n    }\n}\n\nexport const TopMenuEng = (props) => {\n\n    const topMenuRef = useRef()\n    const muteIconRef = useRef()\n\n    const handleFileImport = (e) => {\n        const reader = new FileReader()\n        reader.onload = async (e) => { \n            // const obj = JSON.parse(e.target.result)\n            const obj = JSON.parse(reader.result)\n            // try {\n                props.setJiku(obj.data.jiku)\n                props.setTannikannsannData(obj.data.tannikannsannData)\n                props.setProgramData(obj.data.programData)\n                props.setLoopData(obj.data.loopData)\n                props.setCmlOutput(toCML(obj.data.programData, obj.data.loopData, obj.data.isNyuryokuShingou, obj.data.tannikannsannData, obj.data.settings))\n            // } catch (err) {\n            //     alert('ファイルが間違っています')\n            // }\n        };\n        reader.readAsText(e.target.files[0], \"utf-8\")\n    }\n\n    // Function to download data to a file\n    const downloadFile = (data, filename, type) => {\n        var file = new Blob([data], {type: type});\n        if (window.navigator.msSaveOrOpenBlob) // IE10+\n            window.navigator.msSaveOrOpenBlob(file, filename);\n        else { // Others\n            var a = document.createElement(\"a\"),\n            url = URL.createObjectURL(file);\n            a.href = url;\n            a.download = filename;\n            document.body.appendChild(a);\n            a.click();\n            setTimeout(function() {\n                document.body.removeChild(a);\n                window.URL.revokeObjectURL(url);  \n            }, 0); \n        }\n    }\n\n    const handleFileSave = () => {\n        let obj = {\"name\":\"cml-import\",\"data\":{\"jiku\":props.jiku,\"tannikannsannData\":props.tannikannsannData,\"programData\":props.programData,\"loopData\":props.loopData,\"isNyuryokuShingou\":props.isNyuryokuShingou, \"settings\":props.settings}}\n        const data = JSON.stringify(obj)\n\n        const date = new Date();\n        let year = date.getFullYear();\n        let month = date.getMonth() + 1;\n        let day = date.getDate();\n        let hour = date.getHours();\n        let minute = date.getMinutes()\n        let currentDate = `${year}_${month}_${day}_${hour}_${minute}`\n\n        const filename = \"CML_projectfile_\" + currentDate\n        const type = \".txt\"\n        downloadFile(data, filename, type)\n    }\n\n    const display = (ref) => {\n        ref.current.classList.add(\"shown\")\n        ref.current.classList.remove(\"hidden\")\n        setTimeout(() => {\n            if (!ref.current.classList.contains(\"hidden\")) {\n                ref.current.style.display = \"block\"\n            }\n        }, 500)\n    }\n\n    const hide = (ref) => {\n        ref.current.classList.remove('shown')\n        ref.current.classList.add('hidden')\n        ref.current.style.display = \"none\"\n    }\n\n    const openTanni = () => {\n        document.querySelector('.tannikannsann-popup').style.display = \"flex\"\n        props.layerRef.current.style.display = \"block\"\n    }\n\n    const closeTanni = (topMenuRef, layerRef) => {\n        document.querySelector('.tannikannsann-popup').style.display = \"none\"\n        // topMenuRef.current.querySelector('.tannikannsann-popup').style.display = \"none\"\n        layerRef.current.style.display = \"none\"\n    }\n\n    const openSettingsPanel = () => {\n        document.querySelector('#settings-panel').style.display = \"flex\"\n        props.layerRef.current.style.display = \"block\"\n    }\n\n    const closeSettingsPanel = () => {\n        document.current.querySelector('#settings-panel').style.display = \"none\"\n        // topMenuRef.current.querySelector('#settings-panel').style.display = \"none\"\n        props.layerRef.current.style.display = \"none\"\n    }\n\n    const toggleIsMute = (e) => {\n        let isPressed = muteIconRef.current.classList.contains(\"fa-volume-xmark\")\n        if (isPressed) {\n            muteIconRef.current.classList.remove(\"fa-volume-xmark\")\n            muteIconRef.current.classList.add(\"fa-volume-high\")\n            props.setIsMute(false)\n        } else {\n            muteIconRef.current.classList.remove(\"fa-volume-high\")\n            muteIconRef.current.classList.add(\"fa-volume-xmark\")\n            props.setIsMute(true)\n        }\n    }\n\n    const muteIcon = props.isMute ? \"volume-xmark\" : \"volume-high\"\n    // --\n    const expSave = useRef() \n    const expImp = useRef() \n    const expTanni = useRef() \n\n    return (\n        <div ref={topMenuRef} className=\"top-menu\">\n            <div className=\"top-menu-button save-file unselectable\" onMouseEnter={() => display(expSave)} onMouseLeave={() => hide(expSave)} onClick={() => handleFileSave()}>\n                <i className=\"fa-solid fa-floppy-disk\"></i>Save project as\n                <div ref={expSave} className=\"exp-box hidden\">Save project in progress</div>\n            </div>\n            \n            <div className=\"top-menu-button import-file unselectable\" onMouseEnter={() => display(expImp)} onMouseLeave={() => hide(expImp)}>\n                <label htmlFor=\"top-menu-file-upload\">\n                    <i className=\"fa-solid fa-folder-open\"></i>Open project\n                    <input id=\"top-menu-file-upload\" accept=\".txt\" type=\"file\" onChange={(e) => handleFileImport(e)}/>\n                </label>\n                <div ref={expImp} className=\"exp-box hidden\">Open a saved project</div>\n            </div>\n            <div className=\"top-menu-button tannikannsann unselectable\" onMouseEnter={() => display(expTanni)} onMouseLeave={() => hide(expTanni)} onClick={() => openTanni()}>\n                <i className=\"fa-solid fa-gears\"></i>Unit conversion\n                <div ref={expTanni} className=\"exp-box hidden\">Sets units and resolution</div>\n            </div>\n            {/* <Tannikannsann jiku={props.jiku} tannikannsannData={props.tannikannsannData} setTannikannsannData={props.setTannikannsannData} application={props.application} setApplication={props.setApplication} tanniValue={props.tanniValue} setTanniValue={props.setTanniValue} layerRef={props.layerRef} topMenuRef={topMenuRef} closeTanni={closeTanni}/> */}\n            <div className=\"top-menu-button settings unselectable\" onClick={() => openSettingsPanel()}>\n                <i className=\"fa-solid fa-gear\"></i>Settings\n            </div>\n            {/* <SettingsPanel closePanel={closeSettingsPanel} settings={props.settings} setSettings={props.setSettings} /> */}\n            <div className='top-menu-button mute-button unselectable' onClick={(e) => toggleIsMute(e)}>\n                <i ref={muteIconRef} className={\"fa-solid fa-\"+muteIcon}></i>\n            </div>\n            <a href=\"https://rin101.github.io/cml-app\">\n            {/* <a href=\"https://musclecorp.com/cml-app\"> */}\n                <div className='top-menu-button language-button unselectable'>\n                    <i className={\"fa-solid fa-globe\"}></i>日本語\n                </div>\n            </a>\n        </div>\n    )\n}\n\nexport const Tannikannsann = (props) => {\n    // props: tanniValue, setTanniValue, application, setApplication, tannikannsannData, setTannikannsannData\n    \n    const close = () => {\n        props.closeTanni(props.topMenuRef, props.layerRef)\n    }\n    \n    const WizardController = (props) => {\n        const [history, setHistory] = useState([])\n        const [wizardInput, setWizardInput] = useState([\"jiku\", []])\n\n        const inputForm = () => {\n            const params = {\n                wizardInput: wizardInput[1], \n                history, setHistory, setWizardInput,\n                tannikannsannData: props.tannikannsannData, setTannikannsannData: props.setTannikannsannData,\n                jiku: props.jiku\n            }\n        \n            switch (wizardInput[0]) {\n                case \"jiku\":\n                    return <WizardJikuEng params={params} />\n                case \"kikou\":\n                    return <WizardKikouEng params={params} />\n                case \"susumiryou\":\n                    return <WizardSusumiryouEng params={params} />\n                case \"gensoku\":\n                    return <WizardGensokuEng params={params} />\n                case \"bunkai\":\n                    return <WizardBunkaiEng close={props.close} params={params} />\n                default:\n                    return <WizardKikouEng params={params}/>\n            }\n        }\n\n        return (\n            <div className='wizard-controller'>\n                    {inputForm()}\n            </div>\n        )\n    } \n\n    return (\n        <div className=\"tannikannsann-popup\">\n            <div className=\"close-popup close-tannikannsann\" onClick={() => close()}><i className=\"fas fa-times-circle\"></i></div>\n            <WizardController close={close} jiku={props.jiku} tannikannsannData={props.tannikannsannData} setTannikannsannData={props.setTannikannsannData} />\n        </div>\n    )\n}\n","import { Button } from '@mui/material';\nimport React, { useEffect, useRef, useState } from 'react';\nimport '../App.css'\nimport '../program-grid.css'\nimport { Editor } from '../Editor';\nimport { ProgramBlockEng, TypeDataInDousaEng, LoopInputBoxEng } from './programBlock_eng';\nimport useLocalStorage from '../useLocalStorage';\nimport { Tannikannsann, TopMenuEng } from './menu_eng';\nimport { downloadFile } from './menu_eng';\nimport soundfile1 from '../sounds/決定、ボタン押下38.mp3'\nimport soundfile2 from '../sounds/決定、ボタン押下44.mp3'\nimport instructionImg from '../image/popup-instruction.png'\nimport { toCML } from '../toCml';\nimport { pressRun } from '../serialPort';\nimport { SettingsPanel } from '../settingsPanel/settingsPanel';\n\nexport const AppEng = () => {\n\n    // const [cmlOutput, setCmlOutput] = useLocalStorage('CML', '')\n    const [cmlOutput, setCmlOutput] = useState('')\n    const [isNyuryokuShingou, setIsNyuryokuShingou] = useState(false)\n    const [settings, setSettings] = useLocalStorage('kNum', {\n        'kNum5': 5, 'kNum11': 0, 'kNum12': 30, 'kNum13': 200, 'kNum14': 0, 'kNum22': 0,\n        'kNum23': 10, 'kNum24': 10, 'kNum25': 1, 'kNum26': 0, 'kNum28': 30\n    })\n    const [isMute, setIsMute] = useState(false)\n    const [jiku, setJiku] = useState(1)\n    let initialTannikannsannData = []\n    for (let i=0; i < jiku; i++) {\n        initialTannikannsannData.push({kikou: \"initial\", susumiryou: [1,1], gensoku: [1,1], bunkai: \"1000\", tanniValue:1})\n    }\n    const [tannikannsannData, setTannikannsannData] = useState(initialTannikannsannData)\n    // const [programData, setProgramData] = useState([[[[\"位置決め\", 1, [[100, \"pps\"], [100, \"pps\"], [100, \"pps\"]]],[],[]],[[],[],[]],[[],[],[]]]])\n    const [programData, setProgramData] = useState(\n        [\n            [\n                [[\"位置決め\", 1, [[100, \"pps\"], [100, \"pps\"], [100, \"pps\"]]]],\n                [[]],\n                [[]]\n            ], [[[]]], [[[]]]\n        ]\n    )\n    const [loopData, setLoopData] = useState([])\n    const [currentDraggedCommand, setCurrentDraggedCommand] = useState(\"位置決め\")\n\n    // typeDataObj: [jiku, parentId, dousaType, dousaNum, isInitial]\n    // loopInputObj: [parentId, isInitial]\n    const [typeDataObj, setTypeDataObj] = useState(new Array(5))\n    const [loopInputObj, setLoopInputObj] = useState(new Array(2))\n    const [inputBoxType, setInputBoxType] = useState(\"none\")\n\n    const typeDataRef = useRef()\n    const loopInputRef = useRef()\n    const expCopy = useRef()\n    const expCopyDone = useRef()\n    const layerRef = useRef()\n    const commandSelectorRef = useRef()\n    const instructionPopupRef = useRef()\n\n    // const getIndex = (document) => {\n    //     let res = document.id.split('-')\n    //     res.shift()\n    //     return res\n    // }\n\n    const commandDragStart = (e) => {\n        if (!isMute) {\n            let audio = new Audio(soundfile1);\n            audio.play();\n        }\n    }\n\n    const commandHover = (e) => {\n        switch(e.target.id) {\n            case \"ichigime-selector\":\n                setCurrentDraggedCommand(\"位置決め\")\n                break\n            case \"oshituke-selector\":\n                setCurrentDraggedCommand(\"押付け\")\n                break\n            case \"taima-selector\":\n                setCurrentDraggedCommand(\"タイマ\")\n                break\n            case \"incremental-ichigime-selector\":\n                setCurrentDraggedCommand(\"位置決め+\")\n                break\n            case \"incremental-oshituke-selector\":\n                setCurrentDraggedCommand(\"押付け+\")\n                break\n            case \"nyuryokuten-selector\":\n                setCurrentDraggedCommand(\"入力点からの実行\")\n                break\n            case \"shutsuryoku1\":\n                setCurrentDraggedCommand(\"出力点1へ出力\")\n                break\n            case \"shutsuryoku2\":\n                setCurrentDraggedCommand(\"出力点2へ出力\")\n                break\n            case \"shutsuryoku3\":\n                setCurrentDraggedCommand(\"出力点3へ出力\")\n                break            \n            case \"shutsuryokuOff\":\n                setCurrentDraggedCommand(\"出力点を全てOFF\")\n                break       \n            case \"gentenfukki\":\n                setCurrentDraggedCommand(\"原点復帰\")\n                break      \n            case \"kurikaeshi-selector\":\n                setCurrentDraggedCommand(\"繰り返し\")\n                break\n            case \"dousaGroup-selector\":\n                setCurrentDraggedCommand(\"動作グループを追加\")\n                break\n            default:\n                setCurrentDraggedCommand(\"NOPE\")\n                break\n        }\n        // this.className += ' hold';\n        // setTimeout(() => (this.className = 'invisible'), 0);\n    }\n    // function dragEnd() {\n    //     this.className = 'fill';\n    // }\n\n    const copyCML = (cml) => {\n        navigator.clipboard.writeText(cml);\n        expCopy.current.style.display = \"none\"\n        expCopyDone.current.style.display = \"block\"\n        setTimeout(() => {\n            expCopyDone.current.style.display = \"none\"\n        }, 2000)\n    }\n\n    const display = (ref) => {\n        ref.current.classList.add(\"shown\")\n        ref.current.classList.remove(\"hidden\")\n        setTimeout(() => {\n            if (!ref.current.classList.contains(\"hidden\")) {\n                ref.current.style.display = \"block\"\n            }\n        }, 500)\n    }\n\n    const hide = (ref) => {\n        ref.current.classList.remove('shown')\n        ref.current.classList.add('hidden')\n        ref.current.style.display = \"none\"\n    }\n\n    const showPopUpOfInstruction = () => {\n        // instructionPopupRef.current.style.display = \"flex\"\n        handleFileExport()\n    }\n\n    const handleFileExport = () => {\n        const data = cmlOutput\n        // 日付と時刻\n        const date = new Date();\n        let year = date.getFullYear();\n        let month = date.getMonth() + 1;\n        let day = date.getDate();\n        let hour = date.getHours();\n        let minute = date.getMinutes()\n        let currentDate = `${year}_${month}_${day}_${hour}_${minute}`\n\n        const filename = \"CML_\" + currentDate\n        const type = \".txt\"\n        downloadFile(data, filename, type)\n    }\n\n    const DataInputBox = (props) => {\n        switch (props.inputBoxType) {\n            case \"typedata\":\n                return <TypeDataInDousaEng tkData={tannikannsannData} setInputBoxType={setInputBoxType} isInitial={typeDataObj[4]} jiku={typeDataObj[0]} parentId={typeDataObj[1]} dousaType={typeDataObj[2]} dousaNum={typeDataObj[3]} programData={programData} setProgramData={setProgramData}/>\n            case \"loop\":\n                return <LoopInputBoxEng setInputBoxType={setInputBoxType} isInitial={loopInputObj[1]} parentId={loopInputObj[0]} loopData={loopData} setLoopData={setLoopData} />\n            default:\n                return <></>\n        }\n    }\n\n    const PopUpOfInstruction = () => {\n        const close = () => {\n            instructionPopupRef.current.style.display = \"none\"\n        }\n\n        return (\n            <div className='popup-instruction' ref={instructionPopupRef}>\n                <div className='popup-container'>\n                    <div id=\"close-instruction-popup\" onClick={() => close()}><i className=\"fas fa-times-circle\"></i></div>\n                    <div className='popup-content'>\n                        <p>モータへの書き込みが完了しました。<br/>モータの電源を再投入すると、入力点からの制御が可能になります。</p>\n                    </div>\n                    {/* export to text file instruction */}\n                    {/* <img src={instructionImg} alt=\"instruction\" /> */}\n                </div>\n            </div>\n        )\n    }\n\n    async function jikkou() {\n        // setCmlOutput(toCML(programData, loopData, isNyuryokuShingou, tannikannsannData, settings))\n        // pressRun(toCML(programData, loopData, isNyuryokuShingou, tannikannsannData, settings))\n        if (cmlOutput.length > 0) {\n            await pressRun(cmlOutput)\n            setTimeout(() => {\n                instructionPopupRef.current.style.display = \"flex\"\n            }, 500);   \n        } else {\n            alert(\"CMLに変換してください。\")\n        }\n    }\n\n    const closeTanni = () => {\n        document.querySelector('.tannikannsann-popup').style.display = \"none\"\n        // topMenuRef.current.querySelector('.tannikannsann-popup').style.display = \"none\"\n        layerRef.current.style.display = \"none\"\n    }\n\n    const closeSettingsPanel = () => {\n        document.querySelector('#settings-panel').style.display = \"none\"\n        // topMenuRef.current.querySelector('#settings-panel').style.display = \"none\"\n        layerRef.current.style.display = \"none\"\n    }\n\n\n    return (\n        <div className=\"main\">\n            <PopUpOfInstruction />\n            <DataInputBox inputBoxType={inputBoxType} />\n            <div ref={layerRef} className=\"layer\"></div>\n            <Tannikannsann jiku={jiku} tannikannsannData={tannikannsannData} setTannikannsannData={setTannikannsannData} application={\"hi\"} setApplication={\"hi\"} tanniValue={\"hi\"} setTanniValue={\"hi\"} topMenuRef={\"hi\"} closeTanni={closeTanni}/>\n            <SettingsPanel closePanel={closeSettingsPanel} settings={settings} setSettings={setSettings} />\n            <div className='top-menu-container'>\n                <TopMenuEng settings={settings} setSettings={setSettings} isMute={isMute} setIsMute={setIsMute} tannikannsannData={tannikannsannData} setTannikannsannData={setTannikannsannData} programData={programData} setProgramData={setProgramData} loopData={loopData} setLoopData={setLoopData} layerRef={layerRef} cmlOutput={cmlOutput} setCmlOutput={setCmlOutput} isNyuryokuShingou={isNyuryokuShingou} setIsNyuryokuShingou={setIsNyuryokuShingou} jiku={jiku} setJiku={setJiku}/>\n            </div>\n            <div className='top-menu-spacer'></div>\n            <div className=\"center-section\">\n                <div className=\"command-list-width-box\"></div>\n                <div className='command-list-container'>\n                    <div className=\"command-list\">\n                        <div className='command-list-wrapper'>\n                            {/* <div onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"dousaGroup-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Add Motion Group</div> */}\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"ichigime-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>PTP</div>\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"oshituke-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Push</div>\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"incremental-ichigime-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>PTP+</div>\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"incremental-oshituke-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Push+</div>\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"taima-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Timer</div>\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"shutsuryoku1\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Turn on OUT1</div>\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"shutsuryoku2\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Turn on OUT2</div>\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"shutsuryoku3\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Turn on OUT3</div>\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"shutsuryokuOff\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Turn off all outputs</div>\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"gentenfukki\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Origin Detection</div>\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"kurikaeshi-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Loop</div>\n                            {/* <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"nyuryokuten-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Execution from Input signal</div> */}\n                        </div>\n                    </div>\n                </div>\n                <div className='main-interface-section'>\n                    <div className='program-block-container'>\n                        <ProgramBlockEng settings={settings} isMute={isMute} tkData={tannikannsannData} setTkData={setTannikannsannData} setInputBoxType={setInputBoxType} inputBoxType={inputBoxType} loopInputObj={loopInputObj} setLoopInputObj={setLoopInputObj} typeDataObj={typeDataObj} setTypeDataObj={setTypeDataObj} typeDataRef={typeDataRef} loopInputRef={loopInputRef} isNyuryokuShingou={isNyuryokuShingou} setCmlOutput={setCmlOutput} loopData={loopData} setLoopData={setLoopData} programData={programData} setProgramData={setProgramData} jiku={jiku} setJiku={setJiku} currentDraggedCommand={currentDraggedCommand} setCurrentDraggedCommand={setCurrentDraggedCommand}/>\n                    </div>\n                    <div className='cml-output-container'>\n                        <div className=\"cml-output-section\">\n                            <div className='cml-output-content'>\n                                <h3 className='unselectable'>CML</h3>\n                                <Editor value={cmlOutput} onChange={setCmlOutput} />\n                            </div>\n                            <div className=\"jikkou-button\">\n                                <Button variant=\"contained\" onClick={() => showPopUpOfInstruction()}>\n                                    Export<br/>text file\n                                </Button>\n                                <div className=\"copy-cml-container\">\n                                    <div className=\"copy-cml\" onMouseEnter={() => display(expCopy)} onMouseLeave={() => hide(expCopy)} onClick={() => copyCML(cmlOutput)}><i className=\"fas fa-copy\"></i></div>\n                                    <div ref={expCopy} className=\"exp-copy hidden\">copy</div>\n                                    <div ref={expCopyDone} className=\"exp-copy-done hidden\">copied!</div>\n                                </div>\n                            </div>\n                            <div className='spacer'></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div className='bottom-menu-container'>\n                <div className='bottom-menu' onClick={() => jikkou()}>\n                    {/* <Button variant=\"contained\" onClick={() => jikkou()}>Write to Motor</Button> */}\n                    <p id='bottom-menu-button-text'>Write to Motor</p>\n                </div>\n            </div>\n            <div className='bottom-menu-spacer'></div>\n            {/* <div className=\"center-section\">\n                <TopMenuEng tannikannsannData={tannikannsannData} setTannikannsannData={setTannikannsannData} programData={programData} setProgramData={setProgramData} loopData={loopData} setLoopData={setLoopData} layerRef={layerRef} cmlOutput={cmlOutput} setCmlOutput={setCmlOutput} isNyuryokuShingou={isNyuryokuShingou} setIsNyuryokuShingou={setIsNyuryokuShingou} jiku={jiku} setJiku={setJiku}/>\n                <ProgramBlockEng tkData={tannikannsannData} setInputBoxType={setInputBoxType} inputBoxType={inputBoxType} loopInputObj={loopInputObj} setLoopInputObj={setLoopInputObj} typeDataObj={typeDataObj} setTypeDataObj={setTypeDataObj} typeDataRef={typeDataRef} loopInputRef={loopInputRef} isNyuryokuShingou={isNyuryokuShingou} setCmlOutput={setCmlOutput} loopData={loopData} setLoopData={setLoopData} programData={programData} setProgramData={setProgramData} jiku={jiku} setJiku={setJiku} currentDraggedCommand={currentDraggedCommand} setCurrentDraggedCommand={setCurrentDraggedCommand}/>\n            </div>\n            <div className=\"cml-output-section\">\n                <h3 className='unselectable'>CML</h3>\n                <Editor value={cmlOutput} onChange={setCmlOutput} />\n                <div className=\"jikkou-button\">\n                    <Button variant=\"contained\" onClick={() => handleFileExport()}>\n                        テキストファイルにエクスポート\n                    </Button>\n                    <div className=\"copy-cml-container\">\n                        <div className=\"copy-cml\" onMouseEnter={() => display(expCopy)} onMouseLeave={() => hide(expCopy)} onClick={() => copyCML(cmlOutput)}><i className=\"fas fa-copy\"></i></div>\n                        <div ref={expCopy} className=\"exp-copy hidden\">コピー</div>\n                        <div ref={expCopyDone} className=\"exp-copy-done hidden\">コピーされました</div>\n                    </div>\n                </div>\n            </div> */}\n        </div>\n    )\n}\n","export default __webpack_public_path__ + \"static/media/popup-instruction.495acebe.png\";","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { AppEng } from './eng/App_eng';\n\nconst AppWrapper = () => {\n  return (\n    <div className='App'>\n      <AppEng />\n    </div>\n  )\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppWrapper />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}