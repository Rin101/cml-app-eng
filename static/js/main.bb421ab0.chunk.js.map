{"version":3,"sources":["Editor.js","toCml.js","sounds/決定、ボタン押下38.mp3","sounds/決定、ボタン押下44.mp3","serialPort.js","eng/programBlock_eng.js","settingsPanel/settingInfo.js","settingsPanel/settingsDefaultInfo.js","settingsPanel/settingsPanel.js","eng/tanni-funcs_eng.js","eng/menu_eng.js","eng/App_eng.js","image/popup-instruction.png","useLocalStorage.js","index.js"],"names":["Editor","props","className","onBeforeChange","editor","data","value","onChange","options","lineWrapping","lint","lineNumbers","theme","toCML","programData","loopData","isNyuryokuShingou","tkData","settings","output","every_data_teigi","every_program_teigi","dousa_group","indexOf","toString","dousa_jikkou_of_group","dousa_row","dousa_jikkou_row_arr","shuturyoku_row","gentenfukki","dousa","length","dousa_jiku","cml_numbers","tanniValue","getPulseValue","push","console","log","alert","loop_start","loop_end","loop","join","settingsCML","jikuNum","bunkainouValueList","bunkainouCML","parseInt","i","kNumList","constantKNumList","kNum","includes","itemInConstants","valueArr","divideVar","parseFloat","tanni","Math","round","str2ab","str","buf","ArrayBuffer","bufView","Uint16Array","strLen","charCodeAt","delay","time","Promise","resolve","setTimeout","pressRun","cml","cmlChunkList","split","navigator","serial","requestPort","port","open","baudRate","cmlChunk","editedCmlChunk","replace","writable","getWriter","writer","write","releaseLock","close","ProgramBlockEng","addRowRef","useRef","pgEmptyBox","useState","dousaNumArr","setDousaNumArr","timerNumArr","setTimerNumArr","trashInput","e","setProgramData","indexArr","target","parentNode","id","shift","tmp","trashJiku","currentTarget","index","jiku","splice","setJiku","tkTmp","setTkData","setLoopData","addRow","emptyRow","addJiku","kikou","susumiryou","gensoku","bunkai","moveRow","direction","dousaGroup","rowIndex","moveJiku","current_jiku","tmp_dousa","tmp_tk_item","showTypeData","isLoop","parentId","dousaType","dousaNum","setLoopInputObj","setInputBoxType","typeDataObj","setTypeDataObj","emptyBoxDragEnd","style","cursor","resizeLoop","mainItemIndex","forEach","isDirectionAvailable","rowLength","dousaBoxRef","pg_l_arr","main_grid","jiku_i","jiku_num","onClick","gridColumn","dousa_group_i","dontPutEmp","dousa_row_i","loopCount","loopHeight","loopStyleHeight","z","dragArrows","loopId","height","map","dragArrow","trashLoop","onDragOver","currentDraggedCommand","preventDefault","emptyBoxLoopDragOver","onDragEnter","emptyBoxLoopDragEnter","onDragLeave","emptyBoxLoopDragLeave","onDrop","isMute","Audio","soundfile2","play","emptyBoxLoopDragDrop","ref","dousa_i","noValueArr","dousaId","jikuOfDousa","dousaName","draggable","onDragStart","onDragEnd","onMouseEnter","setCurrentDraggedCommand","marginRight","emptyBoxDragOver","emptyBoxDragEnter","emptyBoxDragLeave","audio","tmpTimerNumArr","draggedIndexArr","tmpDousaNumArr","emptyBoxDragDrop","tmpLoop","trashRow","addGroupDragOver","querySelector","display","addGroupDragEnter","addGroupDragLeave","emptyGroup","addGroupDragDrop","gridTemplateColumns","dataToHTML","Button","color","variant","setCmlOutput","TypeDataInDousaEng","popupRef","closeTypeData","subTanni","dataFormat","ichigimeData","bangouRange","inputForm","incrementalIchigimeData","oshitukeData","incrementalOshitukeData","DousaInputBox","range","inputLine","DataInput","tanniArr","isAllNumber","current","querySelectorAll","input","isNaN","inputs","tanniSelectors","setTypeData","setValue","tanniState","setTanniState","required","placeholder","defaultValue","LoopInputBoxEng","loopGroupIndex","loopRowIndex","currentLoopIndexInList","loopItem","NumDropDown","currentNum","setCurrentNum","numItemRef","currentNumRef","selectItem","sameDataArr","isItemsShown","showItems","res","getNumItems","SettingInfo","text","textBoxRef","classList","add","remove","contains","onMouseLeave","SettingsDefaultInfo","info","isShown","setIsShown","defaultValues","constantValues","constantNumNames","marginTop","infoList","item","displayInfo","opacity","displayConstants","SettingsPanel","closePanel","setSettings","settingsPanelData","settingsObj","setSettingsObj","useEffect","SettingsPanelItem","setInputValue","setTextInputValue","setItem","inputValue","inputIndex","defaultItem","itemArr","Dropdown","undefined","selectedItem","setSelectedItem","dropdownItems","selectedItemRef","clickItem","innerText","WizardJikuEng","params","tannikannsannData","history","setInput","checkBoxRef","num","checked","changeInput","isChecked","type","name","htmlFor","jikuCheckBoxContainer","isCheckedArr","checkBox","setHistory","setWizardInput","goNext","WizardKikouEng","jikuMainNum","radioRef","WizardSusumiryouEng","mode","susumiryouText","susumiryouVar","PI","Number","EPSILON","kikouValue","goBack","WizardGensokuEng","input1","setInput1","input2","setInput2","selectorRef","readOnly","handleToggle","WizardBunkaiEng","bunkaiText","bunkaiVar","n","digits","negative","multiplicator","pow","toFixed","roundTo","setTannikannsannData","goOK","DropdownEng","TopMenuEng","topMenuRef","muteIconRef","handleFileSave","obj","JSON","stringify","date","Date","year","getFullYear","month","getMonth","day","getDate","hour","getHours","minute","getMinutes","filename","file","Blob","window","msSaveOrOpenBlob","a","document","createElement","url","URL","createObjectURL","href","download","body","appendChild","click","removeChild","revokeObjectURL","downloadFile","hide","muteIcon","expSave","expImp","expTanni","accept","reader","FileReader","onload","parse","result","readAsText","files","handleFileImport","layerRef","setIsMute","Tannikannsann","closeTanni","WizardController","wizardInput","AppEng","cmlOutput","setIsNyuryokuShingou","key","initialValue","prefixedKey","jsonValue","localStorage","getItem","useLocalStorage","initialTannikannsannData","Array","loopInputObj","inputBoxType","typeDataRef","loopInputRef","expCopy","expCopyDone","commandSelectorRef","instructionPopupRef","jikkouNumPopupRef","commandDragStart","soundfile1","commandHover","handleFileExport","DataInputBox","isInitial","PopUpOfInstruction","PopUpOfJikkouNum","jikkouNum","setJikkouNum","application","setApplication","setTanniValue","clipboard","writeText","jikkou","marginLeft","AppWrapper","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bb421ab0.chunk.js","sourcesContent":["import React from 'react'\r\nimport 'codemirror/lib/codemirror.css'\r\nimport 'codemirror/theme/material.css'\r\nimport { Controlled as ControlledEditor } from 'react-codemirror2'\r\n\r\nexport const Editor = (props) => {\r\n\r\n    const handleChange = (editor, data, value) => {\r\n        props.onChange(value)\r\n    }\r\n\r\n    return(\r\n        <div className=\"cml-editor-container\">\r\n            <ControlledEditor \r\n                onBeforeChange={handleChange}\r\n                value={props.value}\r\n                className=\"cml-editor\"\r\n                options={{\r\n                    lineWrapping: true,\r\n                    lint: true,\r\n                    lineNumbers: true,\r\n                    theme: 'material'\r\n                }} \r\n            />\r\n        </div>\r\n    )\r\n}","export const toCML = (programData, loopData, isNyuryokuShingou, tkData, settings) => {\r\n\r\n    let containsShuturyoku1 = false\r\n    let containsShuturyoku2 = false\r\n    let containsShuturyoku3 = false\r\n    let containsShuturyokuOff = false\r\n\r\n    let output = \"\"\r\n    let every_data_teigi = \"\"\r\n    let every_program_teigi = \"\"\r\n    for (let dousa_group of programData) {\r\n        let dousa_group_index = programData.indexOf(dousa_group) + 1\r\n        every_program_teigi += \"B\" + dousa_group_index.toString() + \".1\\r\\n\"\r\n        let dousa_jikkou_of_group = \"\"\r\n        for (let dousa_row of dousa_group) {\r\n            let dousa_jikkou_row_arr = []\r\n            let shuturyoku_row = \"\"\r\n            let gentenfukki = \"\"\r\n            for (let dousa of dousa_row) {\r\n                if (dousa.length !== 0) {\r\n                    const dousa_jiku = dousa_row.indexOf(dousa) + 1\r\n                    let cml_numbers = dousa[1].toString() + \".\" + dousa_jiku.toString()\r\n                    const tanniValue = tkData[dousa_jiku-1].tanniValue\r\n                    switch (dousa[0]) {\r\n                        case \"位置決め\":\r\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue,100).toString()+\"\\r\\nA\"+cml_numbers+\"=\"+getPulseValue(dousa[2][1], tanniValue,1000).toString()+\"\\r\\nP\"+cml_numbers+\"=\"+getPulseValue(dousa[2][2], tanniValue).toString()+`\\r\\n`\r\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},P${cml_numbers}`)\r\n                            break\r\n                        case \"位置決め+\":\r\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue,100).toString()+\"\\r\\nA\"+cml_numbers+\"=\"+getPulseValue(dousa[2][1], tanniValue,1000).toString()+\"\\r\\nP\"+cml_numbers+\"=\"+getPulseValue(dousa[2][2], tanniValue).toString()+`\\r\\n`\r\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},P${cml_numbers}+`)\r\n                            break\r\n                        case \"押付け\":\r\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue,100).toString()+\"\\r\\nA\"+cml_numbers+\"=\"+getPulseValue(dousa[2][1], tanniValue,1000).toString()+\"\\r\\nP\"+cml_numbers+\"=\"+getPulseValue(dousa[2][2], tanniValue).toString()+\"\\r\\n\"\r\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},Q${cml_numbers}`)\r\n                            break\r\n                        case \"押付け+\":\r\n                            every_data_teigi += \"S\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue,100).toString()+\"\\r\\nA\"+cml_numbers+\"=\"+getPulseValue(dousa[2][1], tanniValue,1000).toString()+\"\\r\\nP\"+cml_numbers+\"=\"+getPulseValue(dousa[2][2], tanniValue).toString()+\"\\r\\n\"\r\n                            dousa_jikkou_row_arr.push(`S${cml_numbers},A${cml_numbers},Q${cml_numbers}+`)\r\n                            break\r\n                        case \"タイマ\":\r\n                            every_data_teigi += \"T\"+cml_numbers+\"=\"+getPulseValue(dousa[2][0], tanniValue).toString()+\"\\r\\n\"\r\n                            dousa_jikkou_row_arr.push(`T${cml_numbers}`)\r\n                            break\r\n                        case \"入力点からの実行\":\r\n                            isNyuryokuShingou = true\r\n                            break\r\n                        case \"出力点1へ出力\":\r\n                            shuturyoku_row += \"O1.1\\r\\n\"\r\n                            containsShuturyoku1 = true\r\n                            // if (!containsShuturyoku1) {\r\n                            //     shuturyoku_row += \"O1.1\\r\\n\"\r\n                            //     containsShuturyoku1 = true\r\n                            // } else {\r\n                            //     alert('エラー: 表を直してください\\n出力点1への出力は1回しか使えません。')\r\n                            // }\r\n                            break  \r\n                        case \"出力点2へ出力\":\r\n                            shuturyoku_row += \"O2.1\\r\\n\"\r\n                            containsShuturyoku2 = true\r\n                            // if (!containsShuturyoku2) {\r\n                            //     shuturyoku_row += \"O2.1\\r\\n\"\r\n                            //     containsShuturyoku2 = true\r\n                            // } else {\r\n                            //     alert('エラー: 表を直してください\\n出力点2への出力は1回しか使えません。')\r\n                            // }\r\n                            break\r\n                        case \"出力点3へ出力\":\r\n                            shuturyoku_row += \"O3.1\\r\\n\"\r\n                            containsShuturyoku3 = true\r\n                            // if (!containsShuturyoku3) {\r\n                            //     shuturyoku_row += \"O3.1\\r\\n\"\r\n                            //     containsShuturyoku3 = true\r\n                            // } else {\r\n                            //     alert('エラー: 表を直してください\\n出力点3への出力は1回しか使えません。')\r\n                            // }\r\n                            break\r\n                        case \"出力点を全てOFF\":\r\n                            every_program_teigi += \"F1.1,F2.1,F3.1\\r\\n\"\r\n                            containsShuturyokuOff = true\r\n                            // if (!containsShuturyokuOff) {\r\n                            //     every_program_teigi += \"F1.1,F2.1,F3.1\\r\\n\"\r\n                            //     containsShuturyokuOff = true\r\n                            // } else {\r\n                            //     alert('エラー: 表を直してください\\n出力点を全てOFFは1回しか使えません。')\r\n                            // }\r\n                            break   \r\n                        case \"原点復帰\":\r\n                            gentenfukki += \"|.\" + dousa_jiku.toString() + \"\\r\\n\"\r\n                            console.log(\"hi\")\r\n                            break    \r\n                        default:\r\n                            alert('ERROR-表を直してください')\r\n                            break\r\n                    }\r\n                }\r\n            }\r\n            let loop_start = \"\"\r\n            let loop_end = \"\"\r\n            for (let loop of loopData) {\r\n                if (loop[0][0] === programData.indexOf(dousa_group).toString() && loop[0][1] === dousa_group.indexOf(dousa_row).toString()) {\r\n                    loop_start = `X${loop[2]}.1\\r\\n`\r\n                }\r\n                if (loop[1][0] === programData.indexOf(dousa_group).toString() && loop[1][1] === dousa_group.indexOf(dousa_row).toString()) {\r\n                    loop_end = `X.1-\\r\\n`\r\n                }\r\n            }\r\n            if (dousa_jikkou_row_arr.length >= 1) {\r\n                dousa_jikkou_of_group += loop_start + dousa_jikkou_row_arr.join(\",\") + \"\\r\\n\" + shuturyoku_row + gentenfukki + loop_end\r\n            } else {\r\n                dousa_jikkou_of_group += loop_start + shuturyoku_row + gentenfukki + loop_end\r\n            }\r\n        }\r\n        every_program_teigi += dousa_jikkou_of_group\r\n    }\r\n\r\n    let settingsCML = \"\"\r\n    const jikuNum = programData[0][0].length\r\n\r\n    // 分解能のK値設定\r\n    const bunkainouValueList = [300, 600, 1000, 1200, 2000, 3000, 5000, 6000, 10000, 12000]\r\n    let bunkainouCML = 0\r\n    if ((typeof tkData[0][\"bunkai\"]) === \"string\") {\r\n        bunkainouCML = bunkainouValueList.indexOf(parseInt(tkData[0][\"bunkai\"])).toString()\r\n    } else {\r\n        bunkainouCML = bunkainouValueList.indexOf(tkData[0][\"bunkai\"]).toString()\r\n    }\r\n    for (let i=1; i<=jikuNum; i++) {\r\n        settingsCML += (\"K1.\"+i.toString()+\"=\"+bunkainouCML+\"\\r\\n\")\r\n    }\r\n\r\n\r\n    const allKNumList = [\r\n        2, 3, 4, 5, 7, 11, 12, 13, 14, 22, 23, 24, 25, 26, 27, 28, 30, 43, 44, 45, 46, 47, 53, 55, 56, 57, 65, 71, 74, 81, 82\r\n    ]\r\n\r\n    // 設定のK値設定\r\n    const kNumList = [5, 11, 12, 13, 14, 22, 23, 24, 25, 26, 28]\r\n    // 毎回設定されるK値\r\n    const constantKNumList = [[2, \"0\"], [3, \"1\"], [4, \"0\"], [7, \"0\"], [27, \"0\"], [30, \"0\"], [43, \"0000\"], [44, \"0\"], [45, \"0\"], [46, \"0\"], [47, \"0\"], [53, \"111\"], [55, \"0\"], [56, \"0\"], [57, \"0\"], [65, \"0\"], [71, \"0\"], [74, \"0\"], [81, \"1\"], [82, \"1\"]]\r\n    \r\n\r\n    for (let kNum of allKNumList) {\r\n        if (kNumList.includes(kNum)) {\r\n            for (let i=1; i<=jikuNum; i++) {\r\n                const value = settings[\"kNum\"+kNum.toString()]\r\n                if (typeof value !== 'string') {\r\n                    settingsCML += (\"K\"+kNum.toString()+\".\"+i.toString()+\"=\"+value.toString()+\"\\r\\n\")\r\n                } else {\r\n                    settingsCML += (\"K\"+kNum.toString()+\".\"+i.toString()+\"=\"+value+\"\\r\\n\")\r\n                }\r\n            }\r\n        } else {\r\n            for (let itemInConstants of constantKNumList) {\r\n                if (itemInConstants[0] === kNum) {\r\n                    for (let i=1; i<=jikuNum; i++) {\r\n                        settingsCML += (\"K\"+itemInConstants[0].toString()+\".\"+i.toString()+\"=\"+itemInConstants[1]+\"\\r\\n\")\r\n                    }\r\n                    break\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    \r\n    output += every_data_teigi\r\n    output += every_program_teigi\r\n    let nyuryokuTxt = `L1.1\\r\\nI1.1,JL2.1,T0.1\\r\\nI2.1,JL3.1,T0.1\\r\\nI3.1,JL4.1,T0.1\\r\\nI4.1,].1:].1,T0.1\\r\\nL2.1\\r\\n[1.1\\r\\nI1.1,W0.1,JL1.1\\r\\nL3.1\\r\\n[2.1\\r\\nI2.1,W0.1,JL1.1\\r\\nL4.1\\r\\n[3.1\\r\\nI3.1,W0.1,JL1.1\\r\\nEND.1\\r\\n`\r\n    return output + \"END.1\\r\\n\" + nyuryokuTxt + settingsCML + \"\\\\\" + \"\\r\\n$.\" + \"\\r\\n\"\r\n}\r\n\r\nconst getPulseValue = (valueArr, tanniValue, divideVar=1) => {\r\n    let value = parseFloat(valueArr[0])\r\n    const tanni = valueArr[1]\r\n    if (tanni.includes(\"pps\") || tanni.includes(\"%\") || tanni.includes('msec') || tanni.includes('Pulse')) {\r\n        return Math.round(value)\r\n    } else {\r\n        return Math.round(value * tanniValue / divideVar)\r\n    }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/決定、ボタン押下38.47b42841.mp3\";","export default __webpack_public_path__ + \"static/media/決定、ボタン押下44.6471b8fa.mp3\";","function str2ab(str) {\r\n    var buf = new ArrayBuffer(str.length * 2); // 2 bytes for each char\r\n    var bufView = new Uint16Array(buf);\r\n    for (var i = 0, strLen = str.length; i < strLen; i++) {\r\n        bufView[i] = str.charCodeAt(i);\r\n    }\r\n    return buf;\r\n}\r\n\r\nfunction delay(time) {\r\n  return new Promise(resolve => setTimeout(resolve, time));\r\n}\r\n\r\nexport async function pressRun (cml) {\r\n    // const port = await navigator.serial.requestPort();\r\n    // await port.open({ baudRate: 38400 });\r\n    // let writer = await port.writable.getWriter();\r\n    // await writer.write(str2ab('S.1=100\\r\\n'));\r\n    // await writer.releaseLock();\r\n    // writer = await port.writable.getWriter();\r\n    // await writer.write(str2ab('A.1=100\\r\\n'));\r\n    // await writer.releaseLock();\r\n    // writer = await port.writable.getWriter();\r\n    // await writer.write(str2ab('P.1=100000\\r\\n'));\r\n    // await writer.releaseLock();\r\n    // writer = await port.writable.getWriter();\r\n    // await writer.write(str2ab('^.1\\r\\n'));\r\n    // await writer.releaseLock();\r\n    // // ==============\r\n    // // await writer.write(str2ab('P.1=0\\r\\n'));\r\n    // // await writer.write(str2ab('^.1\\r\\n'));\r\n    // // await writer.releaseLock();\r\n    // await port.close();\r\n\r\n    let cmlChunkList = cml.split('\\n')\r\n    \r\n    const port = await navigator.serial.requestPort();\r\n    await port.open({ baudRate: 38400 });\r\n    for (let cmlChunk of cmlChunkList) {\r\n        let editedCmlChunk = cmlChunk.replace(/[\\n\\r]+/g, '');\r\n        editedCmlChunk = editedCmlChunk.replace(/\\s+/g, '');\r\n        if (editedCmlChunk.length > 0) {\r\n            const writer = await port.writable.getWriter();\r\n            await writer.write(str2ab(editedCmlChunk + '\\r\\n'));\r\n            await writer.releaseLock();\r\n        }\r\n    }\r\n    // const writer = await port.writable.getWriter();\r\n    // await writer.write(str2ab('[1.1\\r\\n'));\r\n    // await writer.releaseLock();\r\n    await delay(500);\r\n    await port.close();\r\n}\r\n\r\nexport async function send () {\r\n\r\n    const port = await navigator.serial.requestPort();\r\n    await port.open({ baudRate: 38400 });\r\n    const writer = await port.writable.getWriter();\r\n    await writer.write(str2ab('[1.1' + '\\r\\n'));\r\n    // console.log('[1.1\\r\\n');\r\n    await writer.releaseLock();\r\n    await port.close();\r\n}\r\n\r\nexport async function stop() {\r\n    const port = await navigator.serial.requestPort();\r\n    await port.open({ baudRate: 38400 });\r\n    const writer = port.writable.getWriter();\r\n    // await writer.write(str2ab('].1' + '\\r\\n'));\r\n    // await writer.write(str2ab(']L' + '\\r\\n'));\r\n    await writer.write(str2ab('L1.1' + '\\r\\n'));\r\n    await writer.write(str2ab('END.1' + '\\r\\n'));\r\n    await writer.write(str2ab('$.1' + '\\r\\n'));\r\n    writer.releaseLock();\r\n    await port.close();\r\n}\r\n","import React, { useRef, useState } from 'react'\r\nimport { Button } from '@mui/material';\r\nimport { toCML } from '../toCml';\r\nimport soundfile1 from '../sounds/決定、ボタン押下38.mp3'\r\nimport soundfile2 from '../sounds/決定、ボタン押下44.mp3'\r\nimport { pressRun, stop } from '../serialPort';\r\n\r\nexport const ProgramBlockEng = (props) => {\r\n    const addRowRef = useRef()\r\n    const pgEmptyBox = useRef()\r\n\r\n    const [dousaNumArr, setDousaNumArr] = useState([1,0,0,0,0,0,0,0,0,0,0,0,0,0,0])\r\n    const [timerNumArr, setTimerNumArr] = useState([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0])\r\n\r\n    const trashInput = (e, programData, setProgramData) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...programData]\r\n        tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])] = []\r\n        setProgramData(tmp) \r\n    }\r\n\r\n    const trashLoop = (e, loopData, setLoopData) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...loopData]\r\n        let index = -1\r\n        tmp.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\r\n                index = tmp.indexOf(loop)\r\n            }\r\n        })\r\n        if (index !== -1) {\r\n            tmp.splice(index, 1);\r\n        }\r\n        setLoopData(tmp) \r\n    }\r\n\r\n    const trashRow = (e, programData, setProgramData, loopData, setLoopData) => {\r\n        const indexArr = e.currentTarget.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...programData]\r\n        if (tmp[parseFloat(indexArr[0])].length > 1) {\r\n            tmp[parseFloat(indexArr[0])].splice(parseFloat(indexArr[1]), 1);        \r\n        } else {\r\n            let emptyRow = []\r\n            let i = 1\r\n            while (i <= props.jiku) {\r\n                emptyRow.push([])\r\n                i += 1\r\n            }\r\n            tmp[parseFloat(indexArr[0])] = [emptyRow]\r\n        }\r\n        // ------------------------------------\r\n        // --\r\n        let tmpLoop = [...loopData]\r\n        tmpLoop.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\r\n                if (loop[1][1] === loop[0][1]) {\r\n                    tmpLoop.splice(tmpLoop.indexOf(loop), 1);\r\n                }\r\n            } else if (loop[1][0] === indexArr[0] && loop[1][1] === indexArr[1]) {\r\n                loop[1] = [indexArr[0], (parseFloat(indexArr[1])-1).toString()]\r\n            }\r\n        })\r\n\r\n        tmpLoop.forEach(loop => {\r\n            if ((programData[parseFloat(loop[0][0])].length - 1) < (loop[1][1] - parseFloat(loop[0][1]))) {\r\n                loop[1][1] = (parseFloat(loop[1][1])-1).toString()\r\n            }\r\n        })\r\n\r\n        setProgramData(tmp)\r\n        setLoopData(tmpLoop) \r\n    }\r\n\r\n    const trashGroup = (e, programData, setProgramData, loopData, setLoopData) => {\r\n        const indexArr = e.target.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...programData]\r\n        if (tmp.length > 1) {\r\n            tmp.splice(parseFloat(indexArr[0]), 1);\r\n        } else {\r\n            tmp = [[[]]]\r\n            let i = 1\r\n            while (i <= props.jiku) {\r\n                tmp[0][0].push([])\r\n                i += 1\r\n            }\r\n        }\r\n        // --\r\n        let tmpLoop = [...loopData]\r\n        tmpLoop.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0]) {\r\n                indexArr.push(tmpLoop.indexOf(loop))\r\n            }\r\n        })\r\n        let i = tmpLoop.length\r\n        while (i--) {\r\n            if (tmpLoop[i][0][0] === indexArr[0]) {\r\n                tmpLoop.splice(i, 1)\r\n            }\r\n        }\r\n        setProgramData(tmp)\r\n        setLoopData(tmpLoop) \r\n    }\r\n\r\n    const trashJiku = (e) => {\r\n        const indexArr = e.currentTarget.parentNode.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        const index = parseFloat(indexArr[0]) - 1\r\n        let tmp = [...props.programData]\r\n        if (props.jiku > 1) {\r\n            for (let dousa_group of tmp) {\r\n                for (let dousa_row of dousa_group) {\r\n                    dousa_row.splice(index, 1)\r\n                }\r\n            }\r\n            props.setJiku(props.jiku - 1)\r\n            let tkTmp = [...props.tkData]\r\n            if (index > -1) {\r\n                tkTmp.splice(index, 1)\r\n            }\r\n            props.setTkData(tkTmp)\r\n        } else {\r\n            tmp = [[[[]]]]\r\n            props.setLoopData([])\r\n        }\r\n        props.setProgramData(tmp)\r\n    }\r\n\r\n    const addRow = (e) => {\r\n        const indexArr = e.currentTarget.id.split('-')\r\n        indexArr.shift()\r\n        let emptyRow = []\r\n        let i = 0\r\n        while (i <= props.jiku-1) {\r\n            emptyRow.push([])\r\n            i += 1\r\n        }\r\n        let tmp = [...props.programData]\r\n        tmp[parseFloat(indexArr[0])].splice(parseFloat(indexArr[1]), 0, emptyRow)\r\n        props.setProgramData(tmp) \r\n    }\r\n\r\n    const addJiku = (e) => {\r\n        if (props.jiku <= 14) {\r\n            const indexArr = e.currentTarget.id.split('-')\r\n            indexArr.shift()\r\n            let tmp = [...props.programData]\r\n            for (let dousa_group of tmp) {\r\n                for (let dousa_row of dousa_group) {\r\n                    dousa_row.splice(parseFloat(indexArr[0])-1, 0, [])\r\n                }\r\n            }\r\n            props.setProgramData(tmp) \r\n            let tkTmp = [...props.tkData]\r\n            tkTmp.push({kikou: \"initial\", susumiryou: [1,1], gensoku: [1,1], bunkai: \"1000\", tanniValue:1})\r\n            props.setTkData(tkTmp) \r\n            props.setJiku(props.jiku + 1)\r\n        } else {\r\n            alert(\"Maximum axis number is 15\")\r\n        }\r\n    }\r\n\r\n    const moveRow = (e, direction) => {\r\n        const indexArr = e.currentTarget.parentNode.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.programData]\r\n        const dousaGroup = tmp[parseFloat(indexArr[0])]\r\n        const rowIndex = parseFloat(indexArr[1])\r\n        switch (direction) {\r\n            case \"up\":\r\n                if (rowIndex >= 1) {\r\n                    [dousaGroup[rowIndex-1], dousaGroup[rowIndex]] = [dousaGroup[rowIndex], dousaGroup[rowIndex-1]]\r\n                }\r\n                break\r\n            case \"down\":\r\n                if (rowIndex < dousaGroup.length-1) {\r\n                    [dousaGroup[rowIndex+1], dousaGroup[rowIndex]] = [dousaGroup[rowIndex], dousaGroup[rowIndex+1]]\r\n                }\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        props.setProgramData(tmp)\r\n    }\r\n\r\n    const moveJiku = (e, direction) => {\r\n        const indexArr = e.currentTarget.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let current_jiku = parseFloat(indexArr[0])\r\n        let tmp = [...props.programData]\r\n        let tkTmp = [...props.tkData]\r\n        switch (direction) {\r\n            case \"left\":\r\n                if (current_jiku !== 1) {\r\n                    for (let dousa_group of tmp) {\r\n                        for (let dousa_row of dousa_group) {\r\n                            let tmp_dousa = [...dousa_row[current_jiku-1]]\r\n                            dousa_row[current_jiku-1] = [...dousa_row[current_jiku-2]]\r\n                            dousa_row[current_jiku-2] = tmp_dousa\r\n                        }\r\n                    }\r\n                    let tmp_tk_item = tkTmp[current_jiku-1]\r\n                    tkTmp[current_jiku-1] = tkTmp[current_jiku-2]\r\n                    tkTmp[current_jiku-2] = tmp_tk_item\r\n                } \r\n                break\r\n            case \"right\":\r\n                if (current_jiku !== props.jiku) {\r\n                    for (let dousa_group of tmp) {\r\n                        for (let dousa_row of dousa_group) {\r\n                            let tmp_dousa = [...dousa_row[current_jiku-1]]\r\n                            dousa_row[current_jiku-1] = [...dousa_row[current_jiku]]\r\n                            dousa_row[current_jiku] = tmp_dousa\r\n                        }\r\n                    }\r\n                    let tmp_tk_item = tkTmp[current_jiku-1]\r\n                    tkTmp[current_jiku-1] = tkTmp[current_jiku]\r\n                    tkTmp[current_jiku] = tmp_tk_item\r\n                }\r\n                break\r\n            default:\r\n                break\r\n        }\r\n        props.setTkData(tkTmp) \r\n        props.setProgramData(tmp)\r\n    }\r\n\r\n    const showTypeData = (isLoop, parentId, jiku, dousaType, dousaNum) => {\r\n        if (isLoop) {\r\n            props.setLoopInputObj([parentId, false])\r\n            props.setInputBoxType(\"loop\")\r\n        } else if (!dousaType.includes('出力点') && !dousaType.includes('原点復帰')) {\r\n            const typeDataObj = [jiku, parentId, dousaType, dousaNum, false]\r\n            props.setTypeDataObj(typeDataObj)\r\n            props.setInputBoxType(\"typedata\")\r\n        }\r\n    }\r\n\r\n    // Drag Functions\r\n    const emptyBoxDragStart = (e) => {\r\n        // e.currentTarget.className += \"dousa-box\"\r\n        // setTimeout(() => (e.currentTarget.className = 'dragged-box'), 0);\r\n        // e.currentTarget.style.cursor = \"grabbing\"\r\n    }\r\n    \r\n    const emptyBoxDragEnd = (e) => {\r\n        e.currentTarget.className = \"dousa-box\"\r\n        e.currentTarget.style.cursor = \"grab\"\r\n    }\r\n\r\n    function emptyBoxDragOver(e) {\r\n        if (props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\") {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    function emptyBoxDragEnter(e) {\r\n        if (props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\") {\r\n            e.preventDefault();\r\n            e.target.className += ' pg-empty-hovered';\r\n        }\r\n    }\r\n\r\n    function emptyBoxDragLeave(e) {\r\n        e.target.className = 'pg-empty-box';\r\n    }\r\n\r\n    function emptyBoxDragDrop(e) {\r\n        const indexArr = e.target.id.split('-')\r\n            indexArr.shift()\r\n            let tmp = [...props.programData]\r\n            let audio = new Audio(soundfile2);\r\n            if (props.currentDraggedCommand !== \"タイマ\" && props.currentDraggedCommand !== \"繰り返し\" && props.currentDraggedCommand !== \"動作グループを追加\" && props.currentDraggedCommand !== \"NOPE\" && !props.currentDraggedCommand.includes(\"-\")) {\r\n                tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])] = [props.currentDraggedCommand, dousaNumArr[parseFloat(indexArr[2])]+1, [[\"Enter value\", \"pps\"], [\"Enter value\", \"pps\"], [\"Enter value\", \"pps\"]]]\r\n                let tmpDousaNumArr = [...dousaNumArr]\r\n                tmpDousaNumArr[parseFloat(indexArr[2])] += 1\r\n                setDousaNumArr(tmpDousaNumArr)\r\n                props.setProgramData(tmp)\r\n                if (!props.isMute) {\r\n                    audio.play();\r\n                }\r\n            } else if (props.currentDraggedCommand == \"タイマ\") {\r\n                if (timerNumArr[parseFloat(indexArr[2])] > 14) {\r\n                    alert(\"タイマは15個までしか設定できません。\")\r\n                } else {\r\n                    tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])] = [props.currentDraggedCommand, timerNumArr[parseFloat(indexArr[2])]+1, [[\"Enter value\", \"pps\"], [\"Enter value\", \"pps\"], [\"Enter value\", \"pps\"]]]\r\n                    let tmpTimerNumArr = [...timerNumArr]\r\n                    tmpTimerNumArr[parseFloat(indexArr[2])] += 1\r\n                    setTimerNumArr(tmpTimerNumArr)\r\n                    props.setProgramData(tmp)\r\n                    if (!props.isMute) {\r\n                        audio.play();\r\n                    }\r\n                }\r\n            } else if (props.currentDraggedCommand.includes(\"-\")) {\r\n                let draggedIndexArr = props.currentDraggedCommand.split(\"-\")\r\n                draggedIndexArr.shift()\r\n                tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])] = tmp[parseFloat(draggedIndexArr[0])][parseFloat(draggedIndexArr[1])][parseFloat(draggedIndexArr[2])]\r\n                tmp[parseFloat(draggedIndexArr[0])][parseFloat(draggedIndexArr[1])][parseFloat(draggedIndexArr[2])] = []\r\n                props.setProgramData(tmp)\r\n                if (!props.isMute) {\r\n                    audio.play();\r\n                }\r\n            }\r\n    }\r\n    // -------\r\n    function emptyBoxLoopDragOver(e) {\r\n        if (props.currentDraggedCommand === \"繰り返し\") {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    function emptyBoxLoopDragEnter(e) {\r\n        if (props.currentDraggedCommand === \"繰り返し\") {\r\n            e.preventDefault();\r\n            e.target.className += ' pg-l-empty-loop-hovered';\r\n        }\r\n    }\r\n\r\n    function emptyBoxLoopDragLeave(e) {\r\n        e.target.className = 'pg-l-empty-loop';\r\n    }\r\n\r\n    function emptyBoxLoopDragDrop(e) {\r\n        const indexArr = e.target.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.loopData]\r\n        if (props.currentDraggedCommand === \"繰り返し\") {\r\n            tmp.push([[indexArr[0], indexArr[1]], [indexArr[0], indexArr[1]], 2])\r\n            props.setLoopData(tmp)\r\n            if (!props.isMute) {\r\n                let audio = new Audio(soundfile2);\r\n                audio.play();\r\n            }\r\n        } \r\n    }\r\n\r\n    const resizeLoop = (e, direction) => {\r\n        const indexArr = e.currentTarget.parentNode.parentNode.id.split('-')\r\n        indexArr.shift()\r\n        let tmp = [...props.loopData]\r\n        let mainItemIndex\r\n        tmp.forEach(loop => {\r\n            if (loop[0][0] === indexArr[0] && loop[0][1] === indexArr[1]) {\r\n                mainItemIndex = tmp.indexOf(loop)\r\n            }\r\n        })\r\n        let isDirectionAvailable = true\r\n        switch(direction) {\r\n            case \"top-up\":\r\n                tmp.forEach(loop => {\r\n                    if ((tmp.indexOf(loop) !== mainItemIndex) && (\r\n                        loop[1][0] === tmp[mainItemIndex][0][0] && \r\n                        parseFloat(loop[1][1]) === parseFloat(tmp[mainItemIndex][0][1])-1)\r\n                    ) {\r\n                        isDirectionAvailable = false\r\n                    }\r\n                })\r\n                if (isDirectionAvailable && parseFloat(tmp[mainItemIndex][0][1]) >= 1) {\r\n                    tmp[mainItemIndex][0][1] = (parseFloat(tmp[mainItemIndex][0][1]) - 1).toString()\r\n                }\r\n                break\r\n            case \"top-down\":\r\n                if (tmp[mainItemIndex][0][1] !== tmp[mainItemIndex][1][1]) {\r\n                    tmp[mainItemIndex][0][1] = (parseFloat(tmp[mainItemIndex][0][1]) + 1).toString()\r\n                }\r\n                break\r\n            case \"bottom-up\":\r\n                if (tmp[mainItemIndex][0][1] !== tmp[mainItemIndex][1][1]) {\r\n                    tmp[mainItemIndex][1][1] = (parseFloat(tmp[mainItemIndex][1][1]) - 1).toString()\r\n                }\r\n                break\r\n            case \"bottom-down\":\r\n                for (let loop of tmp) {\r\n                    if ((tmp.indexOf(loop) !== mainItemIndex) && (\r\n                        parseFloat(loop[0][0]) === parseFloat(tmp[mainItemIndex][1][0]) && \r\n                        parseFloat(loop[0][1]) === parseFloat(tmp[mainItemIndex][1][1])+1)\r\n                    ) {\r\n                        isDirectionAvailable = false\r\n                    }\r\n                }\r\n                let rowLength = props.programData[tmp[mainItemIndex][1][0]].length\r\n                if (isDirectionAvailable && parseFloat(tmp[mainItemIndex][1][1]) < (rowLength - 1)) {\r\n                    tmp[mainItemIndex][1][1] = (parseFloat(tmp[mainItemIndex][1][1]) + 1).toString()\r\n                }\r\n                break\r\n            default:\r\n                break \r\n        }\r\n        props.setLoopData(tmp)\r\n    }\r\n    // -------\r\n    function addGroupDragOver(e) {\r\n        if (props.currentDraggedCommand === \"動作グループを追加\") {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    function addGroupDragEnter(e) {\r\n        e.currentTarget.style.height = \"30px\"\r\n        e.currentTarget.querySelector(\".add-row-plus-cont\").style.display = \"flex\"\r\n    }\r\n    \r\n    function addGroupDragLeave(e) {\r\n        e.currentTarget.style.height = \"0.2rem\"\r\n    }\r\n    \r\n    function addGroupDragDrop(e) {\r\n        let tmp = [...props.programData]\r\n        if (tmp.length <= 29) {\r\n\r\n            const indexArr = e.currentTarget.id.split('-')\r\n            indexArr.shift()\r\n            if (props.currentDraggedCommand === \"動作グループを追加\") {\r\n                let emptyGroup = [[]]\r\n                for (let z = 0; z < props.jiku; z++) emptyGroup[0].push([]);\r\n                tmp.splice((indexArr[0]+1), 0, emptyGroup); \r\n                props.setProgramData(tmp)\r\n            } \r\n            e.currentTarget.style.height = \"0.2rem\"\r\n        } else {\r\n            alert(\"Maximum motion group number is 30\")\r\n        }\r\n    }\r\n\r\n    const dousaBoxRef = useRef()\r\n\r\n    const dataToHTML = (programData) => {\r\n        let pg_l_arr = [<div className=\"pg-l-empty pglemp0\" key={\"first-pg-l-empty-box\"}></div>]\r\n        let main_grid = []\r\n        let jiku_i = 1\r\n        while (jiku_i <= props.jiku) {\r\n            const jiku_num = jiku_i\r\n            if (jiku_num === 1) {\r\n                main_grid.push(\r\n                <div className=\"jiku-number unselectable\" id={\"jiku-\"+jiku_num.toString()} key={\"jiku\"+jiku_num}>\r\n                    <div className=\"add-jiku-left\" id={\"addJiku-\"+jiku_num} onClick={(e) => addJiku(e)}>\r\n                        <div className=\"add-jiku-plus-cont\">\r\n                            <i className=\"fas fa-plus\"></i>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"add-jiku-right\" id={\"addJiku-\"+(jiku_num+1)} onClick={(e) => addJiku(e)}>\r\n                        <div className=\"add-jiku-plus-cont\">\r\n                            <i className=\"fas fa-plus\"></i>\r\n                        </div>\r\n                    </div>\r\n                    <i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i>\r\n                    <p>\r\n                        Axis #{jiku_num}<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i>\r\n                    </p>\r\n                    <i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i>\r\n                </div>)\r\n            } else if (jiku_num === 15) {\r\n                main_grid.push(<div className=\"jiku-number unselectable\" id={\"jiku-\"+jiku_num.toString()} key={\"jiku\"+jiku_num}><i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i><p>Axis #{jiku_num}<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i></p><i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i></div>)\r\n            } else {\r\n                main_grid.push(<div className=\"jiku-number unselectable\" id={\"jiku-\"+jiku_num.toString()} key={\"jiku\"+jiku_num}><div className=\"add-jiku-right\" id={\"addJiku-\"+(jiku_num+1)} onClick={(e) => addJiku(e)}><div className=\"add-jiku-plus-cont\"><i className=\"fas fa-plus\"></i></div></div><i className=\"fas fa-arrow-alt-circle-left move-jiku\" onClick={(e) => moveJiku(e, \"left\")}></i><p>Axis #{jiku_num}<i className=\"fas fa-trash trash-jiku\" onClick={(e) => trashJiku(e)}></i></p><i className=\"fas fa-arrow-alt-circle-right move-jiku\" onClick={(e) => moveJiku(e, \"right\")}></i></div>)\r\n            }\r\n            jiku_i += 1\r\n        }\r\n        main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-0firrrst\"}></div>)\r\n        main_grid.push(<div className=\"grid-line\" style={{gridColumn:\"1/\"+(props.jiku+1)}} key={\"first-grid-line-key\"}></div>)\r\n        main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-ggggllllliiinnneeee\"}></div>)\r\n        let dousa_group_i = 0\r\n        for (let dousa_group of programData) {\r\n            pg_l_arr.push(<div className=\"pg-l-empty pglempgroup\" key={\"pglempty\"+dousa_group_i}></div>)\r\n            main_grid.push(<div className=\"dousa-group-kaishi unselectable\" style={{gridColumn:\"1/\"+(props.jiku+1)}} key={\"dousagroup-\"+dousa_group_i} id={\"dousaGroup-\"+dousa_group_i}><p>Execution #{dousa_group_i+1}</p></div>)\r\n            main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-\"+dousa_group_i}></div>)\r\n            let dontPutEmp = []\r\n            let dousa_row_i = 0\r\n            for (let dousa_row of dousa_group) {\r\n                let loopCount\r\n                props.loopData.forEach(loop => {\r\n                    if (loop[0][0] === dousa_group_i.toString() && loop[0][1] === dousa_row_i.toString()) {\r\n                        loopCount = loop[2]\r\n                        let loopHeight = loop[1][1] - loop[0][1] + 1\r\n                        let loopStyleHeight = loopHeight * 2.3 + ((loopHeight-1) * (0.2 + 0.4))\r\n                        for (let z = 0; z < loopHeight; z++) dontPutEmp.push(\"loop\");\r\n                        let dragArrows = [<div className=\"loop-drag-top\" key={\"loopdragtop\"}><div onClick={(e) => resizeLoop(e, \"top-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div><div onClick={(e) => resizeLoop(e, \"top-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>,<div className=\"loop-drag-bottom\" key={\"loop-drag-bottom\"}><div onClick={(e) => resizeLoop(e, \"bottom-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div><div onClick={(e) => resizeLoop(e, \"bottom-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>]\r\n                        if (loop[0][1] === loop[1][1]) {\r\n                            dragArrows = [<div className=\"loop-drag-top\" key={\"loopdragtop\"}><div onClick={(e) => resizeLoop(e, \"top-up\")}><i className=\"fas fa-arrow-alt-circle-up\"></i></div></div>,<div className=\"loop-drag-bottom\" key={\"loop-drag-bottom\"}><div onClick={(e) => resizeLoop(e, \"bottom-down\")}><i className=\"fas fa-arrow-alt-circle-down\"></i></div></div>]\r\n                        }\r\n                        const loopId = \"loop-\"+dousa_group_i+\"-\"+dousa_row_i\r\n                        pg_l_arr.push(\r\n                        <div className=\"pg-l-loop unselectable\" style={{height:loopStyleHeight+\"rem\"}} id={loopId} key={\"pglloop\"+dousa_row}>\r\n                            {dragArrows.map(dragArrow => {return dragArrow})}\r\n                            <p className=\"loop-title\" onClick={() => showTypeData(true, loopId)}>Loop x {loopCount}</p>\r\n                            <i className=\"fas fa-trash trash-block\" onClick={(e) => trashLoop(e, props.loopData, props.setLoopData)}></i>\r\n                        </div>)\r\n                    }\r\n                })\r\n                if (dontPutEmp.length === 0) {\r\n                    pg_l_arr.push(<div className=\"pg-l-empty-loop\" id={\"emptyloop-\"+dousa_group_i+\"-\"+dousa_row_i} onDragOver={(e) => emptyBoxLoopDragOver(e)} onDragEnter={(e) => emptyBoxLoopDragEnter(e)} onDragLeave={(e) => emptyBoxLoopDragLeave(e)} onDrop={(e) => emptyBoxLoopDragDrop(e)} key={\"pglemploop-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                } else {\r\n                    dontPutEmp.shift()\r\n                }\r\n                if (dousa_row_i === 0) {\r\n                    main_grid.push(<div ref={addRowRef} key={\"addrow0\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-0\"} onClick={(e) => addRow(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1)}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\r\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRbox-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                }\r\n                let dousa_i = 0\r\n                for (let dousa of dousa_row) {\r\n                    if (dousa.length !== 0) {\r\n                        let noValueArr = []\r\n                        dousa[2].forEach(value => {if (value.includes(\"Enter value here\")) noValueArr.push(\"nope\")})\r\n                        const dousaId = \"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i\r\n                        const jikuOfDousa = dousa_i\r\n                        let dousaName = \"\"\r\n                        switch (dousa[0]) {\r\n                            case \"位置決め\":\r\n                                dousaName = \"PTP\"\r\n                                break\r\n                            case \"押付け\":\r\n                                dousaName = \"Push\"\r\n                                break\r\n                            case \"タイマ\":\r\n                                dousaName = \"Timer\"\r\n                                break\r\n                            case \"位置決め+\":\r\n                                dousaName = \"PTP+\"\r\n                                break\r\n                            case \"押付け+\":\r\n                                dousaName = \"Push+\"\r\n                                break\r\n                            case \"入力点からの実行\":\r\n                                dousaName = \"Exec.\"\r\n                                break\r\n                            case \"出力点1へ出力\":\r\n                                dousaName = \"Turn on OUT1\"    \r\n                                break\r\n                            case \"出力点2へ出力\":\r\n                                dousaName = \"Turn on OUT2\"    \r\n                                break\r\n                            case \"出力点3へ出力\":\r\n                                dousaName = \"Turn on OUT3\"    \r\n                                break\r\n                            case \"出力点を全てOFF\":\r\n                                dousaName = \"Turn off all outputs\"    \r\n                                break\r\n                            case \"原点復帰\":\r\n                                dousaName = \"Origin Detection\"\r\n                                break    \r\n                            default:\r\n                                dousaName = \"PTP\"\r\n                                break\r\n                        }\r\n                        if (noValueArr.length > 0 && (!dousa[0].includes(\"出力点\")) && (!dousa[0].includes(\"原点復帰\"))) {\r\n                            main_grid.push(<div ref={dousaBoxRef} className=\"dousa-box unselectable\" draggable=\"true\" onDragStart={(e) => emptyBoxDragStart(e)} onDragEnd={(e) => emptyBoxDragEnd(e)} onMouseEnter={(e) => props.setCurrentDraggedCommand(e.currentTarget.id)} key={dousa_group_i+\"dousabox\"+dousa_row_i+\"-\"+dousa_i} id={dousaId}><div className='no-value-circle'></div><p className='dousa-title' onClick={() => showTypeData(false, dousaId, jikuOfDousa, dousa[0], dousa[1])} >{dousaName}<span style={{marginRight:'0.2rem'}}></span>#{dousa[1]}</p><i className=\"fas fa-trash\" onClick={(e) => trashInput(e, props.programData, props.setProgramData)}></i></div>)\r\n                        } else {\r\n                            main_grid.push(<div ref={dousaBoxRef} className=\"dousa-box unselectable\" draggable=\"true\" onDragStart={(e) => emptyBoxDragStart(e)} onDragEnd={(e) => emptyBoxDragEnd(e)} onMouseEnter={(e) => props.setCurrentDraggedCommand(e.currentTarget.id)} key={dousa_group_i+\"dousabox\"+dousa_row_i+\"-\"+dousa_i} id={dousaId}><p className='dousa-title' onClick={() => showTypeData(false, dousaId, jikuOfDousa, dousa[0], dousa[1])} >{dousaName}<span style={{marginRight:'0.2rem'}}></span>{((dousa[0].includes(\"出力点\")) || (dousa[0].includes(\"原点復帰\")))? \"\" : \"#\"+dousa[1]}</p><i className=\"fas fa-trash\" onClick={(e) => trashInput(e, props.programData, props.setProgramData)}></i></div>)\r\n                        }\r\n                    } else {\r\n                        // main_grid.push(<div className=\"dousa-box\"></div>)\r\n                        main_grid.push(<div ref={pgEmptyBox} key={dousa_group_i+\"emptybox\"+dousa_row_i+\"-\"+dousa_i} onDragOver={(e) => emptyBoxDragOver(e)} onDragEnter={(e) => emptyBoxDragEnter(e)} onDragLeave={(e) => emptyBoxDragLeave(e)} onDrop={(e) => emptyBoxDragDrop(e)} className=\"pg-empty-box\" id={\"dousa-\"+dousa_group_i+\"-\"+dousa_row_i+\"-\"+dousa_i}></div>)\r\n                    } \r\n                    dousa_i += 1\r\n                }\r\n                main_grid.push(\r\n                    <div className=\"trash-row-right-box\" key={\"trashR-\"+dousa_group_i+\"-\"+dousa_row_i} id={\"trashRow-\"+dousa_group_i+\"-\"+(dousa_row_i)}>\r\n                        <i onClick={(e) => trashRow(e, props.programData, props.setProgramData, props.loopData, props.setLoopData)} className=\"fas fa-trash\"></i>\r\n                        <div className='move-row-cont'><i className='fas fa-arrow-alt-circle-up move-row-up' onClick={(e) => moveRow(e, \"up\")}></i><i className='fas fa-arrow-alt-circle-down move-row-down' onClick={(e) => moveRow(e, \"down\")}></i></div>\r\n                    </div>)\r\n                if (dousa_row_i !== (dousa_group.length-1)) {\r\n                    main_grid.push(<div ref={addRowRef} key={\"addrow\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-\"+(dousa_row_i+1)} onClick={(e) => addRow(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1)}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\r\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRboxaddR-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                } else {\r\n                    main_grid.push(<div ref={addRowRef} key={\"addrow\"+dousa_group_i+\"-\"+dousa_row_i} id={\"addRow-\"+dousa_group_i+\"-\"+(dousa_row_i+1)} onClick={(e) => addRow(e)} onDragOver={(e) => addGroupDragOver(e)} onDragEnter={(e) => addGroupDragEnter(e)} onDragLeave={(e) => addGroupDragLeave(e)} onDrop={(e) => addGroupDragDrop(e)} className=\"pg-add-row\" style={{gridColumn:\"1/\"+(props.jiku+1),height:\"0.4rem\"}}><div className=\"add-row-plus-cont\"><i className=\"fas fa-plus\"></i></div></div>)\r\n                    main_grid.push(<div className=\"empty-right-box\" key={\"empRboxaddR-\"+dousa_group_i+\"-\"+dousa_row_i}></div>)\r\n                }\r\n                dousa_row_i += 1\r\n            }\r\n            dousa_group_i += 1\r\n        }\r\n\r\n        return (\r\n            <div className=\"program-grid\">\r\n                <div className=\"pg-left\">{pg_l_arr}</div>\r\n                <div className=\"program-main-grid\" style={{gridTemplateColumns:\"repeat(\"+props.jiku+\", 3fr) 1fr\"}}>{main_grid}</div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    // initially have 動作グループ1\r\n    return(\r\n        <div className=\"program-block\">\r\n            {dataToHTML(props.programData)}\r\n            <div className=\"enter-button\">\r\n                {/* <Button variant=\"contained\" onClick={() => jikkou(props.popupRef)}>Write to Motor</Button> */}\r\n                {/* <div style={{height:10,width:30}}></div> */}\r\n                {/* <Button variant=\"contained\" onClick={() => stop()}>Stop</Button>\r\n                <div style={{height:10,width:30}}></div> */}\r\n                <Button color=\"primary\" variant=\"contained\" onClick={() => props.setCmlOutput(toCML(props.programData, props.loopData, props.isNyuryokuShingou, props.tkData, props.settings))}>Convert to CML</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const TypeDataInDousaEng = (props) => {\r\n    // let dousaType = props.dousaType\r\n    // let dousaNum = props.dousaNum\r\n    // let parentId = props.parentId\r\n    const popupRef = useRef()\r\n    const tkData = props.tkData\r\n    // --\r\n    let indexArr = props.parentId.split('-')\r\n    indexArr.shift()\r\n    const jikuNum = parseFloat(indexArr[2])\r\n    // -\r\n    let tmp = [...props.programData]\r\n    // --\r\n    const closeTypeData = () => {\r\n        props.setInputBoxType(\"none\")\r\n    }\r\n\r\n    let subTanni = \"initial\"\r\n    if (tkData[jikuNum].kikou !== \"initial\") {\r\n        if (tkData[jikuNum].kikou === \"インデックステーブル\") {\r\n            subTanni = \"°\"\r\n        } else {\r\n            subTanni = \"mm\"\r\n        }\r\n    }\r\n\r\n    const ichigimeData = {\r\n        bangouRange: 250,\r\n        inputForm: subTanni===\"initial\" ? [\r\n            [\"Speed Data\", [\"100pps\"], \"\"],\r\n            [\"Accel. Data\", [\"kpps\\u00b2\"], \"\"],\r\n            [\"Position Data\", [\"Pulse\"], \"\"],\r\n        ] : [\r\n            [\"Speed Data\", [subTanni+\"/s\", \"100pps\"], \"\"],\r\n            [\"Accel. Data\", [subTanni+\"/s\\u00b2\", \"kpps\\u00b2\"], \"\"],\r\n            [\"Position Data\", [subTanni, \"Pulse\"], \"\"],\r\n        ]\r\n    }\r\n    const incrementalIchigimeData = {\r\n        bangouRange: 250,\r\n        inputForm: subTanni===\"initial\" ? [\r\n            [\"Speed Data\", [\"100pps\"], \"\"],\r\n            [\"Accel. Data\", [\"kpps\\u00b2\"], \"\"],\r\n            [\"Position Data\", [\"Pulse\"], \"\"],\r\n        ] : [\r\n            [\"Speed Data\", [subTanni+\"/s\", \"100pps\"], \"\"],\r\n            [\"Accel. Data\", [subTanni+\"/s\\u00b2\", \"kpps\\u00b2\"], \"\"],\r\n            [\"Position Data\", [subTanni, \"Pulse\"], \"\"],\r\n        ]\r\n    }\r\n    const oshitukeData = {\r\n        bangouRange: 250,\r\n        inputForm: subTanni===\"initial\" ? [\r\n            [\"Speed Data\", [\"100pps\"], \"\"],\r\n            [\"Accel. Data\", [\"kpps\\u00b2\"], \"\"],\r\n            [\"Position Data\", [\"Pulse\"], \"\"],\r\n        ] : [\r\n            [\"Speed Data\", [subTanni+\"/s\", \"100pps\"], \"\"],\r\n            [\"Accel. Data\", [subTanni+\"/s\\u00b2\", \"kpps\\u00b2\"], \"\"],\r\n            [\"Position Data\", [subTanni, \"Pulse\"], \"\"],\r\n        ]\r\n    }\r\n    const incrementalOshitukeData = {\r\n        bangouRange: 250,\r\n        inputForm: subTanni===\"initial\" ? [\r\n            [\"Speed Data\", [\"100pps\"], \"\"],\r\n            [\"Accel. Data\", [\"kpps\\u00b2\"], \"\"],\r\n            [\"Position Data\", [\"Pulse\"], \"\"],\r\n        ] : [\r\n            [\"Speed Data\", [subTanni+\"/s\", \"100pps\"], \"\"],\r\n            [\"Accel. Data\", [subTanni+\"/s\\u00b2\", \"kpps\\u00b2\"], \"\"],\r\n            [\"Position Data\", [subTanni, \"Pulse\"], \"\"],\r\n        ]\r\n    }\r\n    const timerData = {\r\n        bangouRange: 5,\r\n        inputForm: [\r\n            [\"Timer Data\", [\"msec\"], \"\"],\r\n        ]\r\n    }\r\n\r\n    const nyuryokutenData = {\r\n        bangouRange: 4,\r\n    }\r\n\r\n    let dataFormat\r\n    switch(props.dousaType) {\r\n        case \"位置決め\":\r\n            dataFormat = ichigimeData\r\n            break\r\n        case \"押付け\":\r\n            dataFormat = oshitukeData\r\n            break\r\n        case \"タイマ\":\r\n            dataFormat = timerData\r\n            break\r\n        case \"位置決め+\":\r\n            dataFormat = incrementalIchigimeData\r\n            break\r\n        case \"押付け+\":\r\n            dataFormat = incrementalOshitukeData\r\n            break\r\n        case \"入力点からの実行\":\r\n            dataFormat = nyuryokutenData\r\n            break\r\n        default:\r\n            dataFormat = ichigimeData\r\n    }\r\n\r\n    const DousaInputBox = (props) => {\r\n        // props: dataFormat, numdropdown params\r\n        const dataFormat = props.dataFormat\r\n\r\n        const setTypeData = () => {\r\n            let isAllNumber = []\r\n            popupRef.current.querySelectorAll('.type-data-input').forEach(input => {\r\n                if (isNaN(parseFloat(input.value))) {\r\n                    isAllNumber.push(\"NAN\")\r\n                }\r\n            })\r\n            if (isAllNumber.length === 0) {\r\n                let tmp = [...props.programData]\r\n                let valueArr = []\r\n                let inputs = popupRef.current.querySelectorAll(\".type-data-input\")\r\n                let tanniSelectors = popupRef.current.querySelectorAll(\".select-tanni\")\r\n                let i = 0\r\n                while (i < inputs.length) {\r\n                    valueArr.push([inputs[i].value, tanniSelectors[i].value])\r\n                    i++\r\n                }\r\n                for (let dousa_group of tmp) {\r\n                    for (let dousa_row of dousa_group) {\r\n                        let dousa = dousa_row[props.jiku]\r\n                        if (dousa.length > 0) {\r\n                            // I don't get this code\r\n                            // if (props.dousaType !== (\"位置決め\"&&\"押付け\")) {\r\n                            // if (props.dousaType !== (\"位置決め\"||\"押付け\")) {\r\n                            //     if (dousa[1] === props.dousaNum && dousa[0] === props.dousaType) {\r\n                            //         dousa[2] = valueArr\r\n                            //     }\r\n                            // } else {\r\n                            //     if (dousa[1] === props.dousaNum) {\r\n                            //         dousa[2] = valueArr\r\n                            //     }\r\n                            // }\r\n                            if (dousa[1] === props.dousaNum && dousa[0] === props.dousaType) {\r\n                                dousa[2] = valueArr\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][2] = valueArr\r\n                props.setProgramData(tmp)\r\n                // --\r\n                closeTypeData()\r\n            } else {\r\n                isAllNumber = []\r\n                alert('Enter value here') \r\n            }\r\n        } \r\n    \r\n        return (\r\n            <div className=\"typeDataInDousa\" ref={popupRef}>\r\n                <div className=\"close-typedata\"><i onClick={() => closeTypeData()} className=\"fas fa-times-circle type-times-circle\"></i></div>\r\n                <div className='typedata-input-line' key={\"input-num-line\"}>\r\n                    <p className='typedata-var'>#</p>\r\n                    {\r\n                        props.dousaType === \"入力点からの実行\" ? \r\n                            <NumDropDown range={dataFormat.bangouRange} jiku={props.jiku} dousaType={props.dousaType} dousaNum={props.dousaNum} popupRef={props.popupRef} programData={props.programData} setProgramData={props.setProgramData} indexArr={props.indexArr}/>\r\n                            : <div className='current-num-container'><p className='current-num'>{ [...props.programData][parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][1] }</p></div>\r\n                    }\r\n                </div>\r\n                {\r\n                    props.dousaType === \"入力点からの実行\" ? <></>\r\n                    : dataFormat.inputForm.map(inputLine => {\r\n                        return (\r\n                            <div className=\"typedata-input-line\" key={inputLine[0]}>\r\n                                <p className=\"typedata-var\">{inputLine[0]}</p>\r\n                                <DataInput index={dataFormat.inputForm.indexOf(inputLine)} tanniArr={inputLine[1]} />\r\n                                <p>{inputLine[2]}</p>\r\n                            </div>\r\n                        )\r\n                    }) \r\n                }\r\n                <Button className=\"type-data-button\" variant=\"contained\" onClick={() => setTypeData()}>OK</Button>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const DataInput = (props) => {\r\n        // const data = [100, \"pps\"]\r\n        const index = props.index\r\n        const tanniArr = props.tanniArr\r\n        const [value, setValue] = useState(tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][2][index][0])\r\n        const [tanniState, setTanniState] = useState(tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][2][index][1])\r\n        // ---\r\n\r\n        return (\r\n            <>\r\n                {value.toString().includes('Enter value here') ? \r\n                    <input className=\"type-data-input\" required placeholder={value} onChange={(e) => setValue(e.target.value)} />\r\n                    // : <input className=\"type-data-input\" required value={value} onChange={(e) => setValue(e.target.value)} />\r\n                    : <input className=\"type-data-input\" required defaultValue={value} onChange={(e) => setValue(e.target.value)} />\r\n                }\r\n                <div className=\"type-data-tanni\">\r\n                    <select className='select-tanni' value={tanniState} onChange={(e) => setTanniState(e.target.value)} >\r\n                        { tanniArr.map(tanni => {\r\n                            return <option key={tanni} value={tanni}>{tanni}</option>\r\n                        }) }\r\n                    </select>\r\n                </div>\r\n            </>\r\n        )\r\n    }\r\n\r\n    return (<DousaInputBox dataFormat={dataFormat} jiku={props.jiku} dousaType={props.dousaType} dousaNum={props.dousaNum} popupRef={popupRef} programData={props.programData} setProgramData={props.setProgramData} indexArr={indexArr}/>)\r\n}\r\n\r\nexport const LoopInputBoxEng = (props) => {\r\n    // props: parentId, loopData, setLoopData\r\n    const popupRef = useRef()\r\n    let indexArr = props.parentId.split('-')\r\n    indexArr.shift()\r\n    const loopGroupIndex = indexArr[0]\r\n    const loopRowIndex = indexArr[1]\r\n    // --\r\n    let tmp = [...props.loopData]\r\n    let currentLoopIndexInList = 0;\r\n    for (let i=0; i<tmp.length; i++) {\r\n        let loopItem = tmp[i];\r\n        if (loopItem[0][0] == loopGroupIndex && loopItem[0][1] == loopRowIndex) {\r\n            currentLoopIndexInList = i;\r\n        }\r\n    } \r\n    const [value, setValue] = useState(tmp[currentLoopIndexInList][2])\r\n    // --\r\n    const closeTypeData = () => {\r\n        props.setInputBoxType(\"none\")\r\n    }\r\n\r\n    const setTypeData = () => {\r\n        let isAllNumber = []\r\n        if (isNaN(popupRef.current.querySelector('.type-data-input').value)) {\r\n                isAllNumber.push(\"NAN\")\r\n        }\r\n        if (isAllNumber.length === 0) {\r\n            let tmp = [...props.loopData]\r\n            let value = popupRef.current.querySelector(\".type-data-input\").value\r\n            tmp[currentLoopIndexInList][2] = value\r\n            props.setLoopData(tmp)\r\n            // --\r\n            closeTypeData()\r\n        } else {\r\n            isAllNumber = []\r\n            alert('Enter value here') \r\n        }\r\n    } \r\n\r\n    return (\r\n        <div className=\"typeDataInDousa\" ref={popupRef}>\r\n            <div className=\"close-typedata\"><i onClick={() => closeTypeData()} className=\"fas fa-times-circle type-times-circle\"></i></div>\r\n            <div className=\"typedata-input-line\">\r\n                <p>Loop</p>\r\n                <input className=\"type-data-input\" required value={value} onChange={(e) => setValue(e.target.value)} />\r\n                <p>times</p>\r\n            </div>\r\n            <Button className=\"type-data-button\" variant=\"contained\" onClick={() => setTypeData()}>OK</Button>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst NumDropDown = (props) => {\r\n    // props: programData, setProgramData, dataType, dataNum, popupRef, jiku, indexArr, range\r\n    const popupRef = props.popupRef\r\n    const indexArr = props.indexArr\r\n    let tmp = [...props.programData]\r\n    const [currentNum, setCurrentNum] = useState(tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][1])\r\n    const numItemRef = useRef()\r\n    const currentNumRef = useRef()\r\n    \r\n    const selectItem = (e) => {\r\n        const value = parseFloat(e.currentTarget.id.split(\"-\")[2])\r\n        setCurrentNum(value)\r\n        numItemRef.current.style.display = \"none\"\r\n        let sameDataArr = []\r\n        for (let dousa_group of tmp) {\r\n            for (let dousa_row of dousa_group) {\r\n                let dousa = dousa_row[props.jiku]\r\n                if (dousa[1] === value && dousa[0] === props.dousaType) {\r\n                    sameDataArr.push(dousa[2])\r\n                }\r\n            }\r\n        }\r\n        if (sameDataArr.length > 0) {\r\n            tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][2] = sameDataArr[0]\r\n            let inputs = popupRef.current.querySelectorAll(\".type-data-input\")\r\n            let tanniSelectors = popupRef.current.querySelectorAll(\".select-tanni\")\r\n            let i = 0\r\n            while (i < inputs.length) {\r\n                inputs[i].value = sameDataArr[0][i][0]\r\n                tanniSelectors[i].value = sameDataArr[0][i][1]\r\n                i++\r\n            }\r\n        }\r\n        tmp[parseFloat(indexArr[0])][parseFloat(indexArr[1])][parseFloat(indexArr[2])][1] = value\r\n        props.setProgramData(tmp)\r\n    }\r\n    const getNumItems = () => {\r\n        let res = []\r\n        let i = 1\r\n        while (i <= props.range) {\r\n            res.push(<div className='num-dropdown-item' key={i} id={\"num-dropdown-\"+i} onClick={(e) => selectItem(e)}><p>{i}</p></div>)\r\n            i += 1\r\n        }\r\n        return res\r\n    }\r\n    const showItems = () => {\r\n        let isItemsShown = numItemRef.current.style.display !== \"block\" ? false : true\r\n        if (!isItemsShown) {\r\n            numItemRef.current.style.display = \"block\"\r\n        } else {\r\n            numItemRef.current.style.display = \"none\"\r\n        }\r\n    }\r\n    return (\r\n        <div className='num-dropdown'>\r\n            <div className='currentNum-container' onClick={() => showItems()}><p ref={currentNumRef} className='currentNum'>{currentNum}</p><i className='fas fa-caret-down'></i></div>\r\n            <div ref={numItemRef} className='num-dropdown-item-container'>{getNumItems()}</div>\r\n        </div>\r\n    )\r\n}","import { useRef } from \"react\"\r\n\r\nexport const SettingInfo = ({ text }) => {\r\n\r\n    const textBoxRef = useRef()\r\n\r\n    const display = () => {\r\n        textBoxRef.current.classList.add(\"shown\")\r\n        textBoxRef.current.classList.remove(\"hidden\")\r\n        setTimeout(() => {\r\n            if (!textBoxRef.current.classList.contains(\"hidden\")) {\r\n                textBoxRef.current.style.display = \"block\"\r\n            }\r\n        }, 300)\r\n    }\r\n\r\n    const hide = () => {\r\n        textBoxRef.current.classList.remove('shown')\r\n        textBoxRef.current.classList.add('hidden')\r\n        textBoxRef.current.style.display = \"none\"\r\n    }\r\n\r\n    return (\r\n        <div className=\"settings-panel-item-info-container\" onMouseEnter={() => display()} onMouseLeave={() => hide()}>\r\n            <i className=\"fa-solid fa-circle-question settings-panel-item-info\"></i>\r\n            <div ref={textBoxRef} className='settings-panel-item-info-box'>\r\n                <p>{ text }</p>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { useState } from \"react\"\r\nimport { useRef } from \"react\"\r\n\r\nexport const SettingsDefaultInfo = ({ info }) => {\r\n\r\n    const textBoxRef = useRef()\r\n    const [isShown, setIsShown] = useState(false);\r\n\r\n    const display = () => {\r\n        setIsShown(true)\r\n        // textBoxRef.current.classList.add(\"shown\")\r\n        // textBoxRef.current.classList.remove(\"hidden\")\r\n        // textBoxRef.current.style.display = \"block\"\r\n    }\r\n\r\n    const hide = () => {\r\n        setIsShown(false)\r\n        // textBoxRef.current.classList.remove('shown')\r\n        // textBoxRef.current.classList.add('hidden')\r\n        // textBoxRef.current.style.display = \"none\"\r\n    }\r\n\r\n    const defaultValues = {\r\n        'kNum5': 5, 'kNum11': 0, 'kNum12': 30, 'kNum13': 200, 'kNum14': 0, 'kNum22': 0,\r\n        'kNum23': 10, 'kNum24': 10, 'kNum25': 1, 'kNum26': 0, 'kNum28': 30\r\n    }\r\n\r\n    const displayInfo = () => {\r\n        let infoList = []\r\n        for (let item of info[\"kyoutuu\"]) {\r\n            if (item[\"inputType\"] === \"text\") {\r\n                infoList.push(<p key={item[\"kNum\"]}>{item[\"kNum\"]}: {item[\"label\"]}: {defaultValues[\"kNum\"+item[\"kNum\"]]}</p>)\r\n            } else {\r\n                infoList.push(<p key={item[\"kNum\"]}>{item[\"kNum\"]}: {item[\"label\"]}: {item[\"inputs\"][defaultValues[\"kNum\"+item[\"kNum\"]]]}</p>)\r\n            }\r\n        }\r\n        for (let item of info[\"oshituke\"]) {\r\n            if (item[\"inputType\"] === \"text\") {\r\n                infoList.push(<p key={item[\"kNum\"]}>{item[\"kNum\"]}: {item[\"label\"]}: {defaultValues[\"kNum\"+item[\"kNum\"]]}</p>)\r\n            } else {\r\n                infoList.push(<p key={item[\"kNum\"]}>{item[\"kNum\"]}: {item[\"label\"]}: {item[\"inputs\"][defaultValues[\"kNum\"+item[\"kNum\"]]]}</p>)\r\n            }\r\n        }\r\n        for (let item of info[\"genten\"]) {\r\n            if (item[\"inputType\"] === \"text\") {\r\n                infoList.push(<p key={item[\"kNum\"]}>{item[\"kNum\"]}: {item[\"label\"]}: {defaultValues[\"kNum\"+item[\"kNum\"]]}</p>)\r\n            } else {\r\n                infoList.push(<p key={item[\"kNum\"]}>{item[\"kNum\"]}: {item[\"label\"]}: {item[\"inputs\"][defaultValues[\"kNum\"+item[\"kNum\"]]]}</p>)\r\n            }\r\n        }\r\n        return infoList\r\n    }\r\n\r\n    const constantValues = [\r\n        [2, \"100\"], [3, \"サーボオン\"], [4, \"CW 方向を正座標\"], [7, \"無効\"], [27, \"100\"], [30, \"無効\"], [43, \"0000\"], [44, \"汎用入力\"], \r\n        [45, \"汎用入力\"], [46, \"汎用入力\"], [47, \"汎用入力\"], [53, \"111\"], [55, \"汎用出力\"], [56, \"汎用出力\"], [57, \"汎用出力\"], [65, \"有効\"], \r\n        [71, \"38.4\"], [74, \"38.4\"], [81, \"1\"], [82, \"1\"]\r\n    ]\r\n    const constantNumNames = {\r\n        2:\"速度単位\",3:\"電源 ON 時のサーボ状態\",4:\"座標方向\",7:\"ソフトリミット設定\",27:\"原点オフセット距離単位\",\r\n        30:\"原点検出完了確認\",43:\"入力論理\",44:\"入力 1 機能選択\",45:\"入力 2 機能選択\",46:\"入力 3 機能選択\",\r\n        47:\"入力 4 機能選択\",53:\"出力論理\",55:\"出力 1 機能選択\",56:\"出力 2 機能選択\",57:\"出力 3 機能選択\",\r\n        65:\"ステータス LED\",71:\"通信ボーレート\",74:\"スレーブ間通信ボーレート\",\r\n        81:\"電源 ON 時に実行されるロジックバンク No\", 82:\"ロジックバンクの実行周期\"\r\n    }\r\n\r\n    const displayConstants = () => {\r\n        let infoList = []\r\n        for (let item of constantValues) {\r\n            infoList.push(<p key={item[0]}>{item[0]}: {constantNumNames[item[0]]}: {item[1]}</p>)\r\n        }\r\n        return infoList\r\n    }\r\n\r\n    return (\r\n        <div className=\"settings-panel-default-info-container\">\r\n            <i id=\"openDefaultValues\" onClick={() => display()} className=\"fa-solid fa-circle-question settings-panel-item-info\"></i>\r\n            <div ref={textBoxRef} style={{display: isShown?\"block\":\"none\"}} className='settings-panel-default-info-box'>\r\n                <div id=\"closeKNumDefaultInfo\" className=\"close-default\" onClick={() => hide()}><i className=\"fas fa-times\"></i></div>\r\n                <div>k値: 名前: デフォルト値</div>\r\n                <div style={{marginTop: \"10px\"}}></div>\r\n                <div>{ displayInfo() }</div>\r\n                <div style={{marginTop: \"30px\"}}></div>\r\n                <div style={{opacity:\"0.8\"}}>{displayConstants()}</div>\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { Button } from '@mui/material'\r\nimport { useState, useRef, useEffect } from 'react'\r\nimport { SettingInfo } from './settingInfo'\r\nimport { SettingsDefaultInfo } from './settingsDefaultInfo'\r\nimport './settingsPanel.css'\r\n\r\n\r\nexport const SettingsPanel = ({ closePanel, settings, setSettings }) => {\r\n\r\n    const settingsPanelData = {\r\n        \"kyoutuu\": [\r\n            {\"kNum\":5, \"name\":\"inposition\", \"tanni\": \"Pulse\", \"label\":\"In-position Range\", \"inputType\":\"text\", \"infoText\":'Set the range for In-position.'},\r\n        ],\r\n        \"oshituke\": [\r\n            {\"kNum\":11, \"name\":\"oshitukeDousaMode\", \"tanni\": \"\", \"label\":\"Push Motion Operation Mode\", \"inputType\":\"dropdown\", \"inputs\":[\"Continuous(One direction)\",\"Set time(One direction)\",\"Continuous(Both direction)\",\"Set time(Both direction)\",], \"infoText\":<>Set the direction and time for Push Motion<br/>():Direction to limit torque.<br/>One direction:Torque is limited only in operation direction.<br/>Both direction:Torque is limited in both directions</>},\r\n            {\"kNum\":12, \"name\":\"oshitukeDousaTorque\", \"tanni\": \"%\", \"label\":\"Push Motion Torque\", \"inputType\":\"text\", \"infoText\":<>Set the torque during pressing operation by command Q or Z in % of the rated torque.</>},\r\n            {\"kNum\":13, \"name\":\"oshitukeDousaTime\", \"tanni\": \"msec\", \"label\":\"Push Motion Holding Time\", \"inputType\":\"text\", \"infoText\":'Set Push Motion Holding Time (Ref: 8.6.2)'},\r\n        ],\r\n        \"genten\": [\r\n            {\"kNum\":22, \"name\":\"gentenShingou\", \"tanni\": \"\", \"label\":\"Origin Signal Source\", \"inputType\":\"dropdown\", \"inputs\":[\"Stopper Detection\",\"Stopper Detection (Auto)\",\"Origin Sensor\",\"Origin Sensor(Auto)\"], \"infoText\":<>Set the origin detection signal source and detection method. The origin sensor can be assigned only to input point 1.<br/>(Auto): Automatic origin detection operation starts when the power is turned on.<br/>Ref: 11.1</>},\r\n            {\"kNum\":23, \"name\":\"gentenSpeed\", \"tanni\": \"100pps\", \"label\":\"Origin Detection Speed\", \"inputType\":\"text\", \"infoText\":'Set the speed for Origin Detection'},\r\n            {\"kNum\":24, \"name\":\"gentenAccel\", \"tanni\": \"kpps2\", \"label\":\"Origin Detection Acceleration\", \"inputType\":\"text\", \"infoText\":'Set the acceleration for Origin Detection'},\r\n            {\"kNum\":25, \"name\":\"gentenDirection\", \"tanni\": \"\", \"label\":\"Origin Detection Direction\", \"inputType\":\"dropdown\", \"inputs\":[\"CW\",\"CCW\"], \"infoText\":'Set the direction for Origin Detection'},\r\n            {\"kNum\":26, \"name\":\"gentenOffset\", \"tanni\": \"100Pulse\", \"label\":\"Origin Offset Distance\", \"inputType\":\"text\", \"infoText\":<>Set offset amount from detected origin to coordinate origin</>},\r\n            {\"kNum\":28, \"name\":\"gentenTorque\", \"tanni\": \"%\", \"label\":\"Stopper Detection Torque\", \"inputType\":\"text\", \"infoText\":<>Set the torque to detect a stopper for Origin Detection by percentage to rated torque<br/>Ref: 11.1.1</>},\r\n        ],\r\n    }\r\n\r\n    const [settingsObj, setSettingsObj] = useState(settings)\r\n    useEffect(() => {\r\n        console.log(settingsObj)\r\n    }, [settingsObj])\r\n\r\n    const SettingsPanelItem = ({ data }) => {\r\n\r\n        const [inputValue, setInputValue] = useState(settingsObj[\"kNum\" + data[\"kNum\"].toString()])\r\n\r\n        const setTextInputValue = (value) => {\r\n            setInputValue(value)\r\n            let tmp = settingsObj\r\n            tmp[\"kNum\" + data[\"kNum\"].toString()] = value\r\n            setSettingsObj(tmp)\r\n        }\r\n\r\n        const setDropdownValue = (inputValue) => {\r\n            const inputIndex = data[\"inputs\"].indexOf(inputValue)\r\n            setInputValue(inputIndex)\r\n            let tmp = settingsObj\r\n            tmp[\"kNum\" + data[\"kNum\"].toString()] = inputIndex\r\n            setSettingsObj(tmp)\r\n        }\r\n\r\n        switch (data[\"inputType\"]) {\r\n            case \"text\":\r\n                return (\r\n                    <div className='settings-panel-item'>\r\n                        <div className='settings-panel-item-label-container'>\r\n                            <p className='settings-panel-item-label'>{ data[\"label\"] }</p>\r\n                            <SettingInfo text={ data[\"infoText\"] } />\r\n                        </div>\r\n                        <input className='settings-panel-item-input' placeholder={settings[\"kNum\" + data[\"kNum\"].toString()]} onChange={(e) => setTextInputValue(e.target.value)}/>\r\n                        <p className='settings-panel-item-tanni'>{data[\"tanni\"]}</p>\r\n                    </div>\r\n                )\r\n            case \"dropdown\":\r\n                return (\r\n                    <div className='settings-panel-item'>\r\n                        <div className='settings-panel-item-label-container'>\r\n                            <p className='settings-panel-item-label'>{ data[\"label\"] }</p>\r\n                            <SettingInfo text={ data[\"infoText\"] } />\r\n                        </div>\r\n                        <div className='settings-panel-item-input'>\r\n                            <Dropdown setItem={setDropdownValue} defaultItem={data[\"inputs\"][settings[\"kNum\" + data[\"kNum\"].toString()]]} itemArr={data[\"inputs\"]} />\r\n                        </div>\r\n                        <p className='settings-panel-item-tanni'>{data[\"tanni\"]}</p>\r\n                    </div>\r\n                )\r\n            default:\r\n                return\r\n        }\r\n    }\r\n\r\n    const saveChanges = () => {\r\n        closePanel()\r\n        setSettings(settingsObj)\r\n    }\r\n\r\n    \r\n    const setToDefault = () => {\r\n        // closePanel()\r\n        setSettingsObj({\r\n            'kNum5': 5, 'kNum11': 0, 'kNum12': 30, 'kNum13': 200, 'kNum14': 0, 'kNum22': 0,\r\n            'kNum23': 10, 'kNum24': 10, 'kNum25': 1, 'kNum26': 0, 'kNum28': 30\r\n        })\r\n        setSettings({\r\n            'kNum5': 5, 'kNum11': 0, 'kNum12': 30, 'kNum13': 200, 'kNum14': 0, 'kNum22': 0,\r\n            'kNum23': 10, 'kNum24': 10, 'kNum25': 1, 'kNum26': 0, 'kNum28': 30\r\n        })\r\n    }\r\n\r\n    return (\r\n        <div id=\"settings-panel\">\r\n            <div id=\"close-settings-panel\" onClick={() => closePanel()}><i className=\"fas fa-times\"></i></div>\r\n            {/* content */}\r\n            <div className='settings-panel-block'>\r\n                <p className='settings-panel-block-label'>Common Settings</p>\r\n                <div className='settings-panel-block-contents'>\r\n                    { settingsPanelData[\"kyoutuu\"].map((item, i) => <SettingsPanelItem data={item} key={i}/>) }\r\n                </div>\r\n            </div>\r\n            <div className='settings-panel-block'>\r\n                <p className='settings-panel-block-label'>Push Motion Operation Settings</p>\r\n                <div className='settings-panel-block-contents'>\r\n                    { settingsPanelData[\"oshituke\"].map((item, i) => <SettingsPanelItem data={item} key={i} />) }\r\n                </div>\r\n            </div>\r\n            <div className='settings-panel-block'>\r\n                <p className='settings-panel-block-label'>Origin Detection Settings</p>\r\n                <div className='settings-panel-block-contents'>\r\n                    { settingsPanelData[\"genten\"].map((item, i) => <SettingsPanelItem data={item} key={i} />) }\r\n                </div>\r\n            </div>\r\n            <div id='setting-buttons'>\r\n                <div id='save-changes-button'>\r\n                    <Button variant=\"contained\" onClick={() => saveChanges()}>\r\n                        Save changes\r\n                    </Button>\r\n                </div>\r\n                <div style={{marginRight: \"30px\"}}></div>\r\n                <div id='settings-to-default-button'>\r\n                    <Button variant=\"text\" onClick={() => setToDefault()}>\r\n                        set to default\r\n                    </Button>\r\n                </div>\r\n                <div style={{marginRight: \"10px\"}}></div>\r\n                <SettingsDefaultInfo info={settingsPanelData} />\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nconst Dropdown = (props) => {\r\n    const itemArr = props.itemArr\r\n    const setItem = props.setItem\r\n\r\n    const [selectedItem, setSelectedItem] = useState(props.defaultItem !== undefined ? props.defaultItem : itemArr[0])\r\n    const dropdownItems = useRef()\r\n    const selectedItemRef = useRef()\r\n\r\n    const dropdowns = () => {\r\n        return itemArr.map(item => {\r\n            return (\r\n                <div className=\"dropdown-item unselectable\" onClick={(e) => clickItem(e)} key={item}>{item}</div>\r\n            )\r\n        })\r\n    }\r\n\r\n    const showItems = () => {\r\n        dropdownItems.current.style.display = \"block\"\r\n    }\r\n    \r\n    const clickItem = (e) => {\r\n        setSelectedItem(e.target.innerText)\r\n        setItem(e.target.innerText)\r\n        dropdownItems.current.style.display = \"none\"\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"dropdown-selector\">\r\n            <div ref={selectedItemRef} className=\"selected-item-smaller unselectable\" onClick={() => showItems()}>{selectedItem}<i className=\"fas fa-angle-down\"></i></div>\r\n            <div ref={dropdownItems} className=\"dropdown-items unselectable\">\r\n                {dropdowns()}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import { Button } from \"@mui/material\"\r\nimport { useEffect, useRef, useState } from \"react\"\r\n\r\n// ------------------------------------\r\nexport const WizardJikuEng = (props) => {\r\n\r\n    const params = props.params\r\n    const tkData = params.tannikannsannData\r\n    const [input, setInput] = useState(params.history.length >= 1 ? params.history[0][1] : [])\r\n    const checkBoxRef = useRef()\r\n\r\n    useEffect(() => {\r\n        input.forEach(num => {\r\n            checkBoxRef.current.querySelector('#jiku-'+num).checked = true\r\n        })\r\n    }, [input])\r\n\r\n    const jikuCheckBoxContainer = () => {\r\n        let res = []\r\n        let i = 1\r\n        while (i<=params.jiku) {\r\n            const num = i\r\n            res.push(\r\n                <div className=\"jiku-input-container\" key={num+\"jiku-input\"}>\r\n                    <input type=\"checkbox\" key={num+\"input\"} onChange={(e) => changeInput(e, num)} id={\"jiku-\"+num} name=\"jiku-sentaku\"/>\r\n                    <label htmlFor={\"jiku-\"+num} key={num+\"label\"}>Axis #{num}</label>\r\n                </div>\r\n            )\r\n            i += 1\r\n        }\r\n        return res\r\n    }\r\n\r\n    const changeInput = (e, num) => {\r\n        const isChecked = e.currentTarget.checked\r\n        let tmp = [...input]\r\n        if (isChecked && !input.includes(num)) {\r\n            tmp.push(num)\r\n        } else {\r\n            const index = tmp.indexOf(num);\r\n            if (index > -1) {\r\n                tmp.splice(index, 1);\r\n            }\r\n        }\r\n        setInput(tmp)\r\n    }\r\n\r\n    const goNext = () => {\r\n        let isCheckedArr = []\r\n        checkBoxRef.current.querySelectorAll('input').forEach(checkBox => {\r\n            if (checkBox.checked === true) {\r\n                isCheckedArr.push(\"true\")\r\n            }\r\n        })\r\n        if (isCheckedArr.length >= 1) {\r\n            let tmp = [...params.history]\r\n            if (tmp.length >= 1) {\r\n                tmp[0][1] = input\r\n            } else {\r\n                tmp.push([\"jiku\", input])\r\n            }\r\n            params.setHistory(tmp)\r\n            params.setWizardInput([\"kikou\", input])\r\n        } else {\r\n            alert(\"Select axis\")\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard unselectable\">\r\n            <p className=\"tanni-wizard-title\">Select Axis</p>\r\n            <div ref={checkBoxRef} className=\"tanni-wizard-selector tanni-jiku\">\r\n                {jikuCheckBoxContainer()}\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons\">\r\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n// ------------------------------------\r\n\r\nexport const WizardKikouEng = (props) => {\r\n    const params = props.params\r\n    const tkData = params.tannikannsannData\r\n    const jikuMainNum = params.history[0][1][0]-1\r\n    const [input, setInput] = useState(params.history.length >= 2 ? params.history[1][1] : (tkData[jikuMainNum].kikou !== \"initial\" ? tkData[jikuMainNum].kikou : \"ボールねじ\"))\r\n    const radioRef = useRef()\r\n\r\n    useEffect(() => {\r\n        let arr = [\"ボールねじ\", \"ベルト駆動\", \"ラックアンドピニオン\", \"インデックステーブル\"]\r\n        let i = arr.indexOf(input) + 1\r\n        radioRef.current.querySelector('#kikou-'+i).checked = true\r\n    }, [input])\r\n\r\n    const goBack = () => {\r\n        params.setWizardInput([\"jiku\", params.history[0][1]])\r\n    }\r\n\r\n    const goNext = () => {\r\n        let isCheckedArr = []\r\n        radioRef.current.querySelectorAll('input').forEach(input => {\r\n            if (input.checked === true) {\r\n                isCheckedArr.push(\"true\")\r\n            }\r\n        })\r\n        if (isCheckedArr.length !== 1) {\r\n            alert('Select an application')\r\n        } else {\r\n            let tmp = [...params.history]\r\n            if (params.history.length === 1) {\r\n                tmp.push([\"kikou\", input])\r\n                if (input !== \"インデックステーブル\") {\r\n                    params.setWizardInput([\"susumiryou\", input])\r\n                } else {\r\n                    tmp.push([\"susumiryou\", 360, 360])\r\n                    params.setWizardInput([\"gensoku\", input])\r\n                }\r\n            } else {\r\n                tmp[1] = [\"kikou\", input]\r\n                if (input !== \"インデックステーブル\") {\r\n                    params.setWizardInput([\"susumiryou\", input])\r\n                } else {\r\n                    tmp[2] = [\"susumiryou\", 1]\r\n                    params.setWizardInput([\"gensoku\", input])\r\n                }\r\n            }\r\n            params.setHistory(tmp)\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard unselectable\">\r\n            <p className=\"tanni-wizard-title\">Select Application</p>\r\n            <div ref={radioRef} className=\"tanni-wizard-selector tanni-kikou\">\r\n                <div>\r\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-1\" name=\"kikou-sentaku\" value=\"ボールねじ\"/>\r\n                    <label htmlFor=\"kikou-1\">Ball screw</label>\r\n                </div>\r\n                <div>\r\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-2\" name=\"kikou-sentaku\" value=\"ベルト駆動\" />\r\n                    <label htmlFor=\"kikou-2\">Belt drive</label>\r\n                </div>\r\n                <div>\r\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-3\" name=\"kikou-sentaku\" value=\"ラックアンドピニオン\" />\r\n                    <label htmlFor=\"kikou-3\">Rack and pinion</label>\r\n                </div>\r\n                <div>\r\n                    <input type=\"radio\" onClick={(e) => setInput(e.currentTarget.value)} id=\"kikou-4\" name=\"kikou-sentaku\" value=\"インデックステーブル\" />\r\n                    <label htmlFor=\"kikou-4\">Index table</label>\r\n                </div>\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons\">\r\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\r\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const WizardSusumiryouEng = (props) => {\r\n    const params = props.params\r\n    const tkData = params.tannikannsannData\r\n    const jikuMainNum = params.history[0][1][0]-1\r\n    const mode = params.history[1][1]\r\n    let susumiryouText = \"\"\r\n    let susumiryouVar = Math.PI\r\n    const [input, setInput] = useState((params.history.length >= 3) ? parseFloat(params.history[2][2]) : tkData[jikuMainNum].susumiryou[1])\r\n\r\n    switch (mode) {\r\n        case \"ボールねじ\":\r\n            susumiryouText = \"Ball screw lead\"\r\n            susumiryouVar = 1\r\n            break\r\n        case \"ベルト駆動\":\r\n            susumiryouText = \"Pulley diameter\"\r\n            break\r\n        case \"ラックアンドピニオン\":\r\n            susumiryouText = \"Pinion diameter\"\r\n            break\r\n        default:\r\n            susumiryouText = \"Ball screw lead\"\r\n            break\r\n    }\r\n\r\n    const goNext = () => {\r\n        if (input !== \"\") {\r\n            let tmp = [...params.history]\r\n            if (params.history.length === 2) {\r\n                tmp.push([\"susumiryou\", Math.round((parseFloat(input)*susumiryouVar + Number.EPSILON) * 100) / 100, parseFloat(input)])\r\n            } else {\r\n                tmp[2] = [\"susumiryou\", Math.round((parseFloat(input)*susumiryouVar + Number.EPSILON) * 100) / 100, parseFloat(input)]\r\n            }\r\n            params.setHistory(tmp)\r\n            params.setWizardInput([\"gensoku\", input])\r\n        } else {\r\n            alert('Enter a value')\r\n        }\r\n    }\r\n\r\n    const goBack = () => {\r\n        let tmp = [...params.history]\r\n        let kikouValue = tmp[1][1]\r\n        params.setWizardInput([\"kikou\", kikouValue])\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard\">\r\n            <p className=\"tanni-wizard-title unselectable\">Travel distance per motor revolution</p>\r\n            <div className=\"tanni-wizard-selector tanni-susumi\">\r\n                <div className=\"susumi-1\">\r\n                    <p className='tanni-susumi-p'>{susumiryouText} : </p>\r\n                    {(params.history.length <= 2 && tkData[jikuMainNum].susumiryou[0]===0) ? \r\n                    <input type=\"text\" placeholder={0} onChange={(e) => setInput(e.currentTarget.value)}/>\r\n                    : <input type=\"text\" value={input} onChange={(e) => setInput(e.currentTarget.value)}/>\r\n                    }\r\n                    <p className='tanni-susumi-tanni'> mm</p>\r\n                </div>\r\n                <div className=\"susumi-2\">\r\n                    <p className='tanni-susumi-p'>Distance : <span>{Math.round((parseFloat(input)*susumiryouVar + Number.EPSILON) * 100) / 100}</span> mm</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons unselectable\">\r\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\r\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const WizardGensokuEng = (props) => {\r\n    const params = props.params\r\n    const tkData = params.tannikannsannData\r\n    const jikuMainNum = params.history[0][1][0]-1\r\n    // const [input, setInput] = useState((params.history.length >= 4) ? params.history[3][1] : tkData[jikuMainNum].gensoku)\r\n    const [input1, setInput1] = useState((params.history.length >= 4) ? params.history[3][1][0] : tkData[jikuMainNum].gensoku[0])\r\n    const [input2, setInput2] = useState((params.history.length >= 4) ? params.history[3][1][1] : tkData[jikuMainNum].gensoku[1])\r\n    const checkBoxRef = useRef()\r\n    const selectorRef = useRef()\r\n\r\n    useEffect(() => {\r\n        if (((params.history.length > 3) && (params.history[3][1][0] !== (1||\"\") || params.history[3][1][1] !== (1||\"\"))) || (tkData[jikuMainNum].gensoku[0]!==(1||\"\") || tkData[jikuMainNum].gensoku[1]!==(1||\"\"))) {\r\n            selectorRef.current.style.opacity = \"1\"\r\n            checkBoxRef.current.checked = \"true\"\r\n            selectorRef.current.querySelectorAll(\"input\").forEach(input => {\r\n                input.readOnly = false\r\n            })\r\n        }\r\n    })\r\n\r\n    const goNext = () => {\r\n        if ((input1 && input2) !== \"\") {\r\n            let tmp = [...params.history]\r\n            if (params.history.length === 3) {\r\n                tmp.push([\"gensoku\", [input1, input2]])\r\n            } else {\r\n                tmp[3] = [\"gensoku\", [input1, input2]]\r\n            }\r\n            params.setHistory(tmp)\r\n            params.setWizardInput([\"bunkai\", [input1, input2]])\r\n        } else {\r\n            alert(\"Enter a value\")\r\n        }\r\n    }\r\n\r\n    const goBack = () => {\r\n        if (params.history[1][1] !== \"インデックステーブル\") {\r\n            params.setWizardInput([\"susumiryou\", 0])\r\n        } else {\r\n            params.setWizardInput([\"kikou\", 0])\r\n        }\r\n    }\r\n\r\n    const handleToggle = (e) => {\r\n        if (e.currentTarget.checked) {\r\n            selectorRef.current.style.opacity = \"1\"\r\n            selectorRef.current.querySelectorAll(\"input\").forEach(input => {\r\n                input.readOnly = false\r\n            })\r\n        } else {\r\n            setInput1(1)\r\n            setInput2(1)\r\n            selectorRef.current.style.opacity = \"0.4\"\r\n        }\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard unselectable\">\r\n            <div className=\"tanni-wizard-title gensoku-title\"><input ref={checkBoxRef} type=\"checkbox\" onChange={(e) => handleToggle(e)} />Reduction ratio</div>\r\n            <div ref={selectorRef} className=\"tanni-wizard-selector gensoku-selector\">\r\n                <table>\r\n                    <thead>\r\n                        <tr>\r\n                            <th>Input</th>\r\n                            <th></th>\r\n                            <th>Output</th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td><input type=\"text\" readOnly value={input1} onChange={(e) => setInput1(e.currentTarget.value)}/></td>\r\n                            <td>  :  </td>\r\n                            <td><input type=\"text\" readOnly value={input2} onChange={(e) => setInput2(e.currentTarget.value)}/></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons\">\r\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\r\n                <Button className=\"tanni-next\" variant=\"contained\" onClick={() => goNext()}>NEXT</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const WizardBunkaiEng = (props) => {\r\n    const params = props.params\r\n    const tkData = params.tannikannsannData\r\n    const jikuMainNum = params.history[0][1][0]-1\r\n    const mode = params.history[1][1]\r\n    let bunkaiText = \"\"\r\n    let bunkaiVar = 1\r\n    const [input, setInput] = useState(params.history.length === 5 ? params.history[4][1] : tkData[jikuMainNum].bunkai)\r\n\r\n    switch (mode) {\r\n        case \"インデックステーブル\":\r\n            bunkaiText = \"°\"\r\n            bunkaiVar = 360 / (params.history[3][1][1]/params.history[3][1][0])\r\n            break\r\n        default:\r\n            bunkaiText = \"mm\"\r\n            bunkaiVar = params.history[2][1] / (params.history[3][1][1]/params.history[3][1][0])\r\n            break\r\n    }\r\n\r\n    const getTanniValue = () => {\r\n        return (1/parseFloat(params.history[2][1])) * parseFloat(input) * (parseFloat(params.history[3][1][1])/parseFloat(params.history[3][1][0]))\r\n    }\r\n\r\n    const goOK = () => {\r\n        let tkTmp = [...tkData]\r\n        params.history[0][1].forEach(jikuNum => {\r\n            tkTmp[jikuNum-1] = {kikou:params.history[1][1],susumiryou:[params.history[2][1],params.history[2][2]],gensoku:params.history[3][1],bunkai:input,tanniValue:getTanniValue()}\r\n        })\r\n        params.setTannikannsannData(tkTmp)\r\n        params.setHistory([])\r\n        props.close()\r\n    }\r\n\r\n    const goBack = () => {\r\n        params.setWizardInput([\"gensoku\", 0])\r\n    }\r\n\r\n    const changeInput = (item) => {\r\n        setInput(item)\r\n        let tmp = [...params.history]\r\n        if (tmp.length < 5) {\r\n            tmp.push([\"bunkai\", item])\r\n        } else {\r\n            tmp[4] = [\"bunkai\", item]\r\n        }\r\n        params.setHistory(tmp)\r\n    }\r\n\r\n    // decimal point function\r\n    function roundTo(n, digits) {\r\n        var negative = false;\r\n        if (digits === undefined) {\r\n            digits = 0;\r\n        }\r\n        if (n < 0) {\r\n            negative = true;\r\n            n = n * -1;\r\n        }\r\n        var multiplicator = Math.pow(10, digits);\r\n        n = parseFloat((n * multiplicator).toFixed(11));\r\n        n = (Math.round(n) / multiplicator).toFixed(digits);\r\n        if (negative) {\r\n            n = (n * -1).toFixed(digits);\r\n        }\r\n        return n;\r\n    }\r\n\r\n    return (\r\n        <div className=\"tanni-wizard unselectable\">\r\n            <p className=\"tanni-wizard-title\">Minimum positioning unit</p>\r\n            <div className=\"tanni-wizard-selector tanni-bunkai\">\r\n                <div className=\"bunkai-1\">\r\n                    <p className=\"tanni-bunkai-text\">Resolution of motor: </p>\r\n                    <DropdownEng setItem={changeInput} defaultItem={input} itemArr={[300, 600, 1000, 1200, 2000, 3000, 5000, 6000, 10000, 12000]} />\r\n                    <p className=\"tanni-bunkai-text\">pulse/revolution</p>\r\n                </div>\r\n                <div className=\"bunkai-2\">\r\n                    <p className=\"tanni-bunkai-text\">Minimum positioning unit: <span>{roundTo(bunkaiVar/parseFloat(input) + Number.EPSILON, 5)}</span> {bunkaiText}</p>\r\n                </div>\r\n            </div>\r\n            <div className=\"tanni-wizard-buttons\">\r\n                <Button className=\"tanni-back\" variant=\"contained\" onClick={() => goBack()}>BACK</Button>\r\n                <Button className=\"tanni-ok\" variant=\"contained\" onClick={() => goOK()}>OK</Button>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const DropdownEng = (props) => {\r\n    const itemArr = props.itemArr\r\n    const setItem = props.setItem\r\n\r\n    const [selectedItem, setSelectedItem] = useState(props.defaultItem !== undefined ? props.defaultItem : itemArr[0])\r\n    const dropdownItems = useRef()\r\n    const selectedItemRef = useRef()\r\n\r\n    const dropdowns = () => {\r\n        return itemArr.map(item => {\r\n            return (\r\n                <div className=\"dropdown-item unselectable\" onClick={(e) => clickItem(e)} key={item}>{item}</div>\r\n            )\r\n        })\r\n    }\r\n\r\n    const showItems = () => {\r\n        dropdownItems.current.style.display = \"block\"\r\n    }\r\n    \r\n    const clickItem = (e) => {\r\n        setSelectedItem(e.target.innerText)\r\n        setItem(e.target.innerText)\r\n        dropdownItems.current.style.display = \"none\"\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"dropdown-selector\">\r\n            <div ref={selectedItemRef} className=\"selected-item unselectable\" onClick={() => showItems()}>{selectedItem}<i className=\"fas fa-angle-down\"></i></div>\r\n            <div ref={dropdownItems} className=\"dropdown-items unselectable\">\r\n                {dropdowns()}\r\n            </div>\r\n        </div>\r\n    )\r\n}","import React, { useRef, useState } from 'react';\r\nimport { SettingsPanel } from '../settingsPanel/settingsPanel';\r\nimport { WizardGensokuEng, WizardKikouEng, WizardSusumiryouEng, WizardBunkaiEng, WizardJikuEng } from './tanni-funcs_eng';\r\nimport { toCML } from '../toCml';\r\nimport { Link } from \"react-router-dom\";\r\n\r\n// Function to download data to a file\r\nexport const downloadFile = (data, filename, type) => {\r\n    var file = new Blob([data], {type: type});\r\n    if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n        window.navigator.msSaveOrOpenBlob(file, filename);\r\n    else { // Others\r\n        let a = document.createElement(\"a\"),\r\n        url = URL.createObjectURL(file);\r\n        a.href = url;\r\n        a.download = filename;\r\n        document.body.appendChild(a);\r\n        a.click();\r\n        setTimeout(function() {\r\n            document.body.removeChild(a);\r\n            window.URL.revokeObjectURL(url);  \r\n        }, 0); \r\n    }\r\n}\r\n\r\nexport const TopMenuEng = (props) => {\r\n\r\n    const topMenuRef = useRef()\r\n    const muteIconRef = useRef()\r\n\r\n    const handleFileImport = (e) => {\r\n        const reader = new FileReader()\r\n        reader.onload = async (e) => { \r\n            // const obj = JSON.parse(e.target.result)\r\n            const obj = JSON.parse(reader.result)\r\n            // try {\r\n                props.setJiku(obj.data.jiku)\r\n                props.setTannikannsannData(obj.data.tannikannsannData)\r\n                props.setProgramData(obj.data.programData)\r\n                props.setLoopData(obj.data.loopData)\r\n                props.setCmlOutput(toCML(obj.data.programData, obj.data.loopData, obj.data.isNyuryokuShingou, obj.data.tannikannsannData, obj.data.settings))\r\n            // } catch (err) {\r\n            //     alert('ファイルが間違っています')\r\n            // }\r\n        };\r\n        reader.readAsText(e.target.files[0], \"utf-8\")\r\n    }\r\n\r\n    // Function to download data to a file\r\n    const downloadFile = (data, filename, type) => {\r\n        var file = new Blob([data], {type: type});\r\n        if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n            window.navigator.msSaveOrOpenBlob(file, filename);\r\n        else { // Others\r\n            var a = document.createElement(\"a\"),\r\n            url = URL.createObjectURL(file);\r\n            a.href = url;\r\n            a.download = filename;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            setTimeout(function() {\r\n                document.body.removeChild(a);\r\n                window.URL.revokeObjectURL(url);  \r\n            }, 0); \r\n        }\r\n    }\r\n\r\n    const handleFileSave = () => {\r\n        let obj = {\"name\":\"cml-import\",\"data\":{\"jiku\":props.jiku,\"tannikannsannData\":props.tannikannsannData,\"programData\":props.programData,\"loopData\":props.loopData,\"isNyuryokuShingou\":props.isNyuryokuShingou, \"settings\":props.settings}}\r\n        const data = JSON.stringify(obj)\r\n\r\n        const date = new Date();\r\n        let year = date.getFullYear();\r\n        let month = date.getMonth() + 1;\r\n        let day = date.getDate();\r\n        let hour = date.getHours();\r\n        let minute = date.getMinutes()\r\n        let currentDate = `${year}_${month}_${day}_${hour}_${minute}`\r\n\r\n        const filename = \"CML_projectfile_\" + currentDate\r\n        const type = \".txt\"\r\n        downloadFile(data, filename, type)\r\n    }\r\n\r\n    const display = (ref) => {\r\n        ref.current.classList.add(\"shown\")\r\n        ref.current.classList.remove(\"hidden\")\r\n        setTimeout(() => {\r\n            if (!ref.current.classList.contains(\"hidden\")) {\r\n                ref.current.style.display = \"block\"\r\n            }\r\n        }, 500)\r\n    }\r\n\r\n    const hide = (ref) => {\r\n        ref.current.classList.remove('shown')\r\n        ref.current.classList.add('hidden')\r\n        ref.current.style.display = \"none\"\r\n    }\r\n\r\n    const openTanni = () => {\r\n        document.querySelector('.tannikannsann-popup').style.display = \"flex\"\r\n        props.layerRef.current.style.display = \"block\"\r\n    }\r\n\r\n    const closeTanni = (topMenuRef, layerRef) => {\r\n        document.querySelector('.tannikannsann-popup').style.display = \"none\"\r\n        // topMenuRef.current.querySelector('.tannikannsann-popup').style.display = \"none\"\r\n        layerRef.current.style.display = \"none\"\r\n    }\r\n\r\n    const openSettingsPanel = () => {\r\n        document.querySelector('#settings-panel').style.display = \"flex\"\r\n        props.layerRef.current.style.display = \"block\"\r\n    }\r\n\r\n    const closeSettingsPanel = () => {\r\n        document.current.querySelector('#settings-panel').style.display = \"none\"\r\n        // topMenuRef.current.querySelector('#settings-panel').style.display = \"none\"\r\n        props.layerRef.current.style.display = \"none\"\r\n    }\r\n\r\n    const toggleIsMute = (e) => {\r\n        let isPressed = muteIconRef.current.classList.contains(\"fa-volume-xmark\")\r\n        if (isPressed) {\r\n            muteIconRef.current.classList.remove(\"fa-volume-xmark\")\r\n            muteIconRef.current.classList.add(\"fa-volume-high\")\r\n            props.setIsMute(false)\r\n        } else {\r\n            muteIconRef.current.classList.remove(\"fa-volume-high\")\r\n            muteIconRef.current.classList.add(\"fa-volume-xmark\")\r\n            props.setIsMute(true)\r\n        }\r\n    }\r\n\r\n    const muteIcon = props.isMute ? \"volume-xmark\" : \"volume-high\"\r\n    // --\r\n    const expSave = useRef() \r\n    const expImp = useRef() \r\n    const expTanni = useRef() \r\n\r\n    return (\r\n        <div ref={topMenuRef} className=\"top-menu\">\r\n            <div className=\"top-menu-button save-file unselectable\" onMouseEnter={() => display(expSave)} onMouseLeave={() => hide(expSave)} onClick={() => handleFileSave()}>\r\n                <i className=\"fa-solid fa-floppy-disk\"></i>Save project as\r\n                <div ref={expSave} className=\"exp-box hidden\">Save project in progress</div>\r\n            </div>\r\n            \r\n            <div className=\"top-menu-button import-file unselectable\" onMouseEnter={() => display(expImp)} onMouseLeave={() => hide(expImp)}>\r\n                <label htmlFor=\"top-menu-file-upload\">\r\n                    <i className=\"fa-solid fa-folder-open\"></i>Open project\r\n                    <input id=\"top-menu-file-upload\" accept=\".txt\" type=\"file\" onChange={(e) => handleFileImport(e)}/>\r\n                </label>\r\n                <div ref={expImp} className=\"exp-box hidden\">Open a saved project</div>\r\n            </div>\r\n            <div className=\"top-menu-button tannikannsann unselectable\" onMouseEnter={() => display(expTanni)} onMouseLeave={() => hide(expTanni)} onClick={() => openTanni()}>\r\n                <i className=\"fa-solid fa-gears\"></i>Unit conversion\r\n                <div ref={expTanni} className=\"exp-box hidden\">Sets units and resolution</div>\r\n            </div>\r\n            {/* <Tannikannsann jiku={props.jiku} tannikannsannData={props.tannikannsannData} setTannikannsannData={props.setTannikannsannData} application={props.application} setApplication={props.setApplication} tanniValue={props.tanniValue} setTanniValue={props.setTanniValue} layerRef={props.layerRef} topMenuRef={topMenuRef} closeTanni={closeTanni}/> */}\r\n            <div className=\"top-menu-button settings unselectable\" onClick={() => openSettingsPanel()}>\r\n                <i className=\"fa-solid fa-gear\"></i>Settings\r\n            </div>\r\n            {/* <SettingsPanel closePanel={closeSettingsPanel} settings={props.settings} setSettings={props.setSettings} /> */}\r\n            <div className='top-menu-button mute-button unselectable' onClick={(e) => toggleIsMute(e)}>\r\n                <i ref={muteIconRef} className={\"fa-solid fa-\"+muteIcon}></i>\r\n            </div>\r\n            <a href=\"https://rin101.github.io/cml-app\">\r\n            {/* <a href=\"https://musclecorp.com/cml-app\"> */}\r\n                <div className='top-menu-button language-button unselectable'>\r\n                    <i className={\"fa-solid fa-globe\"}></i>日本語\r\n                </div>\r\n            </a>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport const Tannikannsann = (props) => {\r\n    // props: tanniValue, setTanniValue, application, setApplication, tannikannsannData, setTannikannsannData\r\n    \r\n    const close = () => {\r\n        props.closeTanni(props.topMenuRef, props.layerRef)\r\n    }\r\n    \r\n    const WizardController = (props) => {\r\n        const [history, setHistory] = useState([])\r\n        const [wizardInput, setWizardInput] = useState([\"jiku\", []])\r\n\r\n        const inputForm = () => {\r\n            const params = {\r\n                wizardInput: wizardInput[1], \r\n                history, setHistory, setWizardInput,\r\n                tannikannsannData: props.tannikannsannData, setTannikannsannData: props.setTannikannsannData,\r\n                jiku: props.jiku\r\n            }\r\n        \r\n            switch (wizardInput[0]) {\r\n                case \"jiku\":\r\n                    return <WizardJikuEng params={params} />\r\n                case \"kikou\":\r\n                    return <WizardKikouEng params={params} />\r\n                case \"susumiryou\":\r\n                    return <WizardSusumiryouEng params={params} />\r\n                case \"gensoku\":\r\n                    return <WizardGensokuEng params={params} />\r\n                case \"bunkai\":\r\n                    return <WizardBunkaiEng close={props.close} params={params} />\r\n                default:\r\n                    return <WizardKikouEng params={params}/>\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div className='wizard-controller'>\r\n                    {inputForm()}\r\n            </div>\r\n        )\r\n    } \r\n\r\n    return (\r\n        <div className=\"tannikannsann-popup\">\r\n            <div className=\"close-popup close-tannikannsann\" onClick={() => close()}><i className=\"fas fa-times-circle\"></i></div>\r\n            <WizardController close={close} jiku={props.jiku} tannikannsannData={props.tannikannsannData} setTannikannsannData={props.setTannikannsannData} />\r\n        </div>\r\n    )\r\n}\r\n","import { Button } from '@mui/material';\r\nimport React, { useEffect, useRef, useState } from 'react';\r\nimport '../App.css'\r\nimport '../program-grid.css'\r\nimport { Editor } from '../Editor';\r\nimport { ProgramBlockEng, TypeDataInDousaEng, LoopInputBoxEng } from './programBlock_eng';\r\nimport useLocalStorage from '../useLocalStorage';\r\nimport { Tannikannsann, TopMenuEng } from './menu_eng';\r\nimport { downloadFile } from './menu_eng';\r\nimport soundfile1 from '../sounds/決定、ボタン押下38.mp3'\r\nimport soundfile2 from '../sounds/決定、ボタン押下44.mp3'\r\nimport instructionImg from '../image/popup-instruction.png'\r\nimport { toCML } from '../toCml';\r\nimport { pressRun } from '../serialPort';\r\nimport { SettingsPanel } from '../settingsPanel/settingsPanel';\r\n\r\nexport const AppEng = () => {\r\n\r\n    // const [cmlOutput, setCmlOutput] = useLocalStorage('CML', '')\r\n    const [cmlOutput, setCmlOutput] = useState('')\r\n    const [isNyuryokuShingou, setIsNyuryokuShingou] = useState(false)\r\n    const [settings, setSettings] = useLocalStorage('kNum', {\r\n        'kNum5': 5, 'kNum11': 0, 'kNum12': 30, 'kNum13': 200, 'kNum14': 0, 'kNum22': 0,\r\n        'kNum23': 10, 'kNum24': 10, 'kNum25': 1, 'kNum26': 0, 'kNum28': 30\r\n    })\r\n    const [isMute, setIsMute] = useState(false)\r\n    const [jiku, setJiku] = useState(1)\r\n    let initialTannikannsannData = []\r\n    for (let i=0; i < jiku; i++) {\r\n        initialTannikannsannData.push({kikou: \"initial\", susumiryou: [1,1], gensoku: [1,1], bunkai: \"1000\", tanniValue:1})\r\n    }\r\n    const [tannikannsannData, setTannikannsannData] = useState(initialTannikannsannData)\r\n    // const [programData, setProgramData] = useState([[[[\"位置決め\", 1, [[100, \"pps\"], [100, \"pps\"], [100, \"pps\"]]],[],[]],[[],[],[]],[[],[],[]]]])\r\n    const [programData, setProgramData] = useState(\r\n        [\r\n            [\r\n                [[\"位置決め\", 1, [[100, \"pps\"], [100, \"pps\"], [100, \"pps\"]]]],\r\n                [[]],\r\n                [[]]\r\n            ], [[[]]], [[[]]]\r\n        ]\r\n    )\r\n    const [loopData, setLoopData] = useState([])\r\n    const [currentDraggedCommand, setCurrentDraggedCommand] = useState(\"位置決め\")\r\n\r\n    // typeDataObj: [jiku, parentId, dousaType, dousaNum, isInitial]\r\n    // loopInputObj: [parentId, isInitial]\r\n    const [typeDataObj, setTypeDataObj] = useState(new Array(5))\r\n    const [loopInputObj, setLoopInputObj] = useState(new Array(2))\r\n    const [inputBoxType, setInputBoxType] = useState(\"none\")\r\n\r\n    const typeDataRef = useRef()\r\n    const loopInputRef = useRef()\r\n    const expCopy = useRef()\r\n    const expCopyDone = useRef()\r\n    const layerRef = useRef()\r\n    const commandSelectorRef = useRef()\r\n    const instructionPopupRef = useRef()\r\n    const jikkouNumPopupRef = useRef()\r\n\r\n    // const getIndex = (document) => {\r\n    //     let res = document.id.split('-')\r\n    //     res.shift()\r\n    //     return res\r\n    // }\r\n\r\n    const commandDragStart = (e) => {\r\n        if (!isMute) {\r\n            let audio = new Audio(soundfile1);\r\n            audio.play();\r\n        }\r\n    }\r\n\r\n    const commandHover = (e) => {\r\n        switch(e.target.id) {\r\n            case \"ichigime-selector\":\r\n                setCurrentDraggedCommand(\"位置決め\")\r\n                break\r\n            case \"oshituke-selector\":\r\n                setCurrentDraggedCommand(\"押付け\")\r\n                break\r\n            case \"taima-selector\":\r\n                setCurrentDraggedCommand(\"タイマ\")\r\n                break\r\n            case \"incremental-ichigime-selector\":\r\n                setCurrentDraggedCommand(\"位置決め+\")\r\n                break\r\n            case \"incremental-oshituke-selector\":\r\n                setCurrentDraggedCommand(\"押付け+\")\r\n                break\r\n            case \"nyuryokuten-selector\":\r\n                setCurrentDraggedCommand(\"入力点からの実行\")\r\n                break\r\n            case \"shutsuryoku1\":\r\n                setCurrentDraggedCommand(\"出力点1へ出力\")\r\n                break\r\n            case \"shutsuryoku2\":\r\n                setCurrentDraggedCommand(\"出力点2へ出力\")\r\n                break\r\n            case \"shutsuryoku3\":\r\n                setCurrentDraggedCommand(\"出力点3へ出力\")\r\n                break            \r\n            case \"shutsuryokuOff\":\r\n                setCurrentDraggedCommand(\"出力点を全てOFF\")\r\n                break       \r\n            case \"gentenfukki\":\r\n                setCurrentDraggedCommand(\"原点復帰\")\r\n                break      \r\n            case \"kurikaeshi-selector\":\r\n                setCurrentDraggedCommand(\"繰り返し\")\r\n                break\r\n            case \"dousaGroup-selector\":\r\n                setCurrentDraggedCommand(\"動作グループを追加\")\r\n                break\r\n            default:\r\n                setCurrentDraggedCommand(\"NOPE\")\r\n                break\r\n        }\r\n        // this.className += ' hold';\r\n        // setTimeout(() => (this.className = 'invisible'), 0);\r\n    }\r\n    // function dragEnd() {\r\n    //     this.className = 'fill';\r\n    // }\r\n\r\n    const copyCML = (cml) => {\r\n        navigator.clipboard.writeText(cml);\r\n        expCopy.current.style.display = \"none\"\r\n        expCopyDone.current.style.display = \"block\"\r\n        setTimeout(() => {\r\n            expCopyDone.current.style.display = \"none\"\r\n        }, 2000)\r\n    }\r\n\r\n    const display = (ref) => {\r\n        ref.current.classList.add(\"shown\")\r\n        ref.current.classList.remove(\"hidden\")\r\n        setTimeout(() => {\r\n            if (!ref.current.classList.contains(\"hidden\")) {\r\n                ref.current.style.display = \"block\"\r\n            }\r\n        }, 500)\r\n    }\r\n\r\n    const hide = (ref) => {\r\n        ref.current.classList.remove('shown')\r\n        ref.current.classList.add('hidden')\r\n        ref.current.style.display = \"none\"\r\n    }\r\n\r\n    const showPopUpOfInstruction = () => {\r\n        // instructionPopupRef.current.style.display = \"flex\"\r\n        handleFileExport()\r\n    }\r\n\r\n    const handleFileExport = () => {\r\n        const data = cmlOutput\r\n        // 日付と時刻\r\n        const date = new Date();\r\n        let year = date.getFullYear();\r\n        let month = date.getMonth() + 1;\r\n        let day = date.getDate();\r\n        let hour = date.getHours();\r\n        let minute = date.getMinutes()\r\n        let currentDate = `${year}_${month}_${day}_${hour}_${minute}`\r\n\r\n        const filename = \"CML_\" + currentDate\r\n        const type = \".txt\"\r\n        downloadFile(data, filename, type)\r\n    }\r\n\r\n    const DataInputBox = (props) => {\r\n        switch (props.inputBoxType) {\r\n            case \"typedata\":\r\n                return <TypeDataInDousaEng tkData={tannikannsannData} setInputBoxType={setInputBoxType} isInitial={typeDataObj[4]} jiku={typeDataObj[0]} parentId={typeDataObj[1]} dousaType={typeDataObj[2]} dousaNum={typeDataObj[3]} programData={programData} setProgramData={setProgramData}/>\r\n            case \"loop\":\r\n                return <LoopInputBoxEng setInputBoxType={setInputBoxType} isInitial={loopInputObj[1]} parentId={loopInputObj[0]} loopData={loopData} setLoopData={setLoopData} />\r\n            default:\r\n                return <></>\r\n        }\r\n    }\r\n\r\n    const PopUpOfInstruction = () => {\r\n        const close = () => {\r\n            instructionPopupRef.current.style.display = \"none\"\r\n        }\r\n\r\n        return (\r\n            <div className='popup-instruction' ref={instructionPopupRef}>\r\n                <div className='popup-container'>\r\n                    <div id=\"close-instruction-popup\" onClick={() => close()}><i className=\"fas fa-times-circle\"></i></div>\r\n                    <div className='popup-content'>\r\n                        <p>モータへの書き込みが完了しました。<br/>モータの電源を再投入すると、入力点からの制御が可能になります。</p>\r\n                    </div>\r\n                    {/* export to text file instruction */}\r\n                    {/* <img src={instructionImg} alt=\"instruction\" /> */}\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    const PopUpOfJikkouNum = () => {\r\n\r\n        const [jikkouNum, setJikkouNum] = useState(0);\r\n\r\n        const close = () => {\r\n            jikkouNumPopupRef.current.style.display = \"none\"\r\n            layerRef.current.style.display = \"none\"\r\n        }\r\n\r\n        const sendJikkou = () => {\r\n            if (jikkouNum === 0) {\r\n                alert(\"Select a number\")\r\n            } else {\r\n                let jikkouCml = \"[\"+jikkouNum.toString() + \".1\\n\"\r\n                pressRun(jikkouCml)\r\n            }\r\n        }\r\n\r\n        return (\r\n            <div className='popup-instruction' ref={jikkouNumPopupRef}>\r\n                <div className='popup-container'>\r\n                    <div id=\"close-instruction-popup\" onClick={() => close()}><i className=\"fas fa-times-circle\"></i></div>\r\n                    <div className='popup-jikkou-content'>\r\n                        <p>Select bank number to run</p>\r\n                        <div style={{marginTop: \"30px\"}}></div>\r\n                        <select id=\"jikkou-dropdown\" \r\n                            defaultValue={jikkouNum}\r\n                            onChange={(e) => setJikkouNum(e.target.value)}\r\n                            >\r\n                            <option value=\"0\">Select</option>\r\n                            <option value=\"1\">1</option>\r\n                            <option value=\"2\">2</option>\r\n                            <option value=\"3\">3</option>\r\n                            <option value=\"4\">4</option>\r\n                        </select>\r\n                        <div style={{marginTop: \"30px\"}}></div>\r\n                        <p id='jikkou-popup-text'>*When the execution command is sent, the program <br/>currently written in the motor is executed and the motor rotates.</p>\r\n                        <div style={{marginTop: \"15px\"}}></div>\r\n                        <Button color='warning' variant=\"contained\" onClick={() => sendJikkou()}>\r\n                            Run\r\n                        </Button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n\r\n    async function jikkou() {\r\n        // setCmlOutput(toCML(programData, loopData, isNyuryokuShingou, tannikannsannData, settings))\r\n        // pressRun(toCML(programData, loopData, isNyuryokuShingou, tannikannsannData, settings))\r\n        if (cmlOutput.length > 0) {\r\n            await pressRun(cmlOutput)\r\n            setTimeout(() => {\r\n                instructionPopupRef.current.style.display = \"flex\"\r\n            }, 500);   \r\n        } else {\r\n            alert(\"CMLに変換してください。\")\r\n        }\r\n    }\r\n\r\n    const openJikkouNumPopup = () => {\r\n        jikkouNumPopupRef.current.style.display = \"flex\"\r\n        layerRef.current.style.display = \"flex\"\r\n    }\r\n\r\n    const closeTanni = () => {\r\n        document.querySelector('.tannikannsann-popup').style.display = \"none\"\r\n        // topMenuRef.current.querySelector('.tannikannsann-popup').style.display = \"none\"\r\n        layerRef.current.style.display = \"none\"\r\n    }\r\n\r\n    const closeSettingsPanel = () => {\r\n        document.querySelector('#settings-panel').style.display = \"none\"\r\n        // topMenuRef.current.querySelector('#settings-panel').style.display = \"none\"\r\n        layerRef.current.style.display = \"none\"\r\n    }\r\n\r\n\r\n    return (\r\n        <div className=\"main\">\r\n            <PopUpOfInstruction />\r\n            <PopUpOfJikkouNum />\r\n            <DataInputBox inputBoxType={inputBoxType} />\r\n            <div ref={layerRef} className=\"layer\"></div>\r\n            <Tannikannsann jiku={jiku} tannikannsannData={tannikannsannData} setTannikannsannData={setTannikannsannData} application={\"hi\"} setApplication={\"hi\"} tanniValue={\"hi\"} setTanniValue={\"hi\"} topMenuRef={\"hi\"} closeTanni={closeTanni}/>\r\n            <SettingsPanel closePanel={closeSettingsPanel} settings={settings} setSettings={setSettings} />\r\n            <div className='top-menu-container'>\r\n                <TopMenuEng settings={settings} setSettings={setSettings} isMute={isMute} setIsMute={setIsMute} tannikannsannData={tannikannsannData} setTannikannsannData={setTannikannsannData} programData={programData} setProgramData={setProgramData} loopData={loopData} setLoopData={setLoopData} layerRef={layerRef} cmlOutput={cmlOutput} setCmlOutput={setCmlOutput} isNyuryokuShingou={isNyuryokuShingou} setIsNyuryokuShingou={setIsNyuryokuShingou} jiku={jiku} setJiku={setJiku}/>\r\n            </div>\r\n            <div className='top-menu-spacer'></div>\r\n            <div className=\"center-section\">\r\n                <div className=\"command-list-width-box\"></div>\r\n                <div className='command-list-container'>\r\n                    <div className=\"command-list\">\r\n                        <div className='command-list-wrapper'>\r\n                            {/* <div onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"dousaGroup-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Add Motion Group</div> */}\r\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"ichigime-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>PTP</div>\r\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"oshituke-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Push</div>\r\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"incremental-ichigime-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>PTP+</div>\r\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"incremental-oshituke-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Push+</div>\r\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"taima-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Timer</div>\r\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"shutsuryoku1\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Turn on OUT1</div>\r\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"shutsuryoku2\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Turn on OUT2</div>\r\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"shutsuryoku3\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Turn on OUT3</div>\r\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"shutsuryokuOff\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Turn off all outputs</div>\r\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"gentenfukki\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Origin Detection</div>\r\n                            <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"kurikaeshi-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Loop</div>\r\n                            {/* <div ref={commandSelectorRef} onDragStart={(e) => commandDragStart(e)} onMouseEnter={(e) => commandHover(e)} className=\"command-selector\" id=\"nyuryokuten-selector\" draggable=\"true\"><i className=\"fas fa-grip-vertical\"></i>Execution from Input signal</div> */}\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className='main-interface-section'>\r\n                    <div className='program-block-container'>\r\n                        <ProgramBlockEng settings={settings} isMute={isMute} tkData={tannikannsannData} setTkData={setTannikannsannData} setInputBoxType={setInputBoxType} inputBoxType={inputBoxType} loopInputObj={loopInputObj} setLoopInputObj={setLoopInputObj} typeDataObj={typeDataObj} setTypeDataObj={setTypeDataObj} typeDataRef={typeDataRef} loopInputRef={loopInputRef} isNyuryokuShingou={isNyuryokuShingou} setCmlOutput={setCmlOutput} loopData={loopData} setLoopData={setLoopData} programData={programData} setProgramData={setProgramData} jiku={jiku} setJiku={setJiku} currentDraggedCommand={currentDraggedCommand} setCurrentDraggedCommand={setCurrentDraggedCommand}/>\r\n                    </div>\r\n                    <div className='cml-output-container'>\r\n                        <div className=\"cml-output-section\">\r\n                            <div className='cml-output-content'>\r\n                                <h3 className='unselectable'>CML</h3>\r\n                                <Editor value={cmlOutput} onChange={setCmlOutput} />\r\n                            </div>\r\n                            <div className=\"jikkou-button\">\r\n                                <Button variant=\"contained\" onClick={() => showPopUpOfInstruction()}>\r\n                                    Export<br/>text file\r\n                                </Button>\r\n                                <div className=\"copy-cml-container\">\r\n                                    <div className=\"copy-cml\" onMouseEnter={() => display(expCopy)} onMouseLeave={() => hide(expCopy)} onClick={() => copyCML(cmlOutput)}><i className=\"fas fa-copy\"></i></div>\r\n                                    <div ref={expCopy} className=\"exp-copy hidden\">copy</div>\r\n                                    <div ref={expCopyDone} className=\"exp-copy-done hidden\">copied!</div>\r\n                                </div>\r\n                            </div>\r\n                            <div className='spacer'></div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className='bottom-menu-container'>\r\n                <div className='bottom-menu' id=\"bottom-menu-main-button\" onClick={() => jikkou()}>\r\n                    {/* <Button variant=\"contained\" onClick={() => jikkou()}>Write to Motor</Button> */}\r\n                    <p className='bottom-menu-button-text'>Write to Motor</p>\r\n                </div>\r\n                <div style={{marginLeft: \"10px\"}}></div>\r\n                <div className='bottom-menu' id=\"bottom-menu-jikkou-button\" onClick={() => openJikkouNumPopup()}>\r\n                    <p className='bottom-menu-button-text'>Run</p>\r\n                </div>\r\n            </div>\r\n            <div className='bottom-menu-spacer'></div>\r\n        </div>\r\n    )\r\n}\r\n","export default __webpack_public_path__ + \"static/media/popup-instruction.495acebe.png\";","import { useEffect, useState } from \"react\"\r\n\r\nconst PREFIX = 'CML-app-'\r\n\r\nexport default function useLocalStorage(key, initialValue) {\r\n    const prefixedKey = PREFIX + key\r\n\r\n    const [value, setValue] = useState(() => {\r\n        const jsonValue = localStorage.getItem(prefixedKey)\r\n        if (jsonValue != null) return JSON.parse(jsonValue)\r\n        \r\n        if (typeof initialValue === 'function') {\r\n            return initialValue()\r\n        } else {\r\n            return initialValue\r\n        }\r\n    })\r\n\r\n    useEffect(() => {\r\n        localStorage.setItem(prefixedKey, JSON.stringify(value))\r\n    }, [prefixedKey, value])\r\n\r\n    return [value, setValue] \r\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { AppEng } from './eng/App_eng';\n\nconst AppWrapper = () => {\n  return (\n    <div className='App'>\n      <AppEng />\n    </div>\n  )\n}\n\nReactDOM.render(\n  <React.StrictMode>\n    <AppWrapper />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}